"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[853],{7853:(O,g,a)=>{a.r(g),a.d(g,{GroupLeaderboardPage:()=>P});var t=a(4738),c=a(177),b=a(5079),s=a(5873),o=a(4438),u=a(7570),h=a(1529),m=a(9699);function v(n,l){1&n&&(o.j41(0,"div",12),o.nrm(1,"ion-icon",13),o.j41(2,"span"),o.EFF(3,"Season not started - Players listed alphabetically"),o.k0s()())}function _(n,l){if(1&n&&(o.j41(0,"div",14)(1,"div",5),o.EFF(2),o.k0s(),o.j41(3,"div",6),o.EFF(4),o.k0s(),o.j41(5,"div",7),o.EFF(6),o.k0s(),o.j41(7,"div",8),o.EFF(8),o.k0s(),o.j41(9,"div",9),o.EFF(10),o.k0s()()),2&n){const i=l.$implicit;o.R7$(2),o.JRh(i.position),o.R7$(2),o.JRh(i.name),o.R7$(2),o.JRh(i.played),o.R7$(2),o.SpI("",i.jokerUsed,"/2"),o.R7$(2),o.JRh(i.totalPoints)}}let P=(()=>{var n;class l{constructor(r,e,p,d){this.route=r,this.seasonService=e,this.router=p,this.groupService=d,this.groupId="",this.groupName="",this.leaderboard=[],this.sortedLeaderboard=[],(0,b.a)({trophyOutline:s.NhD,arrowUpOutline:s.Tiw,arrowDownOutline:s.MVx,removeOutline:s.pqs,footballOutline:s.gMr,timeOutline:s.CVk,chevronBackOutline:s.fKZ})}ngOnInit(){this.route.params.subscribe(r=>{this.groupId=r.id,this.loadGroupData()}),this.groupsSubscription=this.groupService.groups$.subscribe(()=>{console.log("\u{1f504} Group Leaderboard: Received group update, reloading data..."),this.loadGroupData()})}ngOnDestroy(){this.groupsSubscription&&this.groupsSubscription.unsubscribe()}loadGroupData(){console.log("\u{1f4ca} Group Leaderboard: Loading data for group:",this.groupId);const e=this.groupService.getAllGroups().find(p=>p.id===this.groupId);if(e){this.groupName=e.name,console.log(`\u{1f4cb} Group "${e.name}": ${e.members.length} members`);const p=this.groupService.getGroupLeaderboard(this.groupId);this.leaderboard=p.map(d=>({position:d.position,name:d.name,played:d.played,jokerUsed:d.jokerUsed,totalPoints:d.totalPoints})),console.log("\u{1f4ca} Leaderboard entries:",this.leaderboard.length),this.sortLeaderboard()}else console.log("\u274c Group not found, navigating back"),this.router.navigate(["/group-admin/groups"])}sortLeaderboard(){this.sortedLeaderboard=this.seasonService.isSeasonStarted()?[...this.leaderboard].sort((r,e)=>e.totalPoints-r.totalPoints):[...this.leaderboard].sort((r,e)=>r.name.localeCompare(e.name)),this.sortedLeaderboard=this.sortedLeaderboard.map((r,e)=>({...r,position:e+1}))}goBack(){this.router.navigate(["/group-admin/groups"])}}return(n=l).\u0275fac=function(r){return new(r||n)(o.rXU(u.nX),o.rXU(h.z),o.rXU(u.Ix),o.rXU(m.B))},n.\u0275cmp=o.VBU({type:n,selectors:[["app-group-leaderboard"]],standalone:!0,features:[o.aNF],decls:26,vars:3,consts:[["slot","start"],["text","Groups","defaultHref","/group-admin/groups"],[1,"ion-padding"],["class","season-info",4,"ngIf"],[1,"table-header"],[1,"position-col"],[1,"name-col"],[1,"gameweek-col"],[1,"joker-col"],[1,"points-col"],[1,"table-body"],["class","table-row",4,"ngFor","ngForOf"],[1,"season-info"],["name","information-circle-outline"],[1,"table-row"]],template:function(r,e){1&r&&(o.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),o.nrm(3,"ion-back-button",1),o.k0s(),o.j41(4,"ion-title"),o.EFF(5),o.k0s()()(),o.j41(6,"ion-content",2)(7,"ion-card")(8,"ion-card-header")(9,"ion-card-title"),o.EFF(10,"Current Standings"),o.k0s(),o.DNE(11,v,4,0,"div",3),o.k0s(),o.j41(12,"ion-card-content")(13,"div",4)(14,"div",5),o.EFF(15,"Position"),o.k0s(),o.j41(16,"div",6),o.EFF(17,"Name"),o.k0s(),o.j41(18,"div",7),o.EFF(19,"Game Week"),o.k0s(),o.j41(20,"div",8),o.EFF(21,"Played Joker"),o.k0s(),o.j41(22,"div",9),o.EFF(23,"Points"),o.k0s()(),o.j41(24,"div",10),o.DNE(25,_,11,5,"div",11),o.k0s()()()()),2&r&&(o.R7$(5),o.SpI("",e.groupName," Leaderboard"),o.R7$(6),o.Y8G("ngIf",!e.seasonService.isSeasonStarted()),o.R7$(14),o.Y8G("ngForOf",e.sortedLeaderboard))},dependencies:[t.eU,t.ai,t.BC,t.W9,t.b_,t.ME,t.tN,t.I9,t.iq,t.el,t.QW,c.pM,c.bT],styles:[".table-header[_ngcontent-%COMP%]{display:grid;grid-template-columns:80px 1fr 100px 100px 80px;padding:12px 16px;background:var(--ion-color-light);font-weight:600;border-bottom:2px solid var(--ion-color-medium);gap:16px}.table-body[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:80px 1fr 100px 100px 80px;padding:12px 16px;border-bottom:1px solid var(--ion-color-light);gap:16px;align-items:center}.table-body[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]:hover{background:var(--ion-color-light-tint)}.position-col[_ngcontent-%COMP%]{font-weight:600}.name-col[_ngcontent-%COMP%]{font-weight:500}.gameweek-col[_ngcontent-%COMP%], .joker-col[_ngcontent-%COMP%]{text-align:center}.points-col[_ngcontent-%COMP%]{text-align:right;font-weight:600;color:var(--ion-color-primary)}.season-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-top:8px;color:var(--ion-color-medium);font-size:.9rem}.season-info[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.2rem}ion-back-button[_ngcontent-%COMP%]{display:block;--color: var(--ion-color-primary);--icon-font-size: 24px;--padding-start: 0}"]}),l})()}}]);