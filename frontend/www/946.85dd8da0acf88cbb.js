"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[946],{4946:(S,_,l)=>{l.r(_),l.d(_,{PredictionsPage:()=>T});var r=l(4738),g=l(177),u=l(5079),d=l(5873),h=l(4341),e=l(4438),f=l(7570);function v(o,s){1&o&&(e.j41(0,"ion-card")(1,"ion-card-content")(2,"div",14),e.EFF(3," No predictions submitted for the current gameweek. Visit the Matches tab to make your predictions. "),e.k0s()()())}function P(o,s){if(1&o&&(e.j41(0,"ion-badge",28),e.EFF(1),e.k0s()),2&o){const t=e.XpG().$implicit,i=e.XpG(3);e.R7$(),e.SpI(" LIVE ",i.getMatchTime(t.match)," ")}}function k(o,s){if(1&o&&(e.j41(0,"div",34),e.nrm(1,"ion-icon",35),e.EFF(2),e.k0s()),2&o){const t=e.XpG(2).$implicit,i=e.XpG(3);e.R7$(),e.Y8G("name",i.getStatusIcon(t.status)),e.R7$(),e.SpI(" ",t.points," pts ")}}function x(o,s){if(1&o&&(e.j41(0,"div",29)(1,"div",30)(2,"div",25),e.EFF(3),e.k0s(),e.j41(4,"div",31),e.EFF(5),e.k0s(),e.j41(6,"div",32),e.EFF(7),e.k0s(),e.DNE(8,k,3,2,"div",33),e.k0s()()),2&o){const t=e.XpG().$implicit,i=e.XpG(3);e.R7$(),e.Y8G("ngClass",i.getScoreClass(t.match)),e.R7$(2),e.JRh(i.isMatchFinished(t.match)?"FINAL SCORE":"LIVE SCORE"),e.R7$(2),e.Lme("",(null==t.match.liveScore?null:t.match.liveScore.home)||0," - ",(null==t.match.liveScore?null:t.match.liveScore.away)||0,""),e.R7$(2),e.JRh(i.getMatchTime(t.match)),e.R7$(),e.Y8G("ngIf",i.isMatchFinished(t.match)&&void 0!==t.points)}}function M(o,s){if(1&o&&(e.j41(0,"ion-item")(1,"div",16)(2,"div",17)(3,"div",18),e.EFF(4),e.k0s(),e.j41(5,"div",19),e.nrm(6,"ion-icon",20),e.EFF(7),e.nI1(8,"date"),e.DNE(9,P,2,1,"ion-badge",21),e.k0s()(),e.j41(10,"div",22)(11,"div",23),e.EFF(12),e.k0s(),e.j41(13,"div",24)(14,"div",25),e.EFF(15,"PREDICTION"),e.k0s(),e.EFF(16),e.k0s(),e.j41(17,"div",26),e.EFF(18),e.k0s()(),e.DNE(19,x,9,6,"div",27),e.k0s()()),2&o){const t=s.$implicit,i=e.XpG(3);e.R7$(4),e.JRh(t.match.venue),e.R7$(3),e.SpI(" ",e.i5U(8,8,t.match.kickoff,"EEE d MMM, HH:mm")," "),e.R7$(2),e.Y8G("ngIf",i.isMatchLive(t.match)),e.R7$(3),e.JRh(t.match.homeTeam),e.R7$(4),e.Lme(" ",t.prediction.home," - ",t.prediction.away," "),e.R7$(2),e.JRh(t.match.awayTeam),e.R7$(),e.Y8G("ngIf",null==t.match.liveScore?null:t.match.liveScore.isLive)}}function w(o,s){if(1&o&&(e.j41(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),e.EFF(3),e.k0s()(),e.j41(4,"ion-card-content")(5,"ion-list"),e.DNE(6,M,20,11,"ion-item",15),e.k0s()()()),2&o){const t=e.XpG(2);e.R7$(3),e.SpI("Gameweek ",t.currentGameweek," Predictions"),e.R7$(3),e.Y8G("ngForOf",t.currentPredictions)}}function O(o,s){if(1&o&&(e.j41(0,"div"),e.DNE(1,v,4,0,"ion-card",13)(2,w,7,2,"ion-card",13),e.k0s()),2&o){const t=e.XpG();e.R7$(),e.Y8G("ngIf",0===t.currentPredictions.length),e.R7$(),e.Y8G("ngIf",t.currentPredictions.length>0)}}function C(o,s){if(1&o&&(e.j41(0,"ion-card")(1,"ion-card-content")(2,"div",14),e.EFF(3),e.k0s()()()),2&o){const t=e.XpG(2);e.R7$(3),e.SpI(" No predictions found for Gameweek ",t.selectedHistoryGameweek,". ")}}function F(o,s){if(1&o&&(e.j41(0,"ion-item")(1,"div",16)(2,"div",17)(3,"div",18),e.EFF(4),e.k0s(),e.j41(5,"div",19),e.nrm(6,"ion-icon",20),e.EFF(7),e.nI1(8,"date"),e.k0s()(),e.j41(9,"div",22)(10,"div",23),e.EFF(11),e.k0s(),e.j41(12,"div",24)(13,"div",25),e.EFF(14,"PREDICTION"),e.k0s(),e.EFF(15),e.k0s(),e.j41(16,"div",26),e.EFF(17),e.k0s()(),e.j41(18,"div",29)(19,"div",41)(20,"div",25),e.EFF(21,"FINAL SCORE"),e.k0s(),e.j41(22,"div",31),e.EFF(23),e.k0s(),e.j41(24,"div",32),e.EFF(25,"FT"),e.k0s(),e.j41(26,"div",34),e.nrm(27,"ion-icon",35),e.EFF(28),e.k0s()()()()()),2&o){const t=s.$implicit,i=e.XpG(3);e.R7$(4),e.JRh(t.match.venue),e.R7$(3),e.SpI(" ",e.i5U(8,10,t.match.kickoff,"EEE d MMM, HH:mm")," "),e.R7$(4),e.JRh(t.match.homeTeam),e.R7$(4),e.Lme(" ",t.prediction.home," - ",t.prediction.away," "),e.R7$(2),e.JRh(t.match.awayTeam),e.R7$(6),e.Lme("",(null==t.match.finalScore?null:t.match.finalScore.home)||0," - ",(null==t.match.finalScore?null:t.match.finalScore.away)||0,""),e.R7$(4),e.Y8G("name",i.getStatusIcon(t.status)),e.R7$(),e.SpI(" ",t.points," pts ")}}function y(o,s){if(1&o&&(e.j41(0,"ion-card")(1,"ion-card-content")(2,"ion-list"),e.DNE(3,F,29,13,"ion-item",15),e.k0s()()()),2&o){const t=e.XpG(2);e.R7$(3),e.Y8G("ngForOf",t.historicalPredictions)}}function E(o,s){if(1&o){const t=e.RV6();e.j41(0,"div")(1,"div",36)(2,"ion-button",37),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.navigateHistoryGameweek(1))}),e.nrm(3,"ion-icon",38),e.k0s(),e.j41(4,"div",39)(5,"h2"),e.EFF(6),e.k0s()(),e.j41(7,"ion-button",37),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.navigateHistoryGameweek(-1))}),e.nrm(8,"ion-icon",40),e.k0s()(),e.DNE(9,C,4,1,"ion-card",13)(10,y,4,1,"ion-card",13),e.k0s()}if(2&o){const t=e.XpG();e.R7$(2),e.Y8G("disabled",!t.canNavigateHistory("back")),e.R7$(4),e.SpI("Gameweek ",t.selectedHistoryGameweek,""),e.R7$(),e.Y8G("disabled",!t.canNavigateHistory("forward")),e.R7$(2),e.Y8G("ngIf",0===t.historicalPredictions.length),e.R7$(),e.Y8G("ngIf",t.historicalPredictions.length>0)}}let T=(()=>{var o;class s{constructor(i){this.router=i,this.selectedSegment="current",this.currentGameweek=15,this.currentPredictions=[],this.historicalPredictions=[],this.showNewPredictionsToast=!1,this.selectedHistoryGameweek=14,this.historicalGameweeks=[],(0,u.a)({footballOutline:d.gMr,closeCircleOutline:d.p9N,timeOutline:d.CVk,checkmarkCircleOutline:d.gz2,chevronBackOutline:d.fKZ,chevronForwardOutline:d.N05,personOutline:d.wAZ})}ionViewWillEnter(){this.loadPredictions(),this.startLiveScoreUpdates()}ionViewWillLeave(){this.liveScoreUpdateInterval&&clearInterval(this.liveScoreUpdateInterval)}loadPredictions(){const i=JSON.parse(localStorage.getItem("playerPredictions")||"[]"),n=this.currentPredictions.length;this.currentPredictions=[];const a=i.find(m=>m.gameweek===this.currentGameweek);a&&(this.currentPredictions=a.predictions),localStorage.setItem("historicalPredictions",JSON.stringify([{gameweek:14,predictions:[{id:1,gameweek:14,match:{homeTeam:"Arsenal",awayTeam:"Brighton",kickoff:"2024-01-17T19:45:00",venue:"Emirates Stadium",finalScore:{home:2,away:1}},prediction:{home:2,away:1},status:"correct"},{id:2,gameweek:14,match:{homeTeam:"Brentford",awayTeam:"Chelsea",kickoff:"2024-01-17T20:00:00",venue:"Gtech Community Stadium",finalScore:{home:0,away:2}},prediction:{home:1,away:1},status:"incorrect"},{id:3,gameweek:14,match:{homeTeam:"Manchester City",awayTeam:"Tottenham",kickoff:"2024-01-17T20:15:00",venue:"Etihad Stadium",finalScore:{home:3,away:3}},prediction:{home:2,away:1},status:"incorrect"}]}]));const p=JSON.parse(localStorage.getItem("historicalPredictions")||"[]");this.historicalGameweeks=Array.from(new Set(p.map(m=>Number(m.gameweek)))),this.historicalGameweeks.sort((m,b)=>b-m),this.historicalGameweeks.length>0&&(this.selectedHistoryGameweek=this.historicalGameweeks[0]),this.updateHistoricalPredictions(),this.currentPredictions.length>n&&n>0&&(this.showNewPredictionsToast=!0)}updateHistoricalPredictions(){const n=JSON.parse(localStorage.getItem("historicalPredictions")||"[]").find(c=>c.gameweek===this.selectedHistoryGameweek);this.historicalPredictions=(n?n.predictions:[]).map(c=>{if(c.match.finalScore){const p=c.prediction.home===c.match.finalScore.home&&c.prediction.away===c.match.finalScore.away;return{...c,points:p?3:0,status:p?"correct":"incorrect"}}return c})}navigateHistoryGameweek(i){const a=this.historicalGameweeks.indexOf(this.selectedHistoryGameweek)+i;a>=0&&a<this.historicalGameweeks.length&&(this.selectedHistoryGameweek=this.historicalGameweeks[a],this.updateHistoricalPredictions())}canNavigateHistory(i){const n=this.historicalGameweeks.indexOf(this.selectedHistoryGameweek);return"back"===i?n<this.historicalGameweeks.length-1:n>0}getStatusColor(i){switch(i){case"correct":return"success";case"incorrect":return"danger";default:return"warning"}}getStatusIcon(i){switch(i){case"correct":return"checkmark-circle-outline";case"incorrect":return"close-circle-outline";default:return"time-outline"}}startLiveScoreUpdates(){this.liveScoreUpdateInterval=setInterval(()=>{this.updateLiveScores()},6e4),this.updateLiveScores()}updateLiveScores(){const i=[{homeTeam:"Manchester United",awayTeam:"Liverpool",home:1,away:0,isLive:!0,minute:this.calculateMatchMinute("2024-01-20T15:00:00"),additionalTime:2,points:this.isMatchFinished({kickoff:"2024-01-20T15:00:00"})?3:void 0,status:this.isMatchFinished({kickoff:"2024-01-20T15:00:00"})?"correct":"pending"}];this.currentPredictions=this.currentPredictions.map(n=>{const a=i.find(c=>c.homeTeam===n.match.homeTeam&&c.awayTeam===n.match.awayTeam);return a?{...n,match:{...n.match,liveScore:{home:a.home,away:a.away,isLive:!0,minute:a.minute,additionalTime:a.additionalTime}},points:a.points,status:a.status}:n})}calculateMatchMinute(i){const n=new Date(i),c=Math.floor(((new Date).getTime()-n.getTime())/6e4);return c>=45&&c<60?45:c>=90?90:c>60?c-15:c}getMatchTime(i){var n;if(null===(n=i.liveScore)||void 0===n||!n.isLive)return"";if(this.isMatchFinished(i))return"FT";const a=i.liveScore.minute,c=i.liveScore.additionalTime;return 45===a&&c?`45+${c}'`:90===a&&c?`90+${c}'`:`${a}'`}isMatchFinished(i){const n=new Date(i.kickoff);return new Date>new Date(n.getTime()+72e5)}isMatchLive(i){const n=new Date(i.kickoff),a=new Date;return a>=n&&a<=new Date(n.getTime()+72e5)&&!this.isMatchFinished(i)}getScoreClass(i){return this.isMatchFinished(i)?"finished":"live"}navigateTo(i){this.router.navigate([i])}}return(o=s).\u0275fac=function(i){return new(i||o)(e.rXU(f.Ix))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-predictions"]],standalone:!0,features:[e.aNF],decls:21,vars:4,consts:[[1,"logo-container",3,"click"],["name","football-outline",1,"football-icon"],[1,"logo-text"],[1,"logo-sotd"],[1,"logo-subtitle"],["slot","end"],[3,"click"],["name","person-outline",1,"profile-icon"],[1,"ion-padding"],["message","New predictions loaded!","duration","2000","color","success","position","top","icon","checkmark-circle-outline",3,"isOpen"],[1,"predictions-segment",3,"ngModelChange","ngModel"],["value","current"],["value","history"],[4,"ngIf"],[1,"no-predictions"],[4,"ngFor","ngForOf"],[1,"prediction-item"],[1,"match-info"],[1,"venue-info"],[1,"match-time"],["name","time-outline"],["color","danger","class","live-badge",4,"ngIf"],[1,"teams-score"],[1,"team","home"],[1,"score","prediction"],[1,"score-label"],[1,"team","away"],["class","live-score-container",4,"ngIf"],["color","danger",1,"live-badge"],[1,"live-score-container"],[1,"score",3,"ngClass"],[1,"live-score-value"],[1,"match-minute"],["class","points-badge",4,"ngIf"],[1,"points-badge"],[3,"name"],[1,"gameweek-navigation"],["fill","clear",1,"nav-button",3,"click","disabled"],["slot","icon-only","name","chevron-back-outline"],[1,"gameweek-title"],["slot","icon-only","name","chevron-forward-outline"],[1,"score","finished"]],template:function(i,n){1&i&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"div",0),e.bIt("click",function(){return n.navigateTo("/player/dashboard")}),e.nrm(3,"ion-icon",1),e.j41(4,"div",2)(5,"span",3),e.EFF(6,"SOTD"),e.k0s(),e.j41(7,"span",4),e.EFF(8,"Predict 3"),e.k0s()()(),e.j41(9,"ion-buttons",5)(10,"ion-button",6),e.bIt("click",function(){return n.navigateTo("/player/settings")}),e.nrm(11,"ion-icon",7),e.k0s()()()(),e.j41(12,"ion-content",8),e.nrm(13,"ion-toast",9),e.j41(14,"ion-segment",10),e.mxI("ngModelChange",function(c){return e.DH7(n.selectedSegment,c)||(n.selectedSegment=c),c}),e.j41(15,"ion-segment-button",11),e.EFF(16," My Predictions "),e.k0s(),e.j41(17,"ion-segment-button",12),e.EFF(18," History "),e.k0s()(),e.DNE(19,O,3,2,"div",13)(20,E,11,5,"div",13),e.k0s()),2&i&&(e.R7$(13),e.Y8G("isOpen",n.showNewPredictionsToast),e.R7$(),e.R50("ngModel",n.selectedSegment),e.R7$(5),e.Y8G("ngIf","current"===n.selectedSegment),e.R7$(),e.Y8G("ngIf","history"===n.selectedSegment))},dependencies:[r.eU,r.ai,r.W9,r.b_,r.ME,r.tN,r.I9,r.nf,r.uz,r.In,r.iq,r.Gp,r.eP,r.Jm,r.QW,g.pM,g.bT,g.YU,g.vh,h.YN,h.BC,h.vS,r.op],styles:[".logo-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 16px;cursor:pointer}.logo-container[_ngcontent-%COMP%]   .football-icon[_ngcontent-%COMP%]{font-size:24px;color:var(--ion-color-primary)}.logo-container[_ngcontent-%COMP%]   .logo-text[_ngcontent-%COMP%]{display:flex;flex-direction:column;line-height:1}.logo-container[_ngcontent-%COMP%]   .logo-text[_ngcontent-%COMP%]   .logo-sotd[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:var(--ion-color-dark)}.logo-container[_ngcontent-%COMP%]   .logo-text[_ngcontent-%COMP%]   .logo-subtitle[_ngcontent-%COMP%]{font-size:12px;color:var(--ion-color-medium)}.stats-card[_ngcontent-%COMP%]{margin-bottom:16px}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:16px;text-align:center}.stat-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:8px}.stat-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px}.stat-item[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:var(--ion-color-dark)}.stat-item[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:14px;color:var(--ion-color-medium)}.predictions-segment[_ngcontent-%COMP%]{margin-bottom:16px;--background: var(--ion-color-light)}.gameweek-navigation[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;padding:0 8px}.nav-button[_ngcontent-%COMP%]{--padding-start: 8px;--padding-end: 8px;height:36px;--color: var(--ion-color-medium)}.nav-button[disabled][_ngcontent-%COMP%]{opacity:.5}.nav-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px}.gameweek-title[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:8px}.gameweek-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:20px;font-weight:600;color:var(--ion-color-dark)}ion-card[_ngcontent-%COMP%]{margin:0 0 16px;border-radius:12px;box-shadow:0 2px 8px #0000001a}.no-predictions[_ngcontent-%COMP%]{text-align:center;padding:32px 16px;color:var(--ion-color-medium);font-size:16px;line-height:1.5}.prediction-item[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;gap:8px;padding:8px 0}.match-info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:4px}.venue-info[_ngcontent-%COMP%]{font-size:14px;color:var(--ion-color-medium);text-align:left}.match-time[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:14px;color:var(--ion-color-medium);text-align:right}.match-time[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.teams-score[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:12px;margin:8px 0}.team[_ngcontent-%COMP%]{flex:1;font-size:16px;font-weight:500}.team.home[_ngcontent-%COMP%]{text-align:right}.team.away[_ngcontent-%COMP%]{text-align:left}.live-score-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:8px;padding:0 16px}.score[_ngcontent-%COMP%]{font-size:18px;font-weight:600;min-width:80px;text-align:center;padding:8px 16px;background-color:var(--ion-color-light);border-radius:8px}.score.prediction[_ngcontent-%COMP%]{background-color:var(--ion-color-light);margin:0}.score.live[_ngcontent-%COMP%]{background-color:rgba(var(--ion-color-danger-rgb),.08);color:var(--ion-color-danger);font-size:16px;min-width:120px;padding:8px 20px;margin:8px 0}.score.live[_ngcontent-%COMP%]   .live-score-value[_ngcontent-%COMP%]{font-size:18px;font-weight:600;margin:4px 0}.score.live[_ngcontent-%COMP%]   .match-minute[_ngcontent-%COMP%]{font-size:14px;color:var(--ion-color-danger);margin-top:2px}.score.finished[_ngcontent-%COMP%]{background-color:rgba(var(--ion-color-success-rgb),.08);color:var(--ion-color-success);font-size:16px;min-width:120px;padding:8px 20px;margin:8px 0}.score.finished[_ngcontent-%COMP%]   .live-score-value[_ngcontent-%COMP%]{font-size:18px;font-weight:600;margin:4px 0}.score.finished[_ngcontent-%COMP%]   .match-minute[_ngcontent-%COMP%]{font-size:14px;color:var(--ion-color-success);margin-top:2px}.score.finished[_ngcontent-%COMP%]   .points-badge[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:4px;margin-top:8px;padding-top:8px;border-top:1px solid rgba(var(--ion-color-success-rgb),.2);font-size:14px;font-weight:600}.score.finished[_ngcontent-%COMP%]   .points-badge[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px;margin-right:2px}.score[_ngcontent-%COMP%]   .score-label[_ngcontent-%COMP%]{font-size:10px;font-weight:500;text-transform:uppercase;letter-spacing:.5px;margin-bottom:4px;color:var(--ion-color-medium)}ion-item[_ngcontent-%COMP%]{--padding-start: 16px;--padding-end: 16px;--padding-top: 12px;--padding-bottom: 12px}ion-item[_ngcontent-%COMP%]:not(:last-child){--border-width: 0 0 1px 0;--border-color: var(--ion-color-light)}"]}),s})()}}]);