"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7],{9007:(b,_,e)=>{e.r(_),e.d(_,{LoginPage:()=>x});var a=e(4738),p=e(7570),g=e(4341),m=e(177),u=e(5079),d=e(5873),P=e(9620),n=e(4438),h=e(8010);function M(i,c){if(1&i&&(n.j41(0,"ion-note",24),n.EFF(1),n.k0s()),2&i){const s=n.XpG();n.R7$(),n.SpI(" ",s.validationErrors.email," ")}}function O(i,c){if(1&i&&(n.j41(0,"ion-note",24),n.EFF(1),n.k0s()),2&i){const s=n.XpG();n.R7$(),n.SpI(" ",s.validationErrors.password," ")}}function C(i,c){1&i&&(n.j41(0,"span"),n.EFF(1,"Login"),n.k0s())}function f(i,c){1&i&&(n.j41(0,"span"),n.EFF(1,"Logging in..."),n.k0s())}function v(i,c){if(1&i&&(n.j41(0,"div",25)(1,"ion-card",26)(2,"ion-card-content")(3,"div",27),n.nrm(4,"ion-icon",28),n.j41(5,"div",29)(6,"h3"),n.EFF(7,"Check Your Email"),n.k0s(),n.j41(8,"p"),n.EFF(9,"We've sent you a confirmation email to "),n.j41(10,"strong"),n.EFF(11),n.k0s()(),n.j41(12,"p"),n.EFF(13,"Please click the confirmation link and return here to sign in."),n.k0s()()()()()()),2&i){const s=n.XpG();n.R7$(11),n.JRh(s.userEmail)}}let x=(()=>{var i;class c{get canSubmit(){return!(!this.loginData.email||!this.loginData.password||this.validationErrors.email||this.validationErrors.password)}constructor(o,t,r){this.authService=o,this.router=t,this.route=r,this.loginData={email:"",password:"",securityQuestion:"",securityAnswer:""},this.validationErrors={email:"",password:""},this.showPassword=!1,this.isLoading=!1,this.returnUrl="",this.pendingConfirmation=!1,this.userEmail="",(0,u.a)({footballOutline:d.gMr,mailOutline:d.SM1,eye:d.y5U,eyeOff:d.zsm})}ngOnInit(){this.route.queryParams.subscribe(o=>{this.returnUrl=o.returnUrl||"",this.pendingConfirmation="true"===o.pendingConfirmation,this.userEmail=o.email||""})}validateEmail(){this.validationErrors.email=this.loginData.email?/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/.test(this.loginData.email)?"":"Please enter a valid email address":"Email is required"}validatePassword(){this.validationErrors.password=this.loginData.password?(0,P.Oj)(this.loginData.password)?"":"Please enter a valid password":"Password is required"}togglePasswordVisibility(){this.showPassword=!this.showPassword}onLogin(){this.validateEmail(),this.validatePassword(),this.canSubmit&&!this.isLoading?(this.isLoading=!0,console.log("\u{1f50d} Login: Starting login process..."),this.loginData.securityQuestion="What is your favorite color?",this.loginData.securityAnswer="blue",this.authService.login(this.loginData).subscribe({next:o=>{console.log("\u2705 Login: Success response received:",o),this.handleSuccessfulLogin()},error:o=>{var t;console.error("\u274c Login: Error occurred:",o),this.isLoading=!1;const r=(null==o||null===(t=o.error)||void 0===t?void 0:t.message)||(null==o?void 0:o.message)||"Login failed. Please check your credentials and try again.";alert(r)}})):console.log("\u26a0\ufe0f Login: Already in progress or form invalid, ignoring duplicate submission")}handleSuccessfulLogin(){this.isLoading=!1;const o=this.authService.getUserRole();this.returnUrl&&""!==this.returnUrl.trim()?this.router.navigate([this.returnUrl],{replaceUrl:!0}):this.redirectBasedOnRole(o)}redirectBasedOnRole(o){let t;if(this.authService.isFirstTimeUser())switch(o){case"group-admin":t="/group-admin/groups";break;case"player":t="/player/join-group";break;case"super-admin":t="/super-admin/dashboard";break;default:t="/welcome"}else switch(o){case"group-admin":t="/group-admin/dashboard";break;case"player":t="/player/dashboard";break;case"super-admin":t="/super-admin/dashboard";break;default:t="/welcome"}this.router.navigate([t],{replaceUrl:!0})}navigateToWelcome(){this.returnUrl="",this.router.navigate(["/welcome"],{replaceUrl:!0})}}return(i=c).\u0275fac=function(o){return new(o||i)(n.rXU(h.u),n.rXU(p.Ix),n.rXU(p.nX))},i.\u0275cmp=n.VBU({type:i,selectors:[["app-login"]],standalone:!0,features:[n.aNF],decls:41,vars:14,consts:[[1,"logo-container",3,"click"],["name","football-outline",1,"football-icon"],[1,"logo-text"],[1,"logo-sotd"],[1,"logo-subtitle"],[1,"ion-padding"],[1,"auth-card"],[1,"auth-header"],[3,"ngSubmit"],[1,"auth-form"],["placeholder","Email","name","email","required","","type","email",3,"ngModelChange","ionInput","ngModel"],["slot","error",4,"ngIf"],["placeholder","Password","name","password","required","",3,"ngModelChange","ionInput","ngModel","type"],["fill","clear","slot","end",3,"click"],[3,"name"],[1,"auth-links"],[1,"forgot-password"],["routerLink","/auth/forgot-password"],[1,"signup-link"],["routerLink","/auth/signup"],[1,"auth-actions"],["expand","block","type","submit",3,"disabled"],[4,"ngIf"],["class","email-confirmation-message",4,"ngIf"],["slot","error"],[1,"email-confirmation-message"],["color","primary"],[1,"confirmation-content"],["name","mail-outline",1,"confirmation-icon"],[1,"confirmation-text"]],template:function(o,t){1&o&&(n.j41(0,"ion-header")(1,"ion-toolbar")(2,"div",0),n.bIt("click",function(){return t.navigateToWelcome()}),n.nrm(3,"ion-icon",1),n.j41(4,"div",2)(5,"span",3),n.EFF(6,"SOTD"),n.k0s(),n.j41(7,"span",4),n.EFF(8,"Predict 3"),n.k0s()()()()(),n.j41(9,"ion-content",5)(10,"ion-card",6)(11,"ion-card-content")(12,"div",7)(13,"h1"),n.EFF(14,"Welcome Back"),n.k0s(),n.j41(15,"p"),n.EFF(16,"Sign in to continue"),n.k0s()(),n.j41(17,"form",8),n.bIt("ngSubmit",function(){return t.onLogin()}),n.j41(18,"ion-list",9)(19,"ion-item")(20,"ion-input",10),n.mxI("ngModelChange",function(l){return n.DH7(t.loginData.email,l)||(t.loginData.email=l),l}),n.bIt("ionInput",function(){return t.validateEmail()}),n.k0s(),n.DNE(21,M,2,1,"ion-note",11),n.k0s(),n.j41(22,"ion-item")(23,"ion-input",12),n.mxI("ngModelChange",function(l){return n.DH7(t.loginData.password,l)||(t.loginData.password=l),l}),n.bIt("ionInput",function(){return t.validatePassword()}),n.k0s(),n.j41(24,"ion-button",13),n.bIt("click",function(){return t.togglePasswordVisibility()}),n.nrm(25,"ion-icon",14),n.k0s(),n.DNE(26,O,2,1,"ion-note",11),n.k0s()(),n.j41(27,"div",15)(28,"div",16)(29,"a",17),n.EFF(30,"Forgot Password?"),n.k0s()(),n.j41(31,"div",18)(32,"span"),n.EFF(33,"New to SOTD? "),n.k0s(),n.j41(34,"a",19),n.EFF(35,"Create an account"),n.k0s()()(),n.j41(36,"div",20)(37,"ion-button",21),n.DNE(38,C,2,0,"span",22)(39,f,2,0,"span",22),n.k0s()(),n.DNE(40,v,14,1,"div",23),n.k0s()()()()),2&o&&(n.R7$(20),n.AVh("ion-invalid",t.validationErrors.email),n.R50("ngModel",t.loginData.email),n.R7$(),n.Y8G("ngIf",t.validationErrors.email),n.R7$(2),n.AVh("ion-invalid",t.validationErrors.password),n.R50("ngModel",t.loginData.password),n.Y8G("type",t.showPassword?"text":"password"),n.R7$(2),n.Y8G("name",t.showPassword?"eye-off":"eye"),n.R7$(),n.Y8G("ngIf",t.validationErrors.password),n.R7$(11),n.Y8G("disabled",!t.canSubmit||t.isLoading),n.R7$(),n.Y8G("ngIf",!t.isLoading),n.R7$(),n.Y8G("ngIf",t.isLoading),n.R7$(),n.Y8G("ngIf",t.pendingConfirmation&&t.userEmail))},dependencies:[a.eU,a.ai,a.W9,a.$w,a.Jm,a.iq,a.uz,a.nf,a.b_,a.I9,a.JI,p.Wk,g.YN,g.qT,g.BC,g.cb,g.YS,g.vS,g.cV,m.bT],styles:['.login-container[_ngcontent-%COMP%], .signup-container[_ngcontent-%COMP%], .forgot-password-container[_ngcontent-%COMP%], .otp-container[_ngcontent-%COMP%]{max-width:400px;margin:0 auto;padding:20px}.title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:var(--ion-color-dark);margin-bottom:8px;text-align:center}.subtitle[_ngcontent-%COMP%]{color:var(--ion-color-medium);text-align:center;margin-bottom:24px}ion-card[_ngcontent-%COMP%]{box-shadow:0 4px 12px #0000001a;border-radius:16px}ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{padding:24px}ion-item[_ngcontent-%COMP%]{--padding-start: 0;--inner-padding-end: 0;--background: transparent;--border-color: var(--ion-color-light);margin-bottom:16px}ion-button[expand=block][_ngcontent-%COMP%]{margin-top:24px;margin-bottom:24px;--border-radius: 8px;height:48px;font-weight:600}.social-signup[_ngcontent-%COMP%]{text-align:center}.social-signup[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{color:var(--ion-color-medium);position:relative;margin:24px 0}.social-signup[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]:before, .social-signup[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]:after{content:"";position:absolute;top:50%;width:25%;height:1px;background-color:var(--ion-color-light)}.social-signup[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]:before{left:0}.social-signup[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]:after{right:0}.social-buttons[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:16px;margin-bottom:24px}.social-buttons[_ngcontent-%COMP%]   .social-button[_ngcontent-%COMP%]{--padding-start: 0;--padding-end: 0;width:48px;height:48px}.social-buttons[_ngcontent-%COMP%]   .social-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px}.login-link[_ngcontent-%COMP%], .signup-link[_ngcontent-%COMP%], .forgot-password[_ngcontent-%COMP%], .resend-link[_ngcontent-%COMP%]{text-align:center;color:var(--ion-color-medium)}.login-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .signup-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .forgot-password[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .resend-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--ion-color-primary);text-decoration:none;font-weight:500;cursor:pointer}.login-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .signup-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .forgot-password[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .resend-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.forgot-password[_ngcontent-%COMP%]{text-align:right;margin-top:-8px;margin-bottom:16px}.forgot-password[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--ion-color-primary);text-decoration:none;font-weight:500;font-size:.9rem;padding:8px 0;display:inline-block}.forgot-password[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline;opacity:.8}@media (max-width: 480px){.login-container[_ngcontent-%COMP%], .signup-container[_ngcontent-%COMP%], .forgot-password-container[_ngcontent-%COMP%], .otp-container[_ngcontent-%COMP%]{padding:16px}.title[_ngcontent-%COMP%]{font-size:1.75rem}}.logo-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 16px}.auth-footer[_ngcontent-%COMP%]   .auth-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--ion-color-primary);text-decoration:none;font-weight:500;margin-left:4px}ion-toolbar[_ngcontent-%COMP%]{--padding-start: 0;--padding-end: 0}.logo-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 16px;cursor:pointer;transition:opacity .2s ease}.logo-container[_ngcontent-%COMP%]:hover{opacity:.8}.football-icon[_ngcontent-%COMP%]{font-size:24px;color:var(--ion-color-primary)}.logo-text[_ngcontent-%COMP%]{display:flex;flex-direction:column}.logo-sotd[_ngcontent-%COMP%]{font-size:18px;font-weight:600;line-height:1.2}.logo-subtitle[_ngcontent-%COMP%]{font-size:12px;color:var(--ion-color-medium);line-height:1}.auth-card[_ngcontent-%COMP%]{max-width:400px;margin:0 auto;box-shadow:none;background:transparent}.auth-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.auth-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px;font-weight:700;margin-bottom:8px;color:var(--ion-color-dark)}.auth-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--ion-color-medium);margin:0}.auth-form[_ngcontent-%COMP%]{background:#fff;border-radius:8px;margin-bottom:1rem;padding:.5rem}.auth-form[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--background: white;--border-color: transparent;--border-radius: 8px;--highlight-height: 0;--padding-start: 8px;--padding-end: 8px;--inner-padding-end: 8px;height:48px;box-shadow:0 2px 4px #0000000d;margin:0 4px 16px}.auth-form[_ngcontent-%COMP%]   ion-item.ion-invalid[_ngcontent-%COMP%]{--background: var(--ion-color-light)}.auth-form[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.auth-form[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{--padding-start: 8px;--background: transparent;--color: var(--ion-color-dark);--placeholder-color: var(--ion-color-medium)}.auth-form[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{font-size:12px;margin:4px 8px}.auth-links[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;margin-top:1rem}.auth-links[_ngcontent-%COMP%]   .forgot-password[_ngcontent-%COMP%], .auth-links[_ngcontent-%COMP%]   .signup-link[_ngcontent-%COMP%]{text-align:right}.auth-links[_ngcontent-%COMP%]   .forgot-password[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auth-links[_ngcontent-%COMP%]   .signup-link[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--ion-color-medium);font-size:14px}.auth-links[_ngcontent-%COMP%]   .forgot-password[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .auth-links[_ngcontent-%COMP%]   .signup-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--ion-color-primary);text-decoration:none;font-size:14px}.auth-links[_ngcontent-%COMP%]   .forgot-password[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .auth-links[_ngcontent-%COMP%]   .signup-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.auth-actions[_ngcontent-%COMP%]{margin:1.5rem 0}.auth-actions[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin:0}.auth-footer[_ngcontent-%COMP%]{text-align:center}.auth-footer[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;margin:2.5rem 0;text-align:center;gap:1rem}.auth-footer[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]:before, .auth-footer[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]:after{content:"";flex:1;height:1px;background:var(--ion-color-light-shade)}.auth-footer[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--ion-color-medium);white-space:nowrap}.auth-footer[_ngcontent-%COMP%]   .social-buttons[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:1rem;margin-bottom:1.5rem}.auth-footer[_ngcontent-%COMP%]   .social-buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--padding-start: 0;--padding-end: 0;width:40px;height:40px;--border-radius: 50%;--background: var(--ion-color-light)}.auth-footer[_ngcontent-%COMP%]   .social-buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}@media (max-width: 576px){.auth-card[_ngcontent-%COMP%]{box-shadow:none;background:transparent;margin:0;padding:0}ion-content[_ngcontent-%COMP%]{--padding-start: 16px;--padding-end: 16px}}.email-confirmation-message[_ngcontent-%COMP%]{margin-top:20px}.email-confirmation-message[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{margin:0;border-radius:12px;box-shadow:0 4px 12px #0000001a}.email-confirmation-message[_ngcontent-%COMP%]   .confirmation-content[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:12px}.email-confirmation-message[_ngcontent-%COMP%]   .confirmation-content[_ngcontent-%COMP%]   .confirmation-icon[_ngcontent-%COMP%]{font-size:24px;color:var(--ion-color-primary);margin-top:2px}.email-confirmation-message[_ngcontent-%COMP%]   .confirmation-content[_ngcontent-%COMP%]   .confirmation-text[_ngcontent-%COMP%]{flex:1}.email-confirmation-message[_ngcontent-%COMP%]   .confirmation-content[_ngcontent-%COMP%]   .confirmation-text[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-size:16px;font-weight:600;color:var(--ion-color-primary)}.email-confirmation-message[_ngcontent-%COMP%]   .confirmation-content[_ngcontent-%COMP%]   .confirmation-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 4px;font-size:14px;color:var(--ion-color-dark);line-height:1.4}.email-confirmation-message[_ngcontent-%COMP%]   .confirmation-content[_ngcontent-%COMP%]   .confirmation-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:last-child{margin-bottom:0}.email-confirmation-message[_ngcontent-%COMP%]   .confirmation-content[_ngcontent-%COMP%]   .confirmation-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--ion-color-primary);font-weight:600}']}),c})()}}]);