"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[76],{4982:(v,S,o)=>{o.d(S,{I:()=>l});var d=o(4412),g=o(4438),f=o(467),m=o(4843),i=o(1529);let c=(()=>{var r;class s{constructor(e){this.seasonService=e}calculatePoints(e){var t;let a=0,n=0;return e.forEach(u=>{const w=this.calculateBasePoints(u.prediction,u.actual);this.isCorrectScore(u.prediction,u.actual)&&(a+=3,n++),a+=w}),3===n&&(a+=10),null!==(t=e[0])&&void 0!==t&&t.isJokerRound&&(a*=2),a}calculateBasePoints(e,t){const a=this.getMatchResult(e),n=this.getMatchResult(t);if(a!==n)return 0;switch(n){case"HOME_WIN":return 3;case"AWAY_WIN":return 4;case"DRAW":return 6;default:return 0}}getMatchResult(e){return e.homeScore>e.awayScore?"HOME_WIN":e.homeScore<e.awayScore?"AWAY_WIN":"DRAW"}isCorrectScore(e,t){return e.homeScore===t.homeScore&&e.awayScore===t.awayScore}isBoxingDay(e){return 11===e.getMonth()&&26===e.getDate()}isFinalDay(e){var t=this;return(0,f.A)(function*(){const a=yield(0,m._)(t.seasonService.getSeasonInfo());return e.toDateString()===new Date(a.seasonEndDate).toDateString()})()}shouldForceJokerUse(e,t){var a=this;return(0,f.A)(function*(){if(t>=2)return!1;const n=e<new Date("2023-12-26"),u=e>new Date("2023-12-26"),w=yield a.isFinalDay(e);return!!(0===t&&!n||1===t&&u&&!w)})()}}return(r=s).\u0275fac=function(e){return new(e||r)(g.KVO(i.z))},r.\u0275prov=g.jDH({token:r,factory:r.\u0275fac,providedIn:"root"}),s})(),l=(()=>{var r;class s{constructor(e){this.scoringService=e,this.STORAGE_KEYS={PLAYER_PREDICTIONS:"playerPredictions",HISTORICAL_PREDICTIONS:"historicalPredictions",HISTORICAL_MATCHES:"historicalMatches",GROUP_ADMIN_PREDICTIONS:"groupAdminPredictions"},this.currentGameweek=15,this.currentSeason="2023-24",this.predictionsSubject=new d.t([]),this.gameweeksSubject=new d.t([]),this.initializeMockData()}getCurrentGameweek(){return this.currentGameweek}getMatchesForGameweek(e){const t=this.getGameweekData(e);return t?t.matches:[]}getCurrentGameweekData(){return this.getGameweekData(this.currentGameweek)||this.createEmptyGameweek(this.currentGameweek)}getAvailableHistoricalGameweeks(){const t=this.getStoredData(this.STORAGE_KEYS.HISTORICAL_PREDICTIONS).map(a=>Number(a.gameweek));return Array.from(new Set(t)).sort((a,n)=>n-a)}getPlayerPredictions(e){const t=e||this.currentGameweek,n=this.getStoredData(this.STORAGE_KEYS.PLAYER_PREDICTIONS).find(u=>u.gameweek===t);return n?n.predictions:[]}savePredictions(e){if(0===e.length)return;const t=e[0].gameweek,n=this.getStoredData(this.STORAGE_KEYS.PLAYER_PREDICTIONS).filter(u=>u.gameweek!==t);n.push({gameweek:t,predictions:e,submittedAt:(new Date).toISOString()}),this.setStoredData(this.STORAGE_KEYS.PLAYER_PREDICTIONS,n),this.predictionsSubject.next(e)}getHistoricalPredictions(e){const a=this.getStoredData(this.STORAGE_KEYS.HISTORICAL_PREDICTIONS).find(n=>n.gameweek===e);return a?a.predictions.map(n=>{if(n.match.finalScore){const u=n.prediction.home===n.match.finalScore.home&&n.prediction.away===n.match.finalScore.away;return{...n,points:this.scoringService.calculatePoints([{prediction:n.prediction,actual:n.match.finalScore,isJokerRound:!1}]),status:u?"correct":"incorrect"}}return n}):[]}getGroupAdminPredictions(e){return this.generateSampleGroupPredictions(e)}updateLiveScores(){const t=this.getPlayerPredictions().map(a=>(this.isMatchLive(a.match)&&(a.match.liveScore=this.generateMockLiveScore(a.match)),a));t.length>0&&this.savePredictions(t)}isMatchLive(e){const t=new Date(e.kickoff),a=new Date;return a>=t&&a<=new Date(t.getTime()+72e5)}isMatchFinished(e){const t=new Date(e.kickoff);return new Date>new Date(t.getTime()+72e5)}getMatchTime(e){var t;if(null===(t=e.liveScore)||void 0===t||!t.isLive)return"";if(this.isMatchFinished(e))return"FT";const a=e.liveScore.minute,n=e.liveScore.additionalTime;return 45===a&&n?`45+${n}'`:90===a&&n?`90+${n}'`:`${a}'`}initializeMockData(){this.hasStoredData(this.STORAGE_KEYS.HISTORICAL_PREDICTIONS)||this.setStoredData(this.STORAGE_KEYS.HISTORICAL_PREDICTIONS,this.generateHistoricalPredictions())}getGameweekData(e){return this.generateGameweeks().find(a=>a.number===e)||null}createEmptyGameweek(e){return{number:e,isSpecial:!1,status:"active",deadline:new Date(Date.now()+864e5),matches:[]}}generateGameweeks(){return[{number:15,isSpecial:!1,status:"active",deadline:new Date("2024-01-20T11:30:00"),matches:this.generateMatchesForGameweek(15)},{number:16,isSpecial:!0,specialType:"christmas",status:"pending",deadline:new Date("2024-01-27T11:30:00"),matches:this.generateMatchesForGameweek(16)},{number:14,isSpecial:!1,status:"completed",deadline:new Date("2024-01-13T11:30:00"),matches:this.generateMatchesForGameweek(14)}]}generateMatchesForGameweek(e){this.getPremierLeagueTeams();const a=this.getPremierLeagueVenues();return this.getFixturesForGameweek(e).map((u,w)=>({id:100*e+w+1,gameweek:e,homeTeam:u.home,awayTeam:u.away,venue:a[u.home]||"Stadium",kickoff:this.getKickoffTime(e,w),homeScore:null,awayScore:null,status:"scheduled"}))}getPremierLeagueTeams(){return["Arsenal","Aston Villa","Brighton","Burnley","Chelsea","Crystal Palace","Everton","Fulham","Liverpool","Luton Town","Manchester City","Manchester United","Newcastle","Nottingham Forest","Sheffield United","Tottenham","West Ham","Wolves","Bournemouth","Brentford"]}getPremierLeagueVenues(){return{Arsenal:"Emirates Stadium","Aston Villa":"Villa Park",Brighton:"Amex Stadium",Burnley:"Turf Moor",Chelsea:"Stamford Bridge","Crystal Palace":"Selhurst Park",Everton:"Goodison Park",Fulham:"Craven Cottage",Liverpool:"Anfield","Luton Town":"Kenilworth Road","Manchester City":"Etihad Stadium","Manchester United":"Old Trafford",Newcastle:"St. James Park","Nottingham Forest":"City Ground","Sheffield United":"Bramall Lane",Tottenham:"Tottenham Hotspur Stadium","West Ham":"London Stadium",Wolves:"Molineux",Bournemouth:"Vitality Stadium",Brentford:"Gtech Community Stadium"}}getFixturesForGameweek(e){return[{home:"Manchester United",away:"Liverpool"},{home:"Arsenal",away:"Chelsea"},{home:"Manchester City",away:"Tottenham"},{home:"Newcastle",away:"Aston Villa"},{home:"Brighton",away:"Crystal Palace"},{home:"Brentford",away:"Nottingham Forest"},{home:"Sheffield United",away:"West Ham"},{home:"Bournemouth",away:"Luton Town"},{home:"Wolves",away:"Everton"},{home:"Burnley",away:"Fulham"}]}getKickoffTime(e,t){const n=new Date(new Date("2024-01-20T15:00:00").getTime()+7*(e-15)*24*60*60*1e3),u=["15:00","17:30","20:00"],w=t%u.length,[D,p]=u[w].split(":");return n.setHours(parseInt(D),parseInt(p)),n.toISOString()}generateMockLiveScore(e){return{home:Math.floor(4*Math.random()),away:Math.floor(4*Math.random()),isLive:!0,minute:45+Math.floor(45*Math.random()),additionalTime:Math.random()>.7?Math.floor(5*Math.random())+1:void 0}}generateHistoricalPredictions(){return[{gameweek:14,predictions:[{id:1,gameweek:14,match:{homeTeam:"Arsenal",awayTeam:"Brighton",kickoff:"2024-01-17T19:45:00",venue:"Emirates Stadium",finalScore:{home:2,away:1}},prediction:{home:2,away:1},status:"correct"},{id:2,gameweek:14,match:{homeTeam:"Brentford",awayTeam:"Chelsea",kickoff:"2024-01-17T20:00:00",venue:"Gtech Community Stadium",finalScore:{home:0,away:2}},prediction:{home:1,away:1},status:"incorrect"}]}]}generateSampleGroupPredictions(e){return[{playerName:"John Smith",avatar:"assets/avatars/john.jpg",totalPoints:156,jokerUsed:!0,predictions:[{id:1,gameweek:e,homeTeam:"Manchester United",awayTeam:"Liverpool",homeScore:2,awayScore:1,venue:"Old Trafford",kickoff:"2024-01-20T15:00:00",points:9,isCorrectScore:!0,isCorrectResult:!0,status:"finished"}]}]}getStoredData(e){const t=localStorage.getItem(e);return t?JSON.parse(t):[]}setStoredData(e,t){localStorage.setItem(e,JSON.stringify(t))}hasStoredData(e){return null!==localStorage.getItem(e)}}return(r=s).\u0275fac=function(e){return new(e||r)(g.KVO(c))},r.\u0275prov=g.jDH({token:r,factory:r.\u0275fac,providedIn:"root"}),s})()},1529:(v,S,o)=>{o.d(S,{z:()=>f});var d=o(4412),g=o(4438);let f=(()=>{var m;class i{constructor(){this.seasonInfo=new d.t({currentGameweek:0,totalGameweeks:38,seasonStartDate:new Date("2024-08-10"),seasonEndDate:new Date("2025-05-19"),isSeasonStarted:!1,isSeasonEnded:!1}),this.updateSeasonStatus(),setInterval(()=>this.updateSeasonStatus(),36e5)}updateSeasonStatus(){const l=new Date,r=this.seasonInfo.value,s=l>=r.seasonStartDate,h=l>=r.seasonEndDate;let e=0;if(s&&!h){const t=(r.seasonEndDate.getTime()-r.seasonStartDate.getTime())/864e5,a=(l.getTime()-r.seasonStartDate.getTime())/864e5;e=Math.floor(a/t*r.totalGameweeks)+1}else h&&(e=r.totalGameweeks);this.seasonInfo.next({...r,currentGameweek:e,isSeasonStarted:s,isSeasonEnded:h})}getSeasonInfo(){return this.seasonInfo.asObservable()}getCurrentGameweek(){return this.seasonInfo.value.currentGameweek}isSeasonStarted(){return this.seasonInfo.value.isSeasonStarted}isSeasonEnded(){return this.seasonInfo.value.isSeasonEnded}}return(m=i).\u0275fac=function(l){return new(l||m)},m.\u0275prov=g.jDH({token:m,factory:m.\u0275fac,providedIn:"root"}),i})()},9620:(v,S,o)=>{function m(c){return c.length>=8&&/[A-Z]/.test(c)&&/\d/.test(c)&&/[@$!%*?&]/.test(c)}function i(c){const l=[];return c.length<8&&l.push("Password must be at least 8 characters long"),/[A-Z]/.test(c)||l.push("Password must contain at least one uppercase letter"),/\d/.test(c)||l.push("Password must contain at least one number"),/[@$!%*?&]/.test(c)||l.push("Password must contain at least one special character (@$!%*?&)"),l}o.d(S,{HJ:()=>i,Oj:()=>m})},5341:(v,S,o)=>{o.d(S,{E:()=>r});var d=o(4738),g=o(177),f=o(5079),m=o(5873),i=o(4438),c=o(8010);function l(s,h){if(1&s&&(i.j41(0,"div",1)(1,"div",2),i.nrm(2,"ion-icon",3),i.j41(3,"ion-text",4),i.EFF(4),i.k0s()()()),2&s){const e=i.XpG();i.R7$(4),i.JRh(e.greeting)}}let r=(()=>{var s;class h{constructor(t){this.authService=t,this.greeting="",(0,f.a)({personCircleOutline:m.kki})}ngOnInit(){this.greeting=this.authService.getPersonalizedGreeting()}}return(s=h).\u0275fac=function(t){return new(t||s)(i.rXU(c.u))},s.\u0275cmp=i.VBU({type:s,selectors:[["app-user-greeting"]],standalone:!0,features:[i.aNF],decls:1,vars:1,consts:[["class","greeting-container",4,"ngIf"],[1,"greeting-container"],[1,"greeting-content"],["name","person-circle-outline",1,"greeting-icon"],[1,"greeting-text"]],template:function(t,a){1&t&&i.DNE(0,l,5,1,"div",0),2&t&&i.Y8G("ngIf",a.greeting)},dependencies:[d.IO,d.iq,g.bT],styles:[".greeting-container[_ngcontent-%COMP%]{padding:12px 16px;background:linear-gradient(135deg,var(--ion-color-primary-tint) 0%,var(--ion-color-primary) 100%);border-radius:12px;margin-bottom:16px;box-shadow:0 2px 8px #0000001a;animation:_ngcontent-%COMP%_slideInFade .6s ease-out}.greeting-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.greeting-icon[_ngcontent-%COMP%]{font-size:24px;color:#fff;opacity:.9}.greeting-text[_ngcontent-%COMP%]{color:#fff;font-size:16px;font-weight:500;letter-spacing:.5px}@keyframes _ngcontent-%COMP%_slideInFade{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 576px){.greeting-container[_ngcontent-%COMP%]{padding:10px 14px;margin-bottom:12px}.greeting-text[_ngcontent-%COMP%]{font-size:15px}.greeting-icon[_ngcontent-%COMP%]{font-size:22px}}@media (prefers-color-scheme: dark){.greeting-container[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--ion-color-primary-shade) 0%,var(--ion-color-primary-tint) 100%)}}"]}),h})()},4843:(v,S,o)=>{o.d(S,{_:()=>f});var d=o(9350),g=o(7707);function f(m,i){const c="object"==typeof i;return new Promise((l,r)=>{const s=new g.Ms({next:h=>{l(h),s.unsubscribe()},error:r,complete:()=>{c?l(i.defaultValue):r(new d.G)}});m.subscribe(s)})}}}]);