"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[76],{9699:(G,f,s)=>{s.d(f,{B:()=>l});var h=s(4412),g=s(7673),p=s(4438),m=s(8010);let l=(()=>{var u;class d{constructor(r){this.authService=r,this.STORAGE_KEY_PREFIX="sotd_groups",this.USER_GROUPS_KEY_PREFIX="sotd_user_groups",this.LEGACY_STORAGE_KEY="sotd_groups",this.GLOBAL_GROUPS_KEY="sotd_all_groups",this.groupsSubject=new h.t([]),this.groups$=this.groupsSubject.asObservable(),this.initializeGlobalStorage(),this.authService.currentUser.subscribe(a=>{this.handleUserChange((null==a?void 0:a.user)||null)})}handleUserChange(r){r?this.loadGroups():this.groupsSubject.next([])}reinitializeForCurrentUser(){this.initializeGlobalStorage(),this.loadGroups()}initializeGlobalStorage(){const r=localStorage.getItem(this.GLOBAL_GROUPS_KEY),a=localStorage.getItem(this.LEGACY_STORAGE_KEY);if(!r&&a)try{const e=JSON.parse(a);localStorage.setItem(this.GLOBAL_GROUPS_KEY,JSON.stringify(e))}catch(e){console.error("\u274c GroupService: Error migrating legacy data:",e),localStorage.setItem(this.GLOBAL_GROUPS_KEY,JSON.stringify([]))}else r||localStorage.setItem(this.GLOBAL_GROUPS_KEY,JSON.stringify([]))}getUserSpecificStorageKey(){const r=this.authService.getCurrentUser();return null!=r&&r.id?`${this.STORAGE_KEY_PREFIX}_${r.id}`:this.LEGACY_STORAGE_KEY}clearUserGroupData(){const r=this.authService.getCurrentUser();null!=r&&r.id&&this.groupsSubject.next([])}loadGroups(){const r=this.getAllGroups();this.groupsSubject.next(r)}getAllGroups(){const r=localStorage.getItem(this.GLOBAL_GROUPS_KEY);if(!r)return[];try{return JSON.parse(r).map(e=>({...e,createdAt:new Date(e.createdAt),members:e.members.map(t=>({...t,joinedAt:new Date(t.joinedAt)}))}))}catch(a){return console.error("\u274c GroupService: Error parsing group data:",a),[]}}getUserGroups(){const r=this.authService.getCurrentUser();return null!=r&&r.email?this.getAllGroups().filter(t=>t.members.some(o=>o.email===r.email)):[]}getAdminGroups(){const r=this.authService.getCurrentUser();return null!=r&&r.email?this.getAllGroups().filter(t=>t.members.some(o=>o.email===r.email&&"admin"===o.role)):[]}saveGroup(r){const a=this.authService.getCurrentUser();if(null==a||!a.id)throw console.error("\u274c GroupService: Cannot save group - no authenticated user"),new Error("User not authenticated");const e=this.getAllGroups(),t=e.findIndex(o=>o.id===r.id);t>=0?e[t]=r:e.push(r),localStorage.setItem(this.GLOBAL_GROUPS_KEY,JSON.stringify(e)),this.loadGroups()}findGroupByCode(r){return this.getAllGroups().find(t=>t.code===r)||null}joinGroup(r,a){const e=this.authService.getCurrentUser();if(!e)throw new Error("User not authenticated");const t=this.getAllGroups(),o=t.findIndex(v=>v.code===r);if(-1===o)return null;const n=t[o];n.members.forEach((v,w)=>{});const c=n.members.find(v=>v.id===e.id),S=n.members.find(v=>v.email===e.email),_=c||S;if(_){if("admin"===_.role)throw new Error("You are the admin of this group and cannot join as a player");if("player"===_.role)throw new Error("You are already a member of this group")}return n.members.push(a||{id:e.id,name:e.firstName&&e.lastName?`${e.firstName} ${e.lastName}`:e.username,email:e.email||"",joinedAt:new Date,status:"active",role:"player"}),n.memberCount=n.members.length,n.leaderboard=[],t[o]=n,localStorage.setItem(this.GLOBAL_GROUPS_KEY,JSON.stringify(t)),this.loadGroups(),n}deleteGroup(r){const a=this.getAllGroups().filter(e=>e.id!==r);localStorage.setItem(this.GLOBAL_GROUPS_KEY,JSON.stringify(a)),this.loadGroups()}createGroup(r){const a=this.authService.getCurrentUser();if(!a)throw new Error("User not authenticated");const e={id:a.id,name:a.firstName&&a.lastName?`${a.firstName} ${a.lastName}`:a.username,email:a.email||"",joinedAt:new Date,status:"active",role:"admin"},t={id:crypto.randomUUID(),name:r.name,code:this.generateGroupCode(),memberCount:1,createdAt:new Date,members:[e],settings:{allowPlayerInvites:!0,autoApproveJoins:!1,showLeaderboard:!0,allowMemberChat:!0},type:r.entryFee>0?"prize":"casual",entryFee:r.entryFee,paidMembers:0,totalPrizePool:0,adminName:e.name,leaderboard:[]};return this.saveGroup(t),this.getAllGroups(),(0,g.of)(t)}getGroupLeaderboard(r){const a=this.getAllGroups().find(e=>e.id===r);if(!a)return[];if(0===a.leaderboard.length){const e=this.generateMockLeaderboard(a);return a.leaderboard=e,this.saveGroup(a),e}return a.leaderboard}generateMockLeaderboard(r){const a=this.authService.getCurrentUser(),e=180+Math.floor(40*Math.random()),t=Math.floor(30*Math.random())+10;return r.members.map((o,n)=>{const c=Math.floor(Math.random()*t)-t/2,S=Math.max(0,e-15*n+c);return{position:n+1,memberId:o.id,memberName:o.id===(null==a?void 0:a.id)?"You":o.name,name:o.id===(null==a?void 0:a.id)?"You":o.name,played:Math.floor(8*Math.random())+12,points:S,totalPoints:S,jokerUsed:Math.floor(3*Math.random())+1,rank:n+1,trend:0===n?"same":Math.random()>.7?"up":Math.random()>.5?"down":"same"}}).sort((o,n)=>n.points-o.points).map((o,n)=>({...o,position:n+1,rank:n+1}))}convertToStandings(r){return r.map(a=>({position:a.position,previousPosition:a.position,userId:a.memberId,name:a.name,played:a.played,points:a.points,correctScores:Math.floor(.12*a.points)+Math.floor(3*Math.random()),correctResults:Math.floor(.25*a.points)+Math.floor(2*Math.random()),jokerUsed:a.jokerUsed}))}getUserGroupsWithStandings(){const r=this.getUserGroups(),a=this.authService.getCurrentUser();return r.map(e=>{const t=this.getGroupLeaderboard(e.id),o=this.convertToStandings(t),n=a?o.findIndex(c=>c.userId===a.id)+1:null;return{group:{id:e.id,name:e.name,code:e.code,memberCount:e.memberCount,type:e.type},leaderboard:o,userPosition:n||null}})}getGroupWithStandings(r){const a=this.getAllGroups().find(c=>c.id===r);if(!a)return null;const e=this.getGroupLeaderboard(r),t=this.convertToStandings(e),o=this.authService.getCurrentUser(),n=o?t.findIndex(c=>c.userId===o.id)+1:null;return{group:{id:a.id,name:a.name,code:a.code,memberCount:a.memberCount,type:a.type},leaderboard:t,userPosition:n||null}}getUserGroupsWithLeaderboards(){const r=this.getUserGroups(),a=this.authService.getCurrentUser();return r.map(e=>{const t=this.getGroupLeaderboard(e.id),o=a?t.findIndex(n=>n.memberId===a.id)+1:null;return{group:e,leaderboard:t,userPosition:o||null}})}getAdminGroupsWithLeaderboards(){const r=this.getAdminGroups(),a=this.authService.getCurrentUser();return r.map(e=>{const t=this.getGroupLeaderboard(e.id),o=a?t.findIndex(n=>n.memberId===a.id)+1:null;return{group:e,leaderboard:t,adminPosition:o||null}})}generateGroupCode(){let a="";for(let t=0;t<6;t++)a+="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".charAt(Math.floor(36*Math.random()));return this.getAllGroups().map(t=>t.code).includes(a)?this.generateGroupCode():a}createTestGroup(){const r={id:crypto.randomUUID(),name:"Test Football Group",code:"TEST01",memberCount:2,createdAt:new Date,members:[{id:"admin-1",name:"John Admin",email:"admin@test.com",joinedAt:new Date,status:"active",role:"admin"},{id:"player-1",name:"Sarah Player",email:"player@test.com",joinedAt:new Date,status:"active",role:"player"}],settings:{allowPlayerInvites:!0,autoApproveJoins:!0,showLeaderboard:!0,allowMemberChat:!0},type:"casual",entryFee:0,paidMembers:0,totalPrizePool:0,adminName:"John Admin",leaderboard:[]};return this.saveGroup(r),r}createJoinableTestGroup(){const r={id:crypto.randomUUID(),name:"Joinable Test Group",code:"JOIN01",memberCount:1,createdAt:new Date,members:[{id:"different-admin-id",name:"Test Admin",email:"testadmin@example.com",joinedAt:new Date,status:"active",role:"admin"}],settings:{allowPlayerInvites:!0,autoApproveJoins:!0,showLeaderboard:!0,allowMemberChat:!0},type:"casual",entryFee:0,paidMembers:0,totalPrizePool:0,adminName:"Test Admin",leaderboard:[]};return this.saveGroup(r),r}debugStorageState(){const r=this.authService.getCurrentUser();localStorage.getItem(this.GLOBAL_GROUPS_KEY),localStorage.getItem(this.LEGACY_STORAGE_KEY),Object.keys(localStorage).filter(o=>o.startsWith("sotd_")),r&&(this.getUserGroups(),this.getAdminGroups())}}return(u=d).\u0275fac=function(r){return new(r||u)(p.KVO(m.u))},u.\u0275prov=p.jDH({token:u,factory:u.\u0275fac,providedIn:"root"}),d})()},4982:(G,f,s)=>{s.d(f,{I:()=>d});var h=s(4412),g=s(4438),p=s(467),m=s(4843),l=s(1529);let u=(()=>{var i;class r{constructor(e){this.seasonService=e}calculatePoints(e){var t;let o=0,n=0;return e.forEach(c=>{const S=this.calculateBasePoints(c.prediction,c.actual);this.isCorrectScore(c.prediction,c.actual)&&(o+=3,n++),o+=S}),3===n&&(o+=10),null!==(t=e[0])&&void 0!==t&&t.isJokerRound&&(o*=2),o}calculateBasePoints(e,t){const o=this.getMatchResult(e),n=this.getMatchResult(t);if(o!==n)return 0;switch(n){case"HOME_WIN":return 3;case"AWAY_WIN":return 4;case"DRAW":return 6;default:return 0}}getMatchResult(e){return e.homeScore>e.awayScore?"HOME_WIN":e.homeScore<e.awayScore?"AWAY_WIN":"DRAW"}isCorrectScore(e,t){return e.homeScore===t.homeScore&&e.awayScore===t.awayScore}isBoxingDay(e){return 11===e.getMonth()&&26===e.getDate()}isFinalDay(e){var t=this;return(0,p.A)(function*(){const o=yield(0,m._)(t.seasonService.getSeasonInfo());return e.toDateString()===new Date(o.seasonEndDate).toDateString()})()}shouldForceJokerUse(e,t){var o=this;return(0,p.A)(function*(){if(t>=2)return!1;const n=e<new Date("2023-12-26"),c=e>new Date("2023-12-26"),S=yield o.isFinalDay(e);return!!(0===t&&!n||1===t&&c&&!S)})()}}return(i=r).\u0275fac=function(e){return new(e||i)(g.KVO(l.z))},i.\u0275prov=g.jDH({token:i,factory:i.\u0275fac,providedIn:"root"}),r})(),d=(()=>{var i;class r{constructor(e){this.scoringService=e,this.STORAGE_KEYS={PLAYER_PREDICTIONS:"playerPredictions",HISTORICAL_PREDICTIONS:"historicalPredictions",HISTORICAL_MATCHES:"historicalMatches",GROUP_ADMIN_PREDICTIONS:"groupAdminPredictions"},this.currentGameweek=15,this.currentSeason="2023-24",this.predictionsSubject=new h.t([]),this.gameweeksSubject=new h.t([]),this.initializeMockData()}getCurrentGameweek(){return this.currentGameweek}getMatchesForGameweek(e){const t=this.getGameweekData(e);return t?t.matches:[]}getCurrentGameweekData(){return this.getGameweekData(this.currentGameweek)||this.createEmptyGameweek(this.currentGameweek)}getAvailableHistoricalGameweeks(){const t=this.getStoredData(this.STORAGE_KEYS.HISTORICAL_PREDICTIONS).map(o=>Number(o.gameweek));return Array.from(new Set(t)).sort((o,n)=>n-o)}getPlayerPredictions(e){const t=e||this.currentGameweek,n=this.getStoredData(this.STORAGE_KEYS.PLAYER_PREDICTIONS).find(c=>c.gameweek===t);return n?n.predictions:[]}savePredictions(e){if(0===e.length)return;const t=e[0].gameweek,n=this.getStoredData(this.STORAGE_KEYS.PLAYER_PREDICTIONS).filter(c=>c.gameweek!==t);n.push({gameweek:t,predictions:e,submittedAt:(new Date).toISOString()}),this.setStoredData(this.STORAGE_KEYS.PLAYER_PREDICTIONS,n),this.predictionsSubject.next(e)}getHistoricalPredictions(e){const o=this.getStoredData(this.STORAGE_KEYS.HISTORICAL_PREDICTIONS).find(n=>n.gameweek===e);return o?o.predictions.map(n=>{if(n.match.finalScore){const c=n.prediction.home===n.match.finalScore.home&&n.prediction.away===n.match.finalScore.away;return{...n,points:this.scoringService.calculatePoints([{prediction:n.prediction,actual:n.match.finalScore,isJokerRound:!1}]),status:c?"correct":"incorrect"}}return n}):[]}getGroupAdminPredictions(e){return this.generateSampleGroupPredictions(e)}updateLiveScores(){const t=this.getPlayerPredictions().map(o=>(this.isMatchLive(o.match)&&(o.match.liveScore=this.generateMockLiveScore(o.match)),o));t.length>0&&this.savePredictions(t)}isMatchLive(e){const t=new Date(e.kickoff),o=new Date;return o>=t&&o<=new Date(t.getTime()+72e5)}isMatchFinished(e){const t=new Date(e.kickoff);return new Date>new Date(t.getTime()+72e5)}getMatchTime(e){var t;if(null===(t=e.liveScore)||void 0===t||!t.isLive)return"";if(this.isMatchFinished(e))return"FT";const o=e.liveScore.minute,n=e.liveScore.additionalTime;return 45===o&&n?`45+${n}'`:90===o&&n?`90+${n}'`:`${o}'`}initializeMockData(){this.hasStoredData(this.STORAGE_KEYS.HISTORICAL_PREDICTIONS)||this.setStoredData(this.STORAGE_KEYS.HISTORICAL_PREDICTIONS,this.generateHistoricalPredictions())}getGameweekData(e){return this.generateGameweeks().find(o=>o.number===e)||null}createEmptyGameweek(e){return{number:e,isSpecial:!1,status:"active",deadline:new Date(Date.now()+864e5),matches:[]}}generateGameweeks(){return[{number:15,isSpecial:!1,status:"active",deadline:new Date("2024-01-20T11:30:00"),matches:this.generateMatchesForGameweek(15)},{number:16,isSpecial:!0,specialType:"christmas",status:"pending",deadline:new Date("2024-01-27T11:30:00"),matches:this.generateMatchesForGameweek(16)},{number:14,isSpecial:!1,status:"completed",deadline:new Date("2024-01-13T11:30:00"),matches:this.generateMatchesForGameweek(14)}]}generateMatchesForGameweek(e){this.getPremierLeagueTeams();const o=this.getPremierLeagueVenues();return this.getFixturesForGameweek(e).map((c,S)=>({id:100*e+S+1,gameweek:e,homeTeam:c.home,awayTeam:c.away,venue:o[c.home]||"Stadium",kickoff:this.getKickoffTime(e,S),homeScore:null,awayScore:null,status:"scheduled"}))}getPremierLeagueTeams(){return["Arsenal","Aston Villa","Brighton","Burnley","Chelsea","Crystal Palace","Everton","Fulham","Liverpool","Luton Town","Manchester City","Manchester United","Newcastle","Nottingham Forest","Sheffield United","Tottenham","West Ham","Wolves","Bournemouth","Brentford"]}getPremierLeagueVenues(){return{Arsenal:"Emirates Stadium","Aston Villa":"Villa Park",Brighton:"Amex Stadium",Burnley:"Turf Moor",Chelsea:"Stamford Bridge","Crystal Palace":"Selhurst Park",Everton:"Goodison Park",Fulham:"Craven Cottage",Liverpool:"Anfield","Luton Town":"Kenilworth Road","Manchester City":"Etihad Stadium","Manchester United":"Old Trafford",Newcastle:"St. James Park","Nottingham Forest":"City Ground","Sheffield United":"Bramall Lane",Tottenham:"Tottenham Hotspur Stadium","West Ham":"London Stadium",Wolves:"Molineux",Bournemouth:"Vitality Stadium",Brentford:"Gtech Community Stadium"}}getFixturesForGameweek(e){return[{home:"Manchester United",away:"Liverpool"},{home:"Arsenal",away:"Chelsea"},{home:"Manchester City",away:"Tottenham"},{home:"Newcastle",away:"Aston Villa"},{home:"Brighton",away:"Crystal Palace"},{home:"Brentford",away:"Nottingham Forest"},{home:"Sheffield United",away:"West Ham"},{home:"Bournemouth",away:"Luton Town"},{home:"Wolves",away:"Everton"},{home:"Burnley",away:"Fulham"}]}getKickoffTime(e,t){const n=new Date(new Date("2024-01-20T15:00:00").getTime()+7*(e-15)*24*60*60*1e3),c=["15:00","17:30","20:00"],S=t%c.length,[_,E]=c[S].split(":");return n.setHours(parseInt(_),parseInt(E)),n.toISOString()}generateMockLiveScore(e){return{home:Math.floor(4*Math.random()),away:Math.floor(4*Math.random()),isLive:!0,minute:45+Math.floor(45*Math.random()),additionalTime:Math.random()>.7?Math.floor(5*Math.random())+1:void 0}}generateHistoricalPredictions(){return[{gameweek:14,predictions:[{id:1,gameweek:14,match:{homeTeam:"Arsenal",awayTeam:"Brighton",kickoff:"2024-01-17T19:45:00",venue:"Emirates Stadium",finalScore:{home:2,away:1}},prediction:{home:2,away:1},status:"correct"},{id:2,gameweek:14,match:{homeTeam:"Brentford",awayTeam:"Chelsea",kickoff:"2024-01-17T20:00:00",venue:"Gtech Community Stadium",finalScore:{home:0,away:2}},prediction:{home:1,away:1},status:"incorrect"}]}]}generateSampleGroupPredictions(e){return[{playerName:"John Smith",avatar:"assets/avatars/john.jpg",totalPoints:156,jokerUsed:!0,predictions:[{id:1,gameweek:e,homeTeam:"Manchester United",awayTeam:"Liverpool",homeScore:2,awayScore:1,venue:"Old Trafford",kickoff:"2024-01-20T15:00:00",points:9,isCorrectScore:!0,isCorrectResult:!0,status:"finished"}]}]}getStoredData(e){const t=localStorage.getItem(e);return t?JSON.parse(t):[]}setStoredData(e,t){localStorage.setItem(e,JSON.stringify(t))}hasStoredData(e){return null!==localStorage.getItem(e)}}return(i=r).\u0275fac=function(e){return new(e||i)(g.KVO(u))},i.\u0275prov=g.jDH({token:i,factory:i.\u0275fac,providedIn:"root"}),r})()},1529:(G,f,s)=>{s.d(f,{z:()=>p});var h=s(4412),g=s(4438);let p=(()=>{var m;class l{constructor(){this.seasonInfo=new h.t({currentGameweek:0,totalGameweeks:38,seasonStartDate:new Date("2024-08-10"),seasonEndDate:new Date("2025-05-19"),isSeasonStarted:!1,isSeasonEnded:!1}),this.updateSeasonStatus(),setInterval(()=>this.updateSeasonStatus(),36e5)}updateSeasonStatus(){const d=new Date,i=this.seasonInfo.value,r=d>=i.seasonStartDate,a=d>=i.seasonEndDate;let e=0;if(r&&!a){const t=(i.seasonEndDate.getTime()-i.seasonStartDate.getTime())/864e5,o=(d.getTime()-i.seasonStartDate.getTime())/864e5;e=Math.floor(o/t*i.totalGameweeks)+1}else a&&(e=i.totalGameweeks);this.seasonInfo.next({...i,currentGameweek:e,isSeasonStarted:r,isSeasonEnded:a})}getSeasonInfo(){return this.seasonInfo.asObservable()}getCurrentGameweek(){return this.seasonInfo.value.currentGameweek}isSeasonStarted(){return this.seasonInfo.value.isSeasonStarted}isSeasonEnded(){return this.seasonInfo.value.isSeasonEnded}}return(m=l).\u0275fac=function(d){return new(d||m)},m.\u0275prov=g.jDH({token:m,factory:m.\u0275fac,providedIn:"root"}),l})()},9620:(G,f,s)=>{function m(u){return u.length>=8&&/[A-Z]/.test(u)&&/\d/.test(u)&&/[@$!%*?&]/.test(u)}function l(u){const d=[];return u.length<8&&d.push("Password must be at least 8 characters long"),/[A-Z]/.test(u)||d.push("Password must contain at least one uppercase letter"),/\d/.test(u)||d.push("Password must contain at least one number"),/[@$!%*?&]/.test(u)||d.push("Password must contain at least one special character (@$!%*?&)"),d}s.d(f,{HJ:()=>l,Oj:()=>m})},5341:(G,f,s)=>{s.d(f,{E:()=>i});var h=s(4738),g=s(177),p=s(5079),m=s(5873),l=s(4438),u=s(8010);function d(r,a){if(1&r&&(l.j41(0,"div",1)(1,"div",2),l.nrm(2,"ion-icon",3),l.j41(3,"ion-text",4),l.EFF(4),l.k0s()()()),2&r){const e=l.XpG();l.R7$(4),l.JRh(e.greeting)}}let i=(()=>{var r;class a{constructor(t){this.authService=t,this.greeting="",(0,p.a)({personCircleOutline:m.kki})}ngOnInit(){this.greeting=this.authService.getPersonalizedGreeting()}}return(r=a).\u0275fac=function(t){return new(t||r)(l.rXU(u.u))},r.\u0275cmp=l.VBU({type:r,selectors:[["app-user-greeting"]],standalone:!0,features:[l.aNF],decls:1,vars:1,consts:[["class","greeting-container",4,"ngIf"],[1,"greeting-container"],[1,"greeting-content"],["name","person-circle-outline",1,"greeting-icon"],[1,"greeting-text"]],template:function(t,o){1&t&&l.DNE(0,d,5,1,"div",0),2&t&&l.Y8G("ngIf",o.greeting)},dependencies:[h.IO,h.iq,g.bT],styles:[".greeting-container[_ngcontent-%COMP%]{padding:12px 16px;background:linear-gradient(135deg,var(--ion-color-primary-tint) 0%,var(--ion-color-primary) 100%);border-radius:12px;margin-bottom:16px;box-shadow:0 2px 8px #0000001a;animation:_ngcontent-%COMP%_slideInFade .6s ease-out}.greeting-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.greeting-icon[_ngcontent-%COMP%]{font-size:24px;color:#fff;opacity:.9}.greeting-text[_ngcontent-%COMP%]{color:#fff;font-size:16px;font-weight:500;letter-spacing:.5px}@keyframes _ngcontent-%COMP%_slideInFade{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 576px){.greeting-container[_ngcontent-%COMP%]{padding:10px 14px;margin-bottom:12px}.greeting-text[_ngcontent-%COMP%]{font-size:15px}.greeting-icon[_ngcontent-%COMP%]{font-size:22px}}@media (prefers-color-scheme: dark){.greeting-container[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--ion-color-primary-shade) 0%,var(--ion-color-primary-tint) 100%)}}"]}),a})()},4843:(G,f,s)=>{s.d(f,{_:()=>p});var h=s(9350),g=s(7707);function p(m,l){const u="object"==typeof l;return new Promise((d,i)=>{const r=new g.Ms({next:a=>{d(a),r.unsubscribe()},error:i,complete:()=>{u?d(l.defaultValue):i(new h.G)}});m.subscribe(r)})}}}]);