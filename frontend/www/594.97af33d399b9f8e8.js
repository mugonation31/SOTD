"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[594],{4594:(E,u,r)=>{r.r(u),r.d(u,{InvitationManagementPage:()=>f});var _=r(467),l=r(252),g=r(177),p=r(4341),d=r(5079),c=r(5873),e=r(4438);function v(o,s){if(1&o&&(e.j41(0,"span",20),e.EFF(1),e.nI1(2,"date"),e.k0s()),2&o){const t=e.XpG().$implicit;e.R7$(),e.SpI(" Last Sent: ",e.i5U(2,1,t.lastEmailSent,"medium")," ")}}function M(o,s){if(1&o){const t=e.RV6();e.j41(0,"ion-item")(1,"div",15)(2,"div",16)(3,"div",17)(4,"h3"),e.EFF(5),e.k0s(),e.j41(6,"ion-chip",18),e.EFF(7),e.nI1(8,"titlecase"),e.k0s()(),e.j41(9,"div",19)(10,"span",20),e.nrm(11,"ion-icon",21),e.EFF(12),e.nI1(13,"date"),e.k0s(),e.DNE(14,v,3,4,"span",22),e.k0s()(),e.j41(15,"div",23)(16,"ion-button",24),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.resendInvitation(n))}),e.nrm(17,"ion-icon",25),e.k0s(),e.j41(18,"ion-button",24),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.revokeInvitation(n))}),e.nrm(19,"ion-icon",26),e.k0s(),e.j41(20,"ion-button",27),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.viewInvitationHistory(n))}),e.nrm(21,"ion-icon",28),e.k0s()()()()}if(2&o){const t=s.$implicit,i=e.XpG();e.R7$(5),e.JRh(t.email),e.R7$(),e.Y8G("color",i.getStatusColor(t.status)),e.R7$(),e.SpI(" ",e.bMT(8,7,t.status)," "),e.R7$(5),e.SpI(" Expires: ",e.i5U(13,9,t.expiresAt,"medium")," "),e.R7$(2),e.Y8G("ngIf",t.lastEmailSent),e.R7$(2),e.Y8G("disabled","pending"!==t.status),e.R7$(2),e.Y8G("disabled","pending"!==t.status)}}function I(o,s){if(1&o){const t=e.RV6();e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Send Invitation"),e.k0s(),e.j41(4,"ion-buttons",29)(5,"ion-button",2),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.closeSingleInvite())}),e.EFF(6,"Close"),e.k0s()()()(),e.j41(7,"ion-content",0)(8,"ion-item")(9,"ion-label",30),e.EFF(10,"Email"),e.k0s(),e.j41(11,"ion-input",31),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.newInvitation.email,n)||(a.newInvitation.email=n),e.Njj(n)}),e.k0s()(),e.j41(12,"ion-item")(13,"ion-label",30),e.EFF(14,"Expiry Date"),e.k0s(),e.j41(15,"ion-datetime",32),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.newInvitation.expiresAt,n)||(a.newInvitation.expiresAt=n),e.Njj(n)}),e.k0s()(),e.j41(16,"ion-item")(17,"ion-label",30),e.EFF(18,"Custom Message"),e.k0s(),e.j41(19,"ion-textarea",33),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.newInvitation.customMessage,n)||(a.newInvitation.customMessage=n),e.Njj(n)}),e.k0s()(),e.j41(20,"ion-button",34),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.sendInvitation())}),e.EFF(21," Send Invitation "),e.k0s()()}if(2&o){const t=e.XpG();e.R7$(11),e.R50("ngModel",t.newInvitation.email),e.R7$(4),e.R50("ngModel",t.newInvitation.expiresAt),e.Y8G("min",t.minExpiryDate)("max",t.maxExpiryDate),e.R7$(4),e.R50("ngModel",t.newInvitation.customMessage)}}function h(o,s){if(1&o){const t=e.RV6();e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Bulk Invite"),e.k0s(),e.j41(4,"ion-buttons",29)(5,"ion-button",2),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.closeBulkInvite())}),e.EFF(6,"Close"),e.k0s()()()(),e.j41(7,"ion-content",0)(8,"ion-item")(9,"ion-label",30),e.EFF(10,"Emails (one per line)"),e.k0s(),e.j41(11,"ion-textarea",35),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.bulkEmails,n)||(a.bulkEmails=n),e.Njj(n)}),e.k0s()(),e.j41(12,"ion-item")(13,"ion-label",30),e.EFF(14,"Expiry Date"),e.k0s(),e.j41(15,"ion-datetime",32),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.bulkExpiryDate,n)||(a.bulkExpiryDate=n),e.Njj(n)}),e.k0s()(),e.j41(16,"ion-item")(17,"ion-label",30),e.EFF(18,"Custom Message"),e.k0s(),e.j41(19,"ion-textarea",33),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.bulkCustomMessage,n)||(a.bulkCustomMessage=n),e.Njj(n)}),e.k0s()(),e.j41(20,"ion-button",34),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.sendBulkInvitations())}),e.EFF(21," Send Invitations "),e.k0s()()}if(2&o){const t=e.XpG();e.R7$(11),e.R50("ngModel",t.bulkEmails),e.R7$(4),e.R50("ngModel",t.bulkExpiryDate),e.Y8G("min",t.minExpiryDate)("max",t.maxExpiryDate),e.R7$(4),e.R50("ngModel",t.bulkCustomMessage)}}function k(o,s){if(1&o&&(e.j41(0,"ion-chip"),e.EFF(1),e.k0s()),2&o){const t=s.$implicit;e.R7$(),e.SpI(" ",t," ")}}function b(o,s){if(1&o){const t=e.RV6();e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Email Templates"),e.k0s(),e.j41(4,"ion-buttons",29)(5,"ion-button",2),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.closeTemplateEditor())}),e.EFF(6,"Close"),e.k0s()()()(),e.j41(7,"ion-content",0)(8,"ion-segment",36),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.selectedTemplate,n)||(a.selectedTemplate=n),e.Njj(n)}),e.j41(9,"ion-segment-button",37)(10,"ion-label"),e.EFF(11,"Invitation"),e.k0s()(),e.j41(12,"ion-segment-button",38)(13,"ion-label"),e.EFF(14,"Reminder"),e.k0s()(),e.j41(15,"ion-segment-button",39)(16,"ion-label"),e.EFF(17,"Expiry"),e.k0s()()(),e.j41(18,"div",40)(19,"ion-item")(20,"ion-label",30),e.EFF(21,"Subject"),e.k0s(),e.j41(22,"ion-input",36),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.emailTemplates[a.selectedTemplate].subject,n)||(a.emailTemplates[a.selectedTemplate].subject=n),e.Njj(n)}),e.k0s()(),e.j41(23,"ion-item")(24,"ion-label",30),e.EFF(25,"Content"),e.k0s(),e.j41(26,"ion-textarea",41),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.emailTemplates[a.selectedTemplate].content,n)||(a.emailTemplates[a.selectedTemplate].content=n),e.Njj(n)}),e.k0s()(),e.j41(27,"div",42)(28,"h4"),e.EFF(29,"Available Variables:"),e.k0s(),e.DNE(30,k,2,1,"ion-chip",13),e.k0s(),e.j41(31,"ion-button",34),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.saveTemplate())}),e.EFF(32," Save Template "),e.k0s()()()}if(2&o){const t=e.XpG();e.R7$(8),e.R50("ngModel",t.selectedTemplate),e.R7$(14),e.R50("ngModel",t.emailTemplates[t.selectedTemplate].subject),e.R7$(4),e.R50("ngModel",t.emailTemplates[t.selectedTemplate].content),e.R7$(4),e.Y8G("ngForOf",t.availableVariables)}}let f=(()=>{var o;class s{constructor(){this.showSingleInviteModal=!1,this.showBulkInviteModal=!1,this.showTemplateEditor=!1,this.searchTerm="",this.statusFilter="all",this.selectedTemplate="invitation",this.invitations=[],this.filteredInvitations=[],this.newInvitation={email:"",expiresAt:new Date(Date.now()+6048e5),customMessage:""},this.bulkEmails="",this.bulkExpiryDate=new Date(Date.now()+6048e5),this.bulkCustomMessage="",this.emailTemplates={invitation:{subject:"Invitation to become a Group Admin",content:"Hello,\n\nYou have been invited to become a Group Admin..."},reminder:{subject:"Reminder: Your Group Admin invitation is pending",content:"Hello,\n\nThis is a reminder about your pending invitation..."},expiry:{subject:"Your Group Admin invitation is expiring soon",content:"Hello,\n\nYour invitation to become a Group Admin will expire soon..."}},this.availableVariables=["{{recipientEmail}}","{{expiryDate}}","{{invitationLink}}","{{invitedBy}}","{{customMessage}}"],(0,d.a)({mailOutline:c.SM1,refreshOutline:c.mVv,closeCircleOutline:c.p9N,timeOutline:c.CVk,checkmarkCircleOutline:c.gz2,warningOutline:c.bO5,createOutline:c.hmR,trashOutline:c.P1A})}ngOnInit(){this.loadInvitations()}openSingleInvite(){this.showSingleInviteModal=!0}closeSingleInvite(){this.showSingleInviteModal=!1,this.resetNewInvitation()}openBulkInvite(){this.showBulkInviteModal=!0}closeBulkInvite(){this.showBulkInviteModal=!1,this.resetBulkInvite()}openTemplateEditor(){this.showTemplateEditor=!0}closeTemplateEditor(){this.showTemplateEditor=!1}loadInvitations(){var i=this;return(0,_.A)(function*(){i.invitations=[{id:"1",email:"test@example.com",status:"pending",invitationToken:"token123",createdAt:new Date,expiresAt:new Date(Date.now()+6048e5),emailsSent:1,invitedBy:"Super Admin"}],i.filterInvitations()})()}filterInvitations(){this.filteredInvitations=this.invitations.filter(i=>i.email.toLowerCase().includes(this.searchTerm.toLowerCase())&&("all"===this.statusFilter||i.status===this.statusFilter))}sendInvitation(){var i=this;return(0,_.A)(function*(){console.log("Sending invitation:",i.newInvitation),i.closeSingleInvite()})()}sendBulkInvitations(){var i=this;return(0,_.A)(function*(){const n=i.bulkEmails.split("\n").map(a=>a.trim()).filter(a=>a);console.log("Sending bulk invitations:",{emails:n,expiryDate:i.bulkExpiryDate}),i.closeBulkInvite()})()}resendInvitation(i){return(0,_.A)(function*(){console.log("Resending invitation:",i)})()}revokeInvitation(i){return(0,_.A)(function*(){console.log("Revoking invitation:",i)})()}viewInvitationHistory(i){return(0,_.A)(function*(){console.log("Viewing history for:",i)})()}saveTemplate(){var i=this;return(0,_.A)(function*(){console.log("Saving template:",i.emailTemplates[i.selectedTemplate])})()}getStatusColor(i){switch(i){case"pending":return"warning";case"accepted":return"success";case"expired":default:return"medium";case"revoked":return"danger"}}resetNewInvitation(){this.newInvitation={email:"",expiresAt:new Date(Date.now()+6048e5),customMessage:""}}resetBulkInvite(){this.bulkEmails="",this.bulkExpiryDate=new Date(Date.now()+6048e5),this.bulkCustomMessage=""}get minExpiryDate(){return(new Date).toISOString()}get maxExpiryDate(){const i=new Date;return i.setDate(i.getDate()+30),i.toISOString()}}return(o=s).\u0275fac=function(i){return new(i||o)},o.\u0275cmp=e.VBU({type:o,selectors:[["app-invitation-management"]],standalone:!0,features:[e.aNF],decls:36,vars:6,consts:[[1,"ion-padding"],[1,"action-buttons"],[3,"click"],["name","mail-outline","slot","start"],["name","create-outline","slot","start"],[1,"filters-container"],["placeholder","Search by email",3,"ngModelChange","ionInput","ngModel"],["placeholder","Filter by status",3,"ngModelChange","ionChange","ngModel"],["value","all"],["value","pending"],["value","accepted"],["value","expired"],["value","revoked"],[4,"ngFor","ngForOf"],[3,"isOpen"],[1,"invitation-item"],[1,"invitation-header"],[1,"email-status"],[3,"color"],[1,"dates"],[1,"date-label"],["name","time-outline"],["class","date-label",4,"ngIf"],[1,"invitation-actions"],["fill","clear",3,"click","disabled"],["name","refresh-outline","slot","icon-only"],["name","close-circle-outline","slot","icon-only"],["fill","clear",3,"click"],["name","time-outline","slot","icon-only"],["slot","end"],["position","stacked"],["type","email",3,"ngModelChange","ngModel"],[3,"ngModelChange","ngModel","min","max"],["rows","4",3,"ngModelChange","ngModel"],["expand","block",3,"click"],["rows","10","placeholder","Enter email addresses, one per line",3,"ngModelChange","ngModel"],[3,"ngModelChange","ngModel"],["value","invitation"],["value","reminder"],["value","expiry"],[1,"template-editor"],["rows","10",3,"ngModelChange","ngModel"],[1,"template-variables"]],template:function(i,n){1&i&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Group Admin Invitations"),e.k0s()()(),e.j41(4,"ion-content",0)(5,"div",1)(6,"ion-button",2),e.bIt("click",function(){return n.openSingleInvite()}),e.nrm(7,"ion-icon",3),e.EFF(8," Send Invitation "),e.k0s(),e.j41(9,"ion-button",2),e.bIt("click",function(){return n.openBulkInvite()}),e.nrm(10,"ion-icon",3),e.EFF(11," Bulk Invite "),e.k0s(),e.j41(12,"ion-button",2),e.bIt("click",function(){return n.openTemplateEditor()}),e.nrm(13,"ion-icon",4),e.EFF(14," Edit Templates "),e.k0s()(),e.j41(15,"div",5)(16,"ion-searchbar",6),e.mxI("ngModelChange",function(m){return e.DH7(n.searchTerm,m)||(n.searchTerm=m),m}),e.bIt("ionInput",function(){return n.filterInvitations()}),e.k0s(),e.j41(17,"ion-select",7),e.mxI("ngModelChange",function(m){return e.DH7(n.statusFilter,m)||(n.statusFilter=m),m}),e.bIt("ionChange",function(){return n.filterInvitations()}),e.j41(18,"ion-select-option",8),e.EFF(19,"All Status"),e.k0s(),e.j41(20,"ion-select-option",9),e.EFF(21,"Pending"),e.k0s(),e.j41(22,"ion-select-option",10),e.EFF(23,"Accepted"),e.k0s(),e.j41(24,"ion-select-option",11),e.EFF(25,"Expired"),e.k0s(),e.j41(26,"ion-select-option",12),e.EFF(27,"Revoked"),e.k0s()()(),e.j41(28,"ion-list"),e.DNE(29,M,22,12,"ion-item",13),e.k0s(),e.j41(30,"ion-modal",14),e.DNE(31,I,22,5,"ng-template"),e.k0s(),e.j41(32,"ion-modal",14),e.DNE(33,h,22,5,"ng-template"),e.k0s(),e.j41(34,"ion-modal",14),e.DNE(35,b,33,4,"ng-template"),e.k0s()()),2&i&&(e.R7$(16),e.R50("ngModel",n.searchTerm),e.R7$(),e.R50("ngModel",n.statusFilter),e.R7$(12),e.Y8G("ngForOf",n.filteredInvitations),e.R7$(),e.Y8G("isOpen",n.showSingleInviteModal),e.R7$(2),e.Y8G("isOpen",n.showBulkInviteModal),e.R7$(2),e.Y8G("isOpen",n.showTemplateEditor))},dependencies:[l.eU,l.ai,l.BC,l.W9,l.Jm,l.QW,l.iq,l.uz,l.he,l.nf,l.S1,l.Nm,l.Ip,l.Sb,l.nc,l.A9,l.ZB,l.Gp,l.eP,l.$w,g.pM,g.bT,g.vh,g.PV,p.YN,p.BC,p.vS],styles:[".action-buttons[_ngcontent-%COMP%], .filters-container[_ngcontent-%COMP%]{display:flex;gap:16px;margin-bottom:20px}.filters-container[_ngcontent-%COMP%]   ion-searchbar[_ngcontent-%COMP%]{flex:1}.filters-container[_ngcontent-%COMP%]   ion-select[_ngcontent-%COMP%]{width:200px}.invitation-item[_ngcontent-%COMP%]{width:100%;padding:12px}.invitation-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:8px}.email-status[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.email-status[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:16px;font-weight:500}.dates[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;font-size:12px;color:#666}.dates[_ngcontent-%COMP%]   .date-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.dates[_ngcontent-%COMP%]   .date-label[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}.invitation-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:8px}.template-editor[_ngcontent-%COMP%]{padding:16px}.template-editor[_ngcontent-%COMP%]   .template-variables[_ngcontent-%COMP%]{margin-top:16px;padding:16px;background:#f5f5f5;border-radius:8px}.template-editor[_ngcontent-%COMP%]   .template-variables[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 8px;font-size:14px;color:#666}.template-editor[_ngcontent-%COMP%]   .template-variables[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]{font-size:12px}"]}),s})()}}]);