{"version":3,"file":"src_app_platforms_auth_pages_login_login_page_ts.js","mappings":"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","sources":["./src/app/platforms/auth/pages/login/login.page.ts","./src/app/platforms/auth/pages/login/login.page.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport {\n  IonHeader,\n  IonToolbar,\n  IonTitle,\n  IonContent,\n  IonInput,\n  IonButton,\n  IonIcon,\n  IonItem,\n  IonList,\n  IonCard,\n  IonCardContent,\n  IonText,\n  IonNote,\n} from '@ionic/angular/standalone';\nimport { Router, RouterLink, ActivatedRoute } from '@angular/router';\nimport { FormsModule } from '@angular/forms';\nimport { NgIf } from '@angular/common';\nimport { addIcons } from 'ionicons';\nimport {\n  eye,\n  eyeOff,\n  footballOutline, mailOutline } from 'ionicons/icons';\nimport { AuthService } from '../../../../core/services/auth.service';\nimport {\n  validateEmail,\n  validatePassword,\n} from '../../../../core/utils/validation.utils';\n\ninterface ValidationErrors {\n  email: string;\n  password: string;\n}\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.page.html',\n  styleUrls: ['./login.page.scss'],\n  standalone: true,\n  imports: [\n    IonHeader,\n    IonToolbar,\n    IonTitle,\n    IonContent,\n    IonInput,\n    IonButton,\n    IonIcon,\n    IonItem,\n    IonList,\n    IonCard,\n    IonCardContent,\n    IonText,\n    IonNote,\n    RouterLink,\n    FormsModule,\n    NgIf,\n  ],\n})\nexport class LoginPage implements OnInit {\n  loginData = {\n    email: '',\n    password: '',\n    securityQuestion: '',\n    securityAnswer: '',\n  };\n\n  validationErrors: ValidationErrors = {\n    email: '',\n    password: '',\n  };\n\n  showPassword = false;\n  isLoading = false;\n  private returnUrl: string = '';\n  \n  // Email confirmation state\n  pendingConfirmation = false;\n  userEmail = '';\n\n  get canSubmit(): boolean {\n    return Boolean(\n      this.loginData.email &&\n        this.loginData.password &&\n        !this.validationErrors.email &&\n        !this.validationErrors.password\n    );\n  }\n\n  constructor(\n    private authService: AuthService,\n    private router: Router,\n    private route: ActivatedRoute\n  ) {\n    addIcons({footballOutline,mailOutline,eye,eyeOff});\n  }\n\n  ngOnInit() {\n    // Get return URL and role from route parameters\n    this.route.queryParams.subscribe(params => {\n      \n      this.returnUrl = params['returnUrl'] || '';\n      const expectedRole = params['role'] || '';\n      \n      // Check for email confirmation parameters\n      this.pendingConfirmation = params['pendingConfirmation'] === 'true';\n      this.userEmail = params['email'] || '';\n      \n    });\n  }\n\n  validateEmail() {\n    const emailPattern = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}$/;\n\n    if (!this.loginData.email) {\n      this.validationErrors.email = 'Email is required';\n    } else if (!emailPattern.test(this.loginData.email)) {\n      this.validationErrors.email = 'Please enter a valid email address';\n    } else {\n      this.validationErrors.email = '';\n    }\n  }\n\n  validatePassword() {\n    if (!this.loginData.password) {\n      this.validationErrors.password = 'Password is required';\n    } else if (!validatePassword(this.loginData.password)) {\n      this.validationErrors.password = 'Please enter a valid password';\n    } else {\n      this.validationErrors.password = '';\n    }\n  }\n\n  togglePasswordVisibility() {\n    this.showPassword = !this.showPassword;\n  }\n\n  onLogin() {\n    this.validateEmail();\n    this.validatePassword();\n\n    if (!this.canSubmit || this.isLoading) {\n      console.log('‚ö†Ô∏è Login: Already in progress or form invalid, ignoring duplicate submission');\n      return;\n    }\n\n    this.isLoading = true;\n    console.log('üîç Login: Starting login process...');\n\n    // Check if user is already authenticated with the same email\n    const currentUser = this.authService.currentUserValue;\n    if (currentUser && currentUser.user.email === this.loginData.email) {\n      console.log('‚úÖ Login: User already authenticated, redirecting...');\n      this.handleSuccessfulLogin();\n      return;\n    }\n\n    // Only clear session if user is different or not authenticated\n    this.authService.clearSession();\n\n    // Set default security question and answer for development\n    this.loginData.securityQuestion = 'What is your favorite color?';\n    this.loginData.securityAnswer = 'blue';\n\n \n\n    this.authService.login(this.loginData).subscribe({\n      next: (response) => {\n        console.log('‚úÖ Login: Success response received:', response);\n        this.handleSuccessfulLogin();\n      },\n      error: (error) => {\n        console.error('‚ùå Login: Error occurred:', error);\n        this.isLoading = false;\n        \n        // TODO: Replace with proper toast service when available\n        // For now, use a simple alert for user feedback\n        const errorMessage = error?.error?.message || error?.message || 'Login failed. Please check your credentials and try again.';\n        alert(errorMessage);\n      },\n    });\n  }\n\n  private handleSuccessfulLogin() {\n    this.isLoading = false;\n    const userRole = this.authService.getUserRole();\n    \n    // Handle specific return URL from external navigation (e.g., guard redirects)\n    if (this.returnUrl && this.returnUrl.trim() !== '') {\n      this.router.navigate([this.returnUrl], { replaceUrl: true });\n      return;\n    }\n\n    // Simple role-based redirection to dashboards\n    this.redirectBasedOnRole(userRole);\n  }\n\n  private redirectBasedOnRole(role: string | null) {\n    let targetRoute: string;\n\n    // Check if this is a first login - redirect to appropriate first-time route\n    const isFirstLogin = this.authService.isFirstTimeUser();\n\n    console.log('üîç Login: Redirecting user with role:', role, 'isFirstLogin:', isFirstLogin);\n\n    if (isFirstLogin) {\n      console.log('üÜï Login: First-time user - redirecting to onboarding flow');\n      switch (role) {\n        case 'group-admin':\n          targetRoute = '/group-admin/groups';\n          break;\n        case 'player':\n          targetRoute = '/player/join-group';\n          break;\n        case 'super-admin':\n          targetRoute = '/super-admin/dashboard';\n          break;\n        default:\n          targetRoute = '/welcome';\n      }\n    } else {\n      console.log('üîÑ Login: Returning user - redirecting to dashboard');\n      // Returning user - redirect to dashboard\n      switch (role) {\n        case 'group-admin':\n          targetRoute = '/group-admin/dashboard';\n          break;\n        case 'player':\n          targetRoute = '/player/dashboard';\n          break;\n        case 'super-admin':\n          targetRoute = '/super-admin/dashboard';\n          break;\n        default:\n          targetRoute = '/welcome';\n      }\n    }\n\n    console.log('üéØ Login: Navigating to:', targetRoute);\n    this.router.navigate([targetRoute], { replaceUrl: true });\n  }\n\n  navigateToWelcome() {\n    // Clear any stored returnUrl and navigate to welcome page\n    // This ensures users always go to welcome when clicking logo\n    this.returnUrl = '';\n    this.router.navigate(['/welcome'], { replaceUrl: true });\n  }\n}\n","<ion-header>\n  <ion-toolbar>\n    <div class=\"logo-container\" (click)=\"navigateToWelcome()\">\n      <ion-icon name=\"football-outline\" class=\"football-icon\"></ion-icon>\n      <div class=\"logo-text\">\n        <span class=\"logo-sotd\">SOTD</span>\n        <span class=\"logo-subtitle\">Predict 3</span>\n      </div>\n    </div>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content class=\"ion-padding\">\n  <ion-card class=\"auth-card\">\n    <ion-card-content>\n      <div class=\"auth-header\">\n        <h1>Welcome Back</h1>\n        <p>Sign in to continue</p>\n      </div>\n\n      <form (ngSubmit)=\"onLogin()\">\n        <ion-list class=\"auth-form\">\n          <ion-item>\n            <ion-input placeholder=\"Email\" [(ngModel)]=\"loginData.email\" (ionInput)=\"validateEmail()\"\n              [class.ion-invalid]=\"validationErrors.email\" name=\"email\" required type=\"email\">\n            </ion-input>\n            <ion-note slot=\"error\" *ngIf=\"validationErrors.email\">\n              {{ validationErrors.email }}\n            </ion-note>\n          </ion-item>\n\n          <ion-item>\n            <ion-input placeholder=\"Password\" [(ngModel)]=\"loginData.password\" (ionInput)=\"validatePassword()\"\n              [class.ion-invalid]=\"validationErrors.password\" [type]=\"showPassword ? 'text' : 'password'\"\n              name=\"password\" required>\n            </ion-input>\n            <ion-button fill=\"clear\" slot=\"end\" (click)=\"togglePasswordVisibility()\">\n              <ion-icon [name]=\"showPassword ? 'eye-off' : 'eye'\"></ion-icon>\n            </ion-button>\n            <ion-note slot=\"error\" *ngIf=\"validationErrors.password\">\n              {{ validationErrors.password }}\n            </ion-note>\n          </ion-item>\n        </ion-list>\n\n        <div class=\"auth-links\">\n          <div class=\"forgot-password\">\n            <a routerLink=\"/auth/forgot-password\">Forgot Password?</a>\n          </div>\n          <div class=\"signup-link\">\n            <span>New to SOTD? </span>\n            <a routerLink=\"/auth/signup\">Create an account</a>\n          </div>\n        </div>\n\n        <div class=\"auth-actions\">\n          <ion-button expand=\"block\" type=\"submit\" [disabled]=\"!canSubmit || isLoading\">\n            <span *ngIf=\"!isLoading\">Login</span>\n            <span *ngIf=\"isLoading\">Logging in...</span>\n          </ion-button>\n        </div>\n\n        <!-- Email Confirmation Message -->\n        <div *ngIf=\"pendingConfirmation && userEmail\" class=\"email-confirmation-message\">\n          <ion-card color=\"primary\">\n            <ion-card-content>\n              <div class=\"confirmation-content\">\n                <ion-icon name=\"mail-outline\" class=\"confirmation-icon\"></ion-icon>\n                <div class=\"confirmation-text\">\n                  <h3>Check Your Email</h3>\n                  <p>We've sent you a confirmation email to <strong>{{ userEmail }}</strong></p>\n                  <p>Please click the confirmation link and return here to sign in.</p>\n                </div>\n              </div>\n            </ion-card-content>\n          </ion-card>\n        </div>\n\n      </form>\n    </ion-card-content>\n  </ion-card>\n</ion-content>"],"names":["IonHeader","IonToolbar","IonContent","IonInput","IonButton","IonIcon","IonItem","IonList","IonCard","IonCardContent","IonNote","RouterLink","FormsModule","NgIf","addIcons","eye","eyeOff","footballOutline","mailOutline","validatePassword","i0","…µ…µelementStart","…µ…µtext","…µ…µelementEnd","…µ…µadvance","…µ…µtextInterpolate1","ctx_r0","validationErrors","email","password","…µ…µelement","…µ…µtextInterpolate","userEmail","LoginPage","canSubmit","Boolean","loginData","constructor","authService","router","route","securityQuestion","securityAnswer","showPassword","isLoading","returnUrl","pendingConfirmation","ngOnInit","queryParams","subscribe","params","expectedRole","validateEmail","emailPattern","test","togglePasswordVisibility","onLogin","console","log","currentUser","currentUserValue","user","handleSuccessfulLogin","clearSession","login","next","response","error","_error$error","errorMessage","message","alert","userRole","getUserRole","trim","navigate","replaceUrl","redirectBasedOnRole","role","targetRoute","isFirstLogin","isFirstTimeUser","navigateToWelcome","…µ…µdirectiveInject","i1","AuthService","i2","Router","ActivatedRoute","selectors","standalone","features","…µ…µStandaloneFeature","decls","vars","consts","template","LoginPage_Template","rf","ctx","…µ…µlistener","LoginPage_Template_div_click_2_listener","LoginPage_Template_form_ngSubmit_17_listener","…µ…µtwoWayListener","LoginPage_Template_ion_input_ngModelChange_20_listener","$event","…µ…µtwoWayBindingSet","LoginPage_Template_ion_input_ionInput_20_listener","…µ…µtemplate","LoginPage_ion_note_21_Template","LoginPage_Template_ion_input_ngModelChange_23_listener","LoginPage_Template_ion_input_ionInput_23_listener","LoginPage_Template_ion_button_click_24_listener","LoginPage_ion_note_26_Template","LoginPage_span_38_Template","LoginPage_span_39_Template","LoginPage_div_40_Template","…µ…µclassProp","…µ…µtwoWayProperty","…µ…µproperty","i3","…µNgNoValidate","NgControlStatus","NgControlStatusGroup","RequiredValidator","NgModel","NgForm","styles"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}