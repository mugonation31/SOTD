"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[44],{5423:(v,_,i)=>{i.d(_,{f:()=>f});var m=i(467),r=i(4438),u=i(4738);let f=(()=>{var l;class p{constructor(d){this.toastController=d}showToast(d){var C=this;return(0,m.A)(function*(P,h="success",M=3e3){const b="error"===h?"danger":h;yield(yield C.toastController.create({message:P,color:b,duration:M,position:"bottom"})).present()}).apply(this,arguments)}}return(l=p).\u0275fac=function(d){return new(d||l)(r.KVO(u.K_))},l.\u0275prov=r.jDH({token:l,factory:l.\u0275fac,providedIn:"root"}),p})()},8044:(v,_,i)=>{i.r(_),i.d(_,{JoinGroupPage:()=>E});var m=i(467),r=i(4738),u=i(4341),f=i(177),l=i(5079),p=i(5873),o=i(4438),d=i(7570),C=i(5423),P=i(9699),h=i(8010);function M(e,c){1&e&&o.nrm(0,"ion-spinner",20)}function b(e,c){1&e&&(o.j41(0,"span",21),o.EFF(1," Find Group "),o.nrm(2,"ion-icon",22),o.k0s())}function O(e,c){1&e&&(o.j41(0,"div",23)(1,"p"),o.EFF(2,"You haven't joined any groups yet."),o.k0s()())}function x(e,c){if(1&e&&(o.j41(0,"span",34),o.EFF(1),o.k0s()),2&e){const s=o.XpG().$implicit;o.R7$(),o.SpI(" Entry Fee: \xa3",s.entryFee," ")}}function G(e,c){if(1&e){const s=o.RV6();o.j41(0,"ion-item",25),o.bIt("click",function(){const t=o.eBV(s).$implicit,a=o.XpG(2);return o.Njj(a.viewGroupStandings(t.id))}),o.j41(1,"div",26)(2,"div",27)(3,"h3"),o.EFF(4),o.k0s(),o.j41(5,"p",28),o.EFF(6),o.k0s(),o.j41(7,"p",29),o.EFF(8),o.k0s()(),o.j41(9,"div",30)(10,"ion-badge",31),o.EFF(11),o.k0s(),o.DNE(12,x,2,1,"span",32),o.k0s()(),o.nrm(13,"ion-icon",33),o.k0s()}if(2&e){const s=c.$implicit;o.R7$(4),o.JRh(s.name),o.R7$(2),o.SpI("Admin: ",s.adminName,""),o.R7$(2),o.SpI("",s.memberCount," Members"),o.R7$(2),o.Y8G("color","prize"===s.type?"primary":"secondary"),o.R7$(),o.SpI(" ","prize"===s.type?"Prize Pool":"Casual"," "),o.R7$(),o.Y8G("ngIf","prize"===s.type)}}function y(e,c){if(1&e&&(o.j41(0,"ion-list"),o.DNE(1,G,14,6,"ion-item",24),o.k0s()),2&e){const s=o.XpG();o.R7$(),o.Y8G("ngForOf",s.myGroups)}}let E=(()=>{var e;class c{constructor(n,t,a,g){this.router=n,this.toastService=t,this.groupService=a,this.authService=g,this.groupCode="",this.isSearching=!1,this.isJoining=!1,this.isValidCode=!1,this.showGroupDetails=!1,this.foundGroup=null,this.myGroups=[],this.groupDetailsMessage="",this.currentPlayer=this.authService.getCurrentUser(),this.alertButtons=[{text:"Cancel",role:"cancel",handler:()=>{this.showGroupDetails=!1,this.foundGroup=null,this.groupDetailsMessage=""}},{text:"Join Group",handler:()=>{this.confirmJoinGroup()}}],(0,l.a)({footballOutline:p.gMr,personOutline:p.wAZ,arrowForwardOutline:p.p9U,peopleOutline:p.wx_,chevronForwardOutline:p.N05,peopleCircleOutline:p.szM,logOutOutline:p.z_V})}ngOnInit(){this.loadMyGroups(),this.groupsSubscription=this.groupService.groups$.subscribe(()=>{this.loadMyGroups()})}ngOnDestroy(){this.groupsSubscription&&this.groupsSubscription.unsubscribe()}navigateTo(n){this.router.navigate([n])}onGroupCodeInput(n){const t=n.target.value.toUpperCase();this.groupCode=t,this.isValidCode=this.validateGroupCode(t)}validateGroupCode(n){return/^[A-Z0-9]{6}$/.test(n)}joinGroup(){var n=this;return(0,m.A)(function*(){if(n.isValidCode&&!n.isSearching){n.isSearching=!0;try{n.groupService.getAllGroups();const a=n.groupService.findGroupByCode(n.groupCode);a?(n.foundGroup=a,n.groupDetailsMessage=n.getGroupDetailsMessage(),n.showGroupDetails=!0,n.groupCode="",n.isValidCode=!1):(yield n.toastService.showToast("Group not found with that code","error"),n.groupCode="",n.isValidCode=!1)}catch(t){console.error("Error finding group:",t),yield n.toastService.showToast("Error searching for group","error"),n.groupCode="",n.isValidCode=!1}finally{n.isSearching=!1}}})()}getGroupDetailsMessage(){if(!this.foundGroup)return"";try{let n=`Group Name: ${this.foundGroup.name}\n`;return n+=`Admin: ${this.foundGroup.adminName}\n`,n+=`Members: ${this.foundGroup.memberCount}\n`,n+=`Type: ${"prize"===this.foundGroup.type?"Prize Pool":"Casual"}\n`,"prize"===this.foundGroup.type&&(n+=`Entry Fee: \xa3${this.foundGroup.entryFee}\n`),n+="\nDo you want to join this group?",n}catch(n){return console.error("\u274c Error generating group details message:",n),"Error loading group details"}}loadMyGroups(){this.myGroups=this.groupService.getUserGroups()}viewGroupStandings(n){this.router.navigate(["/player/group-standings",n])}confirmJoinGroup(){var n=this;return(0,m.A)(function*(){if(!n.foundGroup||n.isJoining)return;n.isJoining=!0;const t=n.foundGroup.name;try{if(!n.groupService.joinGroup(n.foundGroup.code))throw new Error("Failed to join group");yield n.authService.markFirstLoginComplete(),n.showGroupDetails=!1,n.foundGroup=null,n.groupDetailsMessage="",yield n.toastService.showToast(`\u{1f389} Successfully joined ${t}! Check "My Groups" below.`,"success")}catch(a){console.error("\u274c Error in confirmJoinGroup:",a);let g="Error joining group";a instanceof Error&&(g=a.message),yield n.toastService.showToast(g,"error")}finally{n.isJoining=!1}})()}}return(e=c).\u0275fac=function(n){return new(n||e)(o.rXU(d.Ix),o.rXU(C.f),o.rXU(P.B),o.rXU(h.u))},e.\u0275cmp=o.VBU({type:e,selectors:[["app-join-group"]],standalone:!0,features:[o.aNF],decls:35,vars:10,consts:[[1,"logo-container",3,"click"],["name","football-outline",1,"football-icon"],[1,"logo-text"],[1,"logo-sotd"],[1,"logo-subtitle"],["slot","end"],[3,"click"],["name","person-outline"],[1,"ion-padding"],[1,"description"],[1,"join-form"],["type","text","placeholder","Enter group code","maxlength","6",1,"group-code-input",3,"ngModelChange","ionInput","ngModel","disabled"],["expand","block",1,"join-button",3,"click","disabled"],[1,"button-content"],["name","dots",4,"ngIf"],["class","button-text",4,"ngIf"],["name","people-outline"],["class","no-groups",4,"ngIf"],[4,"ngIf"],["header","Group Details",3,"isOpen","message","buttons"],["name","dots"],[1,"button-text"],["name","arrow-forward-outline","slot","end"],[1,"no-groups"],["button","","class","joined-group-item",3,"click",4,"ngFor","ngForOf"],["button","",1,"joined-group-item",3,"click"],[1,"group-item"],[1,"group-info"],[1,"admin"],[1,"members"],[1,"group-type"],[3,"color"],["class","entry-fee",4,"ngIf"],["name","chevron-forward-outline","slot","end","color","medium"],[1,"entry-fee"]],template:function(n,t){1&n&&(o.j41(0,"ion-header")(1,"ion-toolbar")(2,"div",0),o.bIt("click",function(){return t.navigateTo("/player/dashboard")}),o.nrm(3,"ion-icon",1),o.j41(4,"div",2)(5,"span",3),o.EFF(6,"SOTD"),o.k0s(),o.j41(7,"span",4),o.EFF(8,"Predict 3"),o.k0s()()(),o.j41(9,"ion-buttons",5)(10,"ion-button",6),o.bIt("click",function(){return t.navigateTo("/player/settings")}),o.nrm(11,"ion-icon",7),o.k0s()()()(),o.j41(12,"ion-content",8)(13,"ion-card")(14,"ion-card-header")(15,"ion-card-title"),o.EFF(16," Join a Group "),o.k0s()(),o.j41(17,"ion-card-content")(18,"p",9),o.EFF(19," Enter a group code to join an existing prediction group "),o.k0s(),o.j41(20,"div",10)(21,"ion-input",11),o.mxI("ngModelChange",function(g){return o.DH7(t.groupCode,g)||(t.groupCode=g),g}),o.bIt("ionInput",function(g){return t.onGroupCodeInput(g)}),o.k0s(),o.j41(22,"ion-button",12),o.bIt("click",function(){return t.joinGroup()}),o.j41(23,"div",13),o.DNE(24,M,1,0,"ion-spinner",14)(25,b,3,0,"span",15),o.k0s()()()()(),o.j41(26,"ion-card")(27,"ion-card-header")(28,"ion-card-title"),o.nrm(29,"ion-icon",16),o.EFF(30," My Groups "),o.k0s()(),o.j41(31,"ion-card-content"),o.DNE(32,O,3,0,"div",17)(33,y,2,1,"ion-list",18),o.k0s()()(),o.nrm(34,"ion-alert",19)),2&n&&(o.R7$(21),o.R50("ngModel",t.groupCode),o.Y8G("disabled",t.isSearching),o.R7$(),o.Y8G("disabled",!t.isValidCode||t.isSearching),o.R7$(2),o.Y8G("ngIf",t.isSearching),o.R7$(),o.Y8G("ngIf",!t.isSearching),o.R7$(7),o.Y8G("ngIf",0===t.myGroups.length),o.R7$(),o.Y8G("ngIf",t.myGroups.length>0),o.R7$(),o.Y8G("isOpen",t.showGroupDetails)("message",t.groupDetailsMessage)("buttons",t.alertButtons))},dependencies:[r.eU,r.ai,r.W9,r.b_,r.ME,r.tN,r.I9,r.nf,r.uz,r.$w,r.Jm,r.iq,r.QW,r.w2,r.Zy,r.In,u.YN,u.BC,u.tU,u.vS,f.bT,f.pM],styles:[".logo-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 16px;cursor:pointer}.logo-container[_ngcontent-%COMP%]   .football-icon[_ngcontent-%COMP%]{font-size:24px;color:var(--ion-color-primary)}.logo-container[_ngcontent-%COMP%]   .logo-text[_ngcontent-%COMP%]{display:flex;flex-direction:column;line-height:1}.logo-container[_ngcontent-%COMP%]   .logo-text[_ngcontent-%COMP%]   .logo-sotd[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:var(--ion-color-dark)}.logo-container[_ngcontent-%COMP%]   .logo-text[_ngcontent-%COMP%]   .logo-subtitle[_ngcontent-%COMP%]{font-size:12px;color:var(--ion-color-medium)}ion-buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--padding-start: 8px;--padding-end: 8px;height:44px}ion-buttons[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px;color:var(--ion-color-medium)}ion-card[_ngcontent-%COMP%]{margin:0 0 20px;border-radius:16px;box-shadow:0 4px 16px #00000014;border:1px solid rgba(var(--ion-color-primary-rgb),.1);overflow:hidden;transition:all .3s ease}ion-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 24px #0000001f}ion-card-header[_ngcontent-%COMP%]{padding:20px 20px 16px;background:linear-gradient(135deg,rgba(var(--ion-color-primary-rgb),.02),rgba(var(--ion-color-primary-rgb),.06))}ion-card-header[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;font-size:1.3rem;font-weight:700;color:var(--ion-color-dark);letter-spacing:-.02em}ion-card-header[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.5rem;color:var(--ion-color-primary)}ion-card-content[_ngcontent-%COMP%]{padding:20px}.description[_ngcontent-%COMP%]{color:var(--ion-color-medium);margin-bottom:24px;font-size:.95rem;line-height:1.5;font-weight:400}.join-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.group-code-input[_ngcontent-%COMP%]{--background: rgba(var(--ion-color-light-rgb), .8);--padding-start: 20px;--padding-end: 20px;--padding-top: 16px;--padding-bottom: 16px;--border-radius: 12px;--color: var(--ion-color-dark);--placeholder-color: var(--ion-color-medium);font-size:1.1rem;text-transform:uppercase;font-weight:600;letter-spacing:2px;border:2px solid transparent;transition:all .3s ease}.group-code-input.ion-focused[_ngcontent-%COMP%]{--background: rgba(var(--ion-color-primary-rgb), .05);border-color:var(--ion-color-primary);transform:translateY(-1px)}.join-button[_ngcontent-%COMP%]{margin:0;height:52px;--border-radius: 12px;font-weight:600;font-size:1rem;--background: var(--ion-color-primary);--background-hover: var(--ion-color-primary-shade);--color: white;position:relative;overflow:hidden;transition:all .3s ease}.join-button[_ngcontent-%COMP%]:not(.button-disabled):hover{transform:translateY(-2px);--box-shadow: 0 6px 20px rgba(var(--ion-color-primary-rgb), .4)}.join-button[_ngcontent-%COMP%]   .button-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%;height:100%;gap:8px}.join-button[_ngcontent-%COMP%]   .button-content[_ngcontent-%COMP%]   .button-text[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.join-button[_ngcontent-%COMP%]   .button-content[_ngcontent-%COMP%]   .button-text[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.1rem;transition:transform .3s ease}.join-button[_ngcontent-%COMP%]   .button-content[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{--color: white;width:20px;height:20px}.join-button[_ngcontent-%COMP%]:not(.button-disabled):hover   .button-text[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{transform:translate(2px)}.no-groups[_ngcontent-%COMP%]{text-align:center;padding:32px 16px;color:var(--ion-color-medium)}.no-groups[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;margin:0;font-style:italic}ion-list[_ngcontent-%COMP%]{background:transparent}ion-item.joined-group-item[_ngcontent-%COMP%]{--background: var(--ion-background-color);--border-radius: 12px;margin-bottom:8px;border:1px solid var(--ion-color-light-shade)}ion-item.joined-group-item[_ngcontent-%COMP%]:hover{--background: var(--ion-color-light-tint);border-color:var(--ion-color-medium-tint);transform:translateY(-1px);box-shadow:0 2px 8px #00000014}.group-item[_ngcontent-%COMP%]{width:100%;padding:16px 0;border-bottom:1px solid rgba(var(--ion-color-medium-rgb),.1);transition:all .3s ease}.group-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.group-item[_ngcontent-%COMP%]:hover{background:rgba(var(--ion-color-primary-rgb),.02);border-radius:8px;padding:16px 12px;margin:0 -12px}.group-item[_ngcontent-%COMP%]   .group-info[_ngcontent-%COMP%]{margin-bottom:12px}.group-item[_ngcontent-%COMP%]   .group-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 6px;font-size:1.1rem;font-weight:700;color:var(--ion-color-dark);letter-spacing:-.01em}.group-item[_ngcontent-%COMP%]   .group-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.9rem;color:var(--ion-color-medium);line-height:1.4}.group-item[_ngcontent-%COMP%]   .group-info[_ngcontent-%COMP%]   p.admin[_ngcontent-%COMP%]{margin-bottom:4px;font-weight:500}.group-item[_ngcontent-%COMP%]   .group-type[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.group-item[_ngcontent-%COMP%]   .group-type[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]{--padding-start: 12px;--padding-end: 12px;--padding-top: 6px;--padding-bottom: 6px;--border-radius: 8px;font-weight:600;font-size:.8rem;letter-spacing:.02em}.group-item[_ngcontent-%COMP%]   .group-type[_ngcontent-%COMP%]   .entry-fee[_ngcontent-%COMP%]{font-size:.9rem;color:var(--ion-color-dark);font-weight:700;background:rgba(var(--ion-color-warning-rgb),.15);padding:4px 8px;border-radius:6px;border:1px solid rgba(var(--ion-color-warning-rgb),.3)}"]}),c})()}}]);