"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[377],{7377:(j,p,s)=>{s.r(p),s.d(p,{MetricsPage:()=>k});var M=s(467),d=s(177),u=s(4341),i=s(4738),v=s(5079),c=s(5873),y=s(9350),F=s(7707),e=s(4438),h=s(7673),C=s(5312),S=s(1626);let O=(()=>{var o;class l{constructor(n){this.http=n,this.apiUrl=C.c.apiUrl}getSystemMetrics(){const n={performance:{apiLatency:150,errorRate:.5,uptime:99.95,lastDeployment:(new Date).toISOString()},activeUsers:{total:1250,today:450,lastHour:85,thisWeek:850},predictions:{total:25e3,today:1200,accuracy:78.5},storage:{usedSpace:2684354560,totalSize:10737418240,backupStatus:"Success",lastBackup:(new Date).toISOString()}};return(0,h.of)(n)}getRealtimeMetrics(){const n={activeUsers:{total:Math.floor(2e3*Math.random()),lastHour:Math.floor(100*Math.random()),today:Math.floor(1e3*Math.random()),thisWeek:Math.floor(5e3*Math.random())},performance:{apiLatency:120+50*Math.random(),errorRate:.5*Math.random(),uptime:99.95+.1*Math.random(),lastDeployment:(new Date).toISOString()}};return(0,h.of)(n)}getMetricsHistory(n){return(0,h.of)([])}}return(o=l).\u0275fac=function(n){return new(n||o)(e.KVO(S.Qq))},o.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"}),l})();function b(o,l){if(1&o&&(e.j41(0,"p",12),e.EFF(1),e.k0s()),2&o){const m=e.XpG();e.R7$(),e.SpI(" Last outage: ",m.getTimeAgo(m.systemHealth.platform.lastOutage)," ")}}let k=(()=>{var o;class l{constructor(n){this.metricsService=n,this.metrics=null,this.selectedTimeframe="day",this.storageUsagePercentage=0,this.storageUsageColor="success",this.systemHealth={platform:{uptime:99.8,lastOutage:new Date("2024-03-18T09:15:00"),status:"healthy"},performance:{avgResponseTime:245,errorRate:.02,activeConnections:1247},dataSync:{footballApiStatus:"connected",lastSync:new Date("2024-03-20T14:30:00"),nextSync:new Date("2024-03-20T18:00:00"),failedSyncs:0},security:{failedLogins:3,suspiciousActivity:0,lastSecurityScan:new Date("2024-03-20T02:00:00"),vulnerabilities:0}},(0,v.a)({peopleOutline:c.wx_,statsChartOutline:c.IEp,serverOutline:c.WMj,speedometerOutline:c.MrY,cloudUploadOutline:c.Fb6,trendingUpOutline:c.F0Q,trendingDownOutline:c.Cps,alertCircleOutline:c.ndb,checkmarkCircleOutline:c.gz2,timeOutline:c.CVk,syncOutline:c.E97,shieldOutline:c.uLY,warningOutline:c.bO5})}ngOnInit(){this.loadMetrics()}ngOnDestroy(){var n;null===(n=this.metricsSubscription)||void 0===n||n.unsubscribe()}refreshMetrics(n){var t=this;return(0,M.A)(function*(){try{var a;t.metrics=yield function P(o,l){const m="object"==typeof l;return new Promise((n,t)=>{const a=new F.Ms({next:r=>{n(r),a.unsubscribe()},error:t,complete:()=>{m?n(l.defaultValue):t(new y.G)}});o.subscribe(a)})}(t.metricsService.getSystemMetrics()),t.updateStorageMetrics(),null==n||null===(a=n.target)||void 0===a||a.complete()}catch(g){var r;console.error("Error refreshing metrics:",g),null==n||null===(r=n.target)||void 0===r||r.complete()}})()}loadMetrics(){this.metricsSubscription=this.metricsService.getSystemMetrics().subscribe({next:n=>{this.metrics=n,this.updateStorageMetrics()},error:n=>{console.error("Error loading metrics:",n)}})}loadHistoricalData(){this.metricsService.getMetricsHistory(this.selectedTimeframe).subscribe({next:n=>{console.log("Historical data:",n)},error:n=>{console.error("Error loading historical data:",n)}})}updateStorageMetrics(){var n;if(null!==(n=this.metrics)&&void 0!==n&&n.storage){const{usedSpace:t,totalSize:a}=this.metrics.storage;this.storageUsagePercentage=t/a*100,this.storageUsageColor=this.getStorageUsageColor(this.storageUsagePercentage)}}getPerformanceValue(n){var t;return"lastDeployment"===n?0:(null===(t=this.metrics)||void 0===t||null===(t=t.performance)||void 0===t?void 0:t[n])||0}getActiveUsersValue(n){var t;return(null===(t=this.metrics)||void 0===t||null===(t=t.activeUsers)||void 0===t?void 0:t[n])||0}getPredictionsValue(n){var t;return(null===(t=this.metrics)||void 0===t||null===(t=t.predictions)||void 0===t?void 0:t[n])||0}getBackupStatusColor(){var n;switch(null===(n=this.metrics)||void 0===n||null===(n=n.storage)||void 0===n?void 0:n.backupStatus){case"Success":return"success";case"Warning":return"warning";case"Error":return"danger";default:return"medium"}}getStorageUsageColor(n){return n>=90?"danger":n>=70?"warning":"success"}formatBytes(n){if(0===n)return"0 Bytes";const r=Math.floor(Math.log(n)/Math.log(1024));return parseFloat((n/Math.pow(1024,r)).toFixed(2))+" "+["Bytes","KB","MB","GB","TB"][r]}getSystemHealthStatusColor(n){switch(n){case"healthy":return"success";case"warning":return"warning";case"critical":return"danger";default:return"medium"}}getApiSyncStatusColor(n){switch(n){case"connected":return"success";case"disconnected":return"warning";case"error":return"danger";default:return"medium"}}getTimeAgo(n){const a=(new Date).getTime()-n.getTime(),r=Math.floor(a/6e4),g=Math.floor(r/60),f=Math.floor(g/24);return f>0?`${f}d ago`:g>0?`${g}h ago`:r>0?`${r}m ago`:"Just now"}getTimeUntil(n){const t=new Date,a=n.getTime()-t.getTime(),r=Math.floor(a/6e4),g=Math.floor(r/60);return g>0?`${g}h ${r%60}m`:r>0?`${r}m`:"Now"}}return(o=l).\u0275fac=function(n){return new(n||o)(e.rXU(O))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-metrics"]],standalone:!0,features:[e.aNF],decls:165,vars:47,consts:[["slot","fixed",3,"ionRefresh"],[1,"system-health-section","ion-padding"],[1,"health-grid"],[1,"health-card"],[1,"health-icon"],["name","server-outline",3,"color"],[1,"health-info"],[3,"color"],["class","health-detail",4,"ngIf"],["name","speedometer-outline","color","primary"],["color","secondary"],["name","sync-outline",3,"color"],[1,"health-detail"],["name","shield-outline",3,"color"],[1,"metrics-grid","ion-padding"],[1,"metric-card"],["name","speedometer-outline"],[1,"metric-item"],[1,"label"],[1,"value"],[1,"value","success"],["name","people-outline"],["name","stats-chart-outline"],["name","server-outline"],[1,"storage-usage"],[1,"usage-bar"],[3,"value","color"],[1,"usage-text"],[1,"backup-status"],[1,"metrics-history","ion-padding-horizontal"],[3,"ngModelChange","ionChange","ngModel"],["value","day"],["value","week"],["value","month"],[1,"chart-card"],[1,"chart-placeholder"]],template:function(n,t){1&n&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"System Metrics"),e.k0s()()(),e.j41(4,"ion-content")(5,"ion-refresher",0),e.bIt("ionRefresh",function(r){return t.refreshMetrics(r)}),e.nrm(6,"ion-refresher-content"),e.k0s(),e.j41(7,"div",1)(8,"ion-card")(9,"ion-card-header")(10,"ion-card-title"),e.EFF(11,"System Health & Performance"),e.k0s()(),e.j41(12,"ion-card-content")(13,"div",2)(14,"div",3)(15,"div",4),e.nrm(16,"ion-icon",5),e.k0s(),e.j41(17,"div",6)(18,"h3"),e.EFF(19,"Platform Status"),e.k0s(),e.j41(20,"p"),e.EFF(21),e.k0s(),e.j41(22,"ion-badge",7),e.EFF(23),e.nI1(24,"titlecase"),e.k0s(),e.DNE(25,b,2,1,"p",8),e.k0s()(),e.j41(26,"div",3)(27,"div",4),e.nrm(28,"ion-icon",9),e.k0s(),e.j41(29,"div",6)(30,"h3"),e.EFF(31,"Performance"),e.k0s(),e.j41(32,"p"),e.EFF(33),e.k0s(),e.j41(34,"p"),e.EFF(35),e.k0s(),e.j41(36,"ion-badge",10),e.EFF(37),e.k0s()()(),e.j41(38,"div",3)(39,"div",4),e.nrm(40,"ion-icon",11),e.k0s(),e.j41(41,"div",6)(42,"h3"),e.EFF(43,"Data Sync"),e.k0s(),e.j41(44,"p"),e.EFF(45,"Football API"),e.k0s(),e.j41(46,"ion-badge",7),e.EFF(47),e.nI1(48,"titlecase"),e.k0s(),e.j41(49,"p",12),e.EFF(50),e.k0s(),e.j41(51,"p",12),e.EFF(52),e.k0s()()(),e.j41(53,"div",3)(54,"div",4),e.nrm(55,"ion-icon",13),e.k0s(),e.j41(56,"div",6)(57,"h3"),e.EFF(58,"Security"),e.k0s(),e.j41(59,"p"),e.EFF(60),e.k0s(),e.j41(61,"p"),e.EFF(62),e.k0s(),e.j41(63,"ion-badge",7),e.EFF(64),e.k0s(),e.j41(65,"p",12),e.EFF(66),e.k0s()()()()()()(),e.j41(67,"div",14)(68,"ion-card",15)(69,"ion-card-header")(70,"ion-card-title"),e.nrm(71,"ion-icon",16),e.EFF(72," System Performance "),e.k0s()(),e.j41(73,"ion-card-content")(74,"div",17)(75,"span",18),e.EFF(76,"API Latency"),e.k0s(),e.j41(77,"span",19),e.EFF(78),e.k0s()(),e.j41(79,"div",17)(80,"span",18),e.EFF(81,"Error Rate"),e.k0s(),e.j41(82,"span",19),e.EFF(83),e.k0s()(),e.j41(84,"div",17)(85,"span",18),e.EFF(86,"Uptime"),e.k0s(),e.j41(87,"span",20),e.EFF(88),e.k0s()()()(),e.j41(89,"ion-card",15)(90,"ion-card-header")(91,"ion-card-title"),e.nrm(92,"ion-icon",21),e.EFF(93," User Activity "),e.k0s()(),e.j41(94,"ion-card-content")(95,"div",17)(96,"span",18),e.EFF(97,"Total Users"),e.k0s(),e.j41(98,"span",19),e.EFF(99),e.k0s()(),e.j41(100,"div",17)(101,"span",18),e.EFF(102,"Active Today"),e.k0s(),e.j41(103,"span",19),e.EFF(104),e.k0s()(),e.j41(105,"div",17)(106,"span",18),e.EFF(107,"Last Hour"),e.k0s(),e.j41(108,"span",19),e.EFF(109),e.k0s()()()(),e.j41(110,"ion-card",15)(111,"ion-card-header")(112,"ion-card-title"),e.nrm(113,"ion-icon",22),e.EFF(114," Predictions "),e.k0s()(),e.j41(115,"ion-card-content")(116,"div",17)(117,"span",18),e.EFF(118,"Total Predictions"),e.k0s(),e.j41(119,"span",19),e.EFF(120),e.k0s()(),e.j41(121,"div",17)(122,"span",18),e.EFF(123,"Today's Predictions"),e.k0s(),e.j41(124,"span",19),e.EFF(125),e.k0s()(),e.j41(126,"div",17)(127,"span",18),e.EFF(128,"Accuracy Rate"),e.k0s(),e.j41(129,"span",20),e.EFF(130),e.k0s()()()(),e.j41(131,"ion-card",15)(132,"ion-card-header")(133,"ion-card-title"),e.nrm(134,"ion-icon",23),e.EFF(135," Storage Status "),e.k0s()(),e.j41(136,"ion-card-content")(137,"div",24)(138,"div",25),e.nrm(139,"ion-progress-bar",26),e.k0s(),e.j41(140,"div",27),e.EFF(141),e.k0s()(),e.j41(142,"div",28)(143,"span",18),e.EFF(144,"Last Backup"),e.k0s(),e.j41(145,"span",19)(146,"ion-badge",7),e.EFF(147),e.k0s(),e.EFF(148),e.nI1(149,"date"),e.k0s()()()()(),e.j41(150,"div",29)(151,"ion-segment",30),e.mxI("ngModelChange",function(r){return e.DH7(t.selectedTimeframe,r)||(t.selectedTimeframe=r),r}),e.bIt("ionChange",function(){return t.loadHistoricalData()}),e.j41(152,"ion-segment-button",31)(153,"ion-label"),e.EFF(154,"24 Hours"),e.k0s()(),e.j41(155,"ion-segment-button",32)(156,"ion-label"),e.EFF(157,"7 Days"),e.k0s()(),e.j41(158,"ion-segment-button",33)(159,"ion-label"),e.EFF(160,"30 Days"),e.k0s()()(),e.j41(161,"ion-card",34)(162,"ion-card-content")(163,"div",35),e.EFF(164," Chart visualization will be implemented with a charting library "),e.k0s()()()()()),2&n&&(e.R7$(16),e.Y8G("color",t.getSystemHealthStatusColor(t.systemHealth.platform.status)),e.R7$(5),e.SpI("",t.systemHealth.platform.uptime,"% Uptime"),e.R7$(),e.Y8G("color",t.getSystemHealthStatusColor(t.systemHealth.platform.status)),e.R7$(),e.SpI(" ",e.bMT(24,40,t.systemHealth.platform.status)," "),e.R7$(2),e.Y8G("ngIf",t.systemHealth.platform.lastOutage),e.R7$(8),e.SpI("",t.systemHealth.performance.avgResponseTime,"ms avg"),e.R7$(2),e.SpI("",t.systemHealth.performance.errorRate,"% error rate"),e.R7$(2),e.SpI(" ",t.systemHealth.performance.activeConnections," active "),e.R7$(3),e.Y8G("color",t.getApiSyncStatusColor(t.systemHealth.dataSync.footballApiStatus)),e.R7$(6),e.Y8G("color",t.getApiSyncStatusColor(t.systemHealth.dataSync.footballApiStatus)),e.R7$(),e.SpI(" ",e.bMT(48,42,t.systemHealth.dataSync.footballApiStatus)," "),e.R7$(3),e.SpI(" Last sync: ",t.getTimeAgo(t.systemHealth.dataSync.lastSync)," "),e.R7$(2),e.SpI(" Next sync: ",t.getTimeUntil(t.systemHealth.dataSync.nextSync)," "),e.R7$(3),e.Y8G("color",t.systemHealth.security.vulnerabilities>0?"danger":"success"),e.R7$(5),e.SpI("",t.systemHealth.security.failedLogins," failed logins"),e.R7$(2),e.SpI("",t.systemHealth.security.suspiciousActivity," suspicious activities"),e.R7$(),e.Y8G("color",t.systemHealth.security.vulnerabilities>0?"danger":"success"),e.R7$(),e.SpI(" ",t.systemHealth.security.vulnerabilities," vulnerabilities "),e.R7$(2),e.SpI(" Last scan: ",t.getTimeAgo(t.systemHealth.security.lastSecurityScan)," "),e.R7$(11),e.AVh("warning",t.getPerformanceValue("apiLatency")>200),e.R7$(),e.SpI(" ",t.getPerformanceValue("apiLatency").toFixed(0),"ms "),e.R7$(4),e.AVh("error",t.getPerformanceValue("errorRate")>1),e.R7$(),e.SpI(" ",t.getPerformanceValue("errorRate").toFixed(2),"% "),e.R7$(5),e.SpI(" ",t.getPerformanceValue("uptime").toFixed(2),"% "),e.R7$(11),e.JRh(t.getActiveUsersValue("total")),e.R7$(5),e.JRh(t.getActiveUsersValue("today")),e.R7$(5),e.JRh(t.getActiveUsersValue("lastHour")),e.R7$(11),e.JRh(t.getPredictionsValue("total")),e.R7$(5),e.JRh(t.getPredictionsValue("today")),e.R7$(5),e.SpI(" ",t.getPredictionsValue("accuracy"),"% "),e.R7$(9),e.Y8G("value",t.storageUsagePercentage/100)("color",t.storageUsageColor),e.R7$(2),e.Lme(" ",t.formatBytes((null==t.metrics||null==t.metrics.storage?null:t.metrics.storage.usedSpace)||0)," / ",t.formatBytes((null==t.metrics||null==t.metrics.storage?null:t.metrics.storage.totalSize)||0)," "),e.R7$(5),e.Y8G("color",t.getBackupStatusColor()),e.R7$(),e.SpI(" ",(null==t.metrics||null==t.metrics.storage?null:t.metrics.storage.backupStatus)||"N/A"," "),e.R7$(),e.SpI(" ",e.i5U(149,44,null==t.metrics||null==t.metrics.storage?null:t.metrics.storage.lastBackup,"medium")," "),e.R7$(3),e.R50("ngModel",t.selectedTimeframe))},dependencies:[d.MD,d.bT,d.PV,d.vh,u.YN,u.BC,u.vS,i.eU,i.ai,i.BC,i.W9,i.b_,i.ME,i.tN,i.I9,i.To,i.Ki,i.In,i.iq,i.Gp,i.eP,i.he,i.FH],styles:["[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]{--background: var(--ion-color-light)}.system-health-section[_ngcontent-%COMP%]{margin-bottom:1rem}.system-health-section[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{margin:0;border-radius:12px;box-shadow:0 4px 6px #0000001a}.health-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:1rem}.health-card[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:1rem;padding:1rem;border-left:4px solid var(--ion-color-primary);background:var(--ion-color-light);border-radius:8px;height:100%}.health-icon[_ngcontent-%COMP%]{font-size:2rem;padding:.75rem;border-radius:50%;background:var(--ion-color-step-50);display:flex;align-items:center;justify-content:center;min-width:3.5rem;height:3.5rem}.health-info[_ngcontent-%COMP%]{flex:1}.health-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 .5rem;font-size:1.1rem;font-weight:600;color:var(--ion-color-dark)}.health-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.25rem 0;color:var(--ion-color-medium);font-size:.9rem}.health-detail[_ngcontent-%COMP%]{font-size:.8rem!important;color:var(--ion-color-medium-shade)!important;margin-top:.5rem!important}@media (max-width: 768px){.health-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.health-card[_ngcontent-%COMP%]{padding:.75rem}.health-icon[_ngcontent-%COMP%]{font-size:1.5rem;min-width:2.5rem;height:2.5rem}.health-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1rem}}.metrics-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:1rem;margin-bottom:2rem}.metric-card[_ngcontent-%COMP%]{margin:0;border-radius:12px;box-shadow:0 4px 6px #0000001a}.metric-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]{padding:1rem}.metric-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;display:flex;align-items:center;gap:.5rem}.metric-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.25rem;color:var(--ion-color-primary)}.metric-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{padding:1rem}.metric-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.metric-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.metric-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:var(--ion-color-medium);font-size:.9rem}.metric-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:600;font-size:1.1rem;color:var(--ion-color-dark)}.metric-item[_ngcontent-%COMP%]   .value.success[_ngcontent-%COMP%]{color:var(--ion-color-success)}.metric-item[_ngcontent-%COMP%]   .value.warning[_ngcontent-%COMP%]{color:var(--ion-color-warning)}.metric-item[_ngcontent-%COMP%]   .value.error[_ngcontent-%COMP%]{color:var(--ion-color-danger)}.storage-usage[_ngcontent-%COMP%]{margin-bottom:1rem}.storage-usage[_ngcontent-%COMP%]   .usage-bar[_ngcontent-%COMP%]{margin-bottom:.5rem}.storage-usage[_ngcontent-%COMP%]   .usage-bar[_ngcontent-%COMP%]   ion-progress-bar[_ngcontent-%COMP%]{height:8px;border-radius:4px;overflow:hidden}.storage-usage[_ngcontent-%COMP%]   .usage-text[_ngcontent-%COMP%]{font-size:.9rem;color:var(--ion-color-medium);text-align:right}.backup-status[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.backup-status[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:var(--ion-color-medium);font-size:.9rem}.backup-status[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:.9rem}.backup-status[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]{text-transform:capitalize;font-weight:500}.metrics-history[_ngcontent-%COMP%]{margin-bottom:2rem}.metrics-history[_ngcontent-%COMP%]   ion-segment[_ngcontent-%COMP%]{margin-bottom:1rem;background:#fff;border-radius:8px;padding:4px}.metrics-history[_ngcontent-%COMP%]   .chart-card[_ngcontent-%COMP%]{margin:0;border-radius:12px}.metrics-history[_ngcontent-%COMP%]   .chart-card[_ngcontent-%COMP%]   .chart-placeholder[_ngcontent-%COMP%]{height:300px;display:flex;align-items:center;justify-content:center;color:var(--ion-color-medium);font-style:italic}@media (max-width: 768px){.metrics-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.metric-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{font-size:1rem}.metric-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:1rem}}"]}),l})()}}]);