{"version":3,"file":"src_app_platforms_player_pages_group-standings_group-standings_page_ts.js","mappings":"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","sources":["./src/app/platforms/player/pages/group-standings/group-standings.page.ts","./src/app/platforms/player/pages/group-standings/group-standings.page.html"],"sourcesContent":["import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { CommonModule } from '@angular/common';\nimport {\n  IonHeader,\n  IonToolbar,\n  IonTitle,\n  IonContent,\n  IonCard,\n  IonCardHeader,\n  IonCardTitle,\n  IonCardContent,\n  IonList,\n  IonItem,\n  IonLabel,\n  IonBadge,\n  IonIcon,\n  IonButton,\n  IonButtons,\n  IonBackButton\n} from '@ionic/angular/standalone';\nimport { addIcons } from 'ionicons';\nimport {\n  trophyOutline,\n  arrowUpOutline,\n  arrowDownOutline,\n  removeOutline,\n  peopleOutline,\n  arrowBackOutline\n} from 'ionicons/icons';\nimport { GroupService, Standing } from '@core/services/group.service';\nimport { AuthService } from '@core/services/auth.service';\nimport { Subscription } from 'rxjs';\n\ninterface GroupDetails {\n  id: string;\n  name: string;\n  code: string;\n  memberCount: number;\n  type: 'casual' | 'prize';\n}\n\n@Component({\n  selector: 'app-group-standings',\n  templateUrl: './group-standings.page.html',\n  styleUrls: ['./group-standings.page.scss'],\n  standalone: true,\n  imports: [\n    IonHeader,\n    IonToolbar,\n    IonTitle,\n    IonContent,\n    IonCard,\n    IonCardHeader,\n    IonCardTitle,\n    IonCardContent,\n    IonList,\n    IonItem,\n    IonLabel,\n    IonBadge,\n    IonIcon,\n    IonButton,\n    IonButtons,\n    IonBackButton,\n    CommonModule\n  ],\n})\nexport class GroupStandingsPage implements OnInit, OnDestroy {\n  groupId: string = '';\n  currentUserId: string | null = null;\n  group: GroupDetails | null = null;\n  standings: Standing[] = [];\n  userPosition: number | null = null;\n  private groupsSubscription?: Subscription;\n\n  constructor(\n    private router: Router,\n    private route: ActivatedRoute,\n    private groupService: GroupService,\n    private authService: AuthService\n  ) {\n    addIcons({\n      trophyOutline,\n      arrowUpOutline,\n      arrowDownOutline,\n      removeOutline,\n      peopleOutline,\n      arrowBackOutline\n    });\n  }\n\n  ngOnInit() {\n    this.groupId = this.route.snapshot.paramMap.get('groupId') || '';\n    this.currentUserId = this.authService.getCurrentUser()?.id || null;\n    \n    this.loadGroupStandings();\n    \n    // Subscribe to group updates\n    this.groupsSubscription = this.groupService.groups$.subscribe(() => {\n      this.loadGroupStandings();\n    });\n  }\n\n  ngOnDestroy() {\n    if (this.groupsSubscription) {\n      this.groupsSubscription.unsubscribe();\n    }\n  }\n\n  private loadGroupStandings() {\n    // Use the new optimized method from group service\n    const groupWithStandings = this.groupService.getGroupWithStandings(this.groupId);\n    \n    if (groupWithStandings) {\n      this.group = groupWithStandings.group;\n      this.standings = groupWithStandings.leaderboard;\n      this.userPosition = groupWithStandings.userPosition;\n    } else {\n      // Group not found, navigate back\n      this.router.navigate(['/player/standings']);\n    }\n  }\n\n  getPositionChange(current: number, previous: number): string {\n    if (current === previous) return 'same';\n    return current < previous ? 'up' : 'down';\n  }\n\n  getPositionIcon(change: string): string {\n    switch (change) {\n      case 'up':\n        return 'arrow-up-outline';\n      case 'down':\n        return 'arrow-down-outline';\n      default:\n        return 'remove-outline';\n    }\n  }\n\n  getPositionColor(change: string): string {\n    switch (change) {\n      case 'up':\n        return 'success';\n      case 'down':\n        return 'danger';\n      default:\n        return 'medium';\n    }\n  }\n\n  isCurrentUser(userId: string): boolean {\n    return userId === this.currentUserId;\n  }\n\n  goBack() {\n    this.router.navigate(['/player/standings']);\n  }\n} ","<ion-header>\n  <ion-toolbar>\n    <ion-buttons slot=\"start\">\n      <ion-back-button \n        text=\"Groups\" \n        defaultHref=\"/player/standings\"\n        (click)=\"goBack()\">\n      </ion-back-button>\n    </ion-buttons>\n    <ion-title *ngIf=\"group\">{{ group.name }}</ion-title>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content class=\"ion-padding\">\n  <!-- Group Info Card -->\n  <ion-card *ngIf=\"group\" class=\"group-info-card\">\n    <ion-card-header>\n      <ion-card-title>\n        {{ group.name }}\n        <ion-badge *ngIf=\"userPosition\" color=\"primary\" class=\"position-badge\">\n          Your Position: #{{ userPosition }}\n        </ion-badge>\n      </ion-card-title>\n      <div class=\"group-details\">\n        <ion-badge color=\"medium\">{{ group.memberCount }} members</ion-badge>\n        <ion-badge [color]=\"group.type === 'prize' ? 'primary' : 'secondary'\">\n          {{ group.type === 'prize' ? 'Prize Pool' : 'Casual' }}\n        </ion-badge>\n        <span class=\"group-code\">Code: {{ group.code }}</span>\n      </div>\n    </ion-card-header>\n  </ion-card>\n\n  <!-- Standings Table -->\n  <ion-card class=\"standings-card\">\n    <ion-card-header>\n      <ion-card-title>\n        <ion-icon name=\"trophy-outline\"></ion-icon>\n        Leaderboard\n      </ion-card-title>\n    </ion-card-header>\n    <ion-card-content>\n      <!-- Table Header -->\n      <div class=\"table-header\">\n        <div class=\"position-col\">Pos</div>\n        <div class=\"name-col\">Name</div>\n        <div class=\"played-col\">Played</div>\n        <div class=\"scores-col\">Scores</div>\n        <div class=\"results-col\">Results</div>\n        <div class=\"joker-col\">Joker</div>\n        <div class=\"points-col\">Points</div>\n      </div>\n\n      <!-- Table Body -->\n      <div class=\"table-body\">\n        <div \n          class=\"table-row\" \n          *ngFor=\"let player of standings\"\n          [class.current-user]=\"isCurrentUser(player.userId)\">\n          \n          <div class=\"position-col\">\n            {{ player.position }}\n            <ion-icon \n              [name]=\"getPositionIcon(getPositionChange(player.position, player.previousPosition))\"\n              [color]=\"getPositionColor(getPositionChange(player.position, player.previousPosition))\"\n              class=\"position-change-icon\">\n            </ion-icon>\n          </div>\n          \n          <div class=\"name-col\">\n            {{ player.name }}\n            <ion-badge *ngIf=\"isCurrentUser(player.userId)\" color=\"primary\" class=\"you-badge\">YOU</ion-badge>\n          </div>\n          \n          <div class=\"played-col\">{{ player.played }}</div>\n          <div class=\"scores-col\">{{ player.correctScores }}</div>\n          <div class=\"results-col\">{{ player.correctResults }}</div>\n          <div class=\"joker-col\">{{ player.jokerUsed }}/2</div>\n          <div class=\"points-col\">{{ player.points }}</div>\n        </div>\n      </div>\n\n      <!-- Empty State -->\n      <div *ngIf=\"standings.length === 0\" class=\"empty-state\">\n        <ion-icon name=\"people-outline\" size=\"large\" color=\"medium\"></ion-icon>\n        <h3>No Standings Available</h3>\n        <p>Standings will appear once predictions are made.</p>\n      </div>\n    </ion-card-content>\n  </ion-card>\n</ion-content> "],"names":["CommonModule","IonHeader","IonToolbar","IonTitle","IonContent","IonCard","IonCardHeader","IonCardTitle","IonCardContent","IonBadge","IonIcon","IonButtons","IonBackButton","addIcons","trophyOutline","arrowUpOutline","arrowDownOutline","removeOutline","peopleOutline","arrowBackOutline","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate","ctx_r0","group","name","ɵɵtextInterpolate1","userPosition","ɵɵtemplate","GroupStandingsPage_ion_card_6_ion_badge_4_Template","ɵɵproperty","memberCount","type","code","ɵɵelement","GroupStandingsPage_div_29_ion_badge_6_Template","ɵɵclassProp","isCurrentUser","player_r2","userId","position","getPositionIcon","getPositionChange","previousPosition","getPositionColor","played","correctScores","correctResults","jokerUsed","points","GroupStandingsPage","constructor","router","route","groupService","authService","groupId","currentUserId","standings","ngOnInit","_this$authService$get","snapshot","paramMap","get","getCurrentUser","id","loadGroupStandings","groupsSubscription","groups$","subscribe","ngOnDestroy","unsubscribe","groupWithStandings","getGroupWithStandings","leaderboard","navigate","current","previous","change","goBack","ɵɵdirectiveInject","i1","Router","ActivatedRoute","i2","GroupService","i3","AuthService","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","GroupStandingsPage_Template","rf","ctx","ɵɵlistener","GroupStandingsPage_Template_ion_back_button_click_3_listener","GroupStandingsPage_ion_title_4_Template","GroupStandingsPage_ion_card_6_Template","GroupStandingsPage_div_29_Template","GroupStandingsPage_div_30_Template","length","i4","NgForOf","NgIf","styles"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}