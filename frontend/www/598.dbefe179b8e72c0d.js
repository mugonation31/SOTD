"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[598],{5598:(R,m,a)=>{a.r(m),a.d(m,{SettingsPage:()=>k});var _=a(467),s=a(5050),f=a(177),u=a(4341),h=a(5079),l=a(5873),e=a(4438),P=a(8199),S=a(5423),j=a(8010);function M(r,c){if(1&r&&(e.qex(0),e.nrm(1,"img",28),e.bVm()),2&r){const i=e.XpG(2);e.R7$(),e.Y8G("src",i.profilePicture,e.B4B)}}function C(r,c){1&r&&e.nrm(0,"ion-icon",29)}function v(r,c){if(1&r){const i=e.RV6();e.j41(0,"div")(1,"ion-card")(2,"ion-card-content")(3,"div",9)(4,"div",10)(5,"div",11),e.DNE(6,M,2,1,"ng-container",12)(7,C,1,0,"ng-template",null,0,e.C5r),e.k0s(),e.j41(9,"div",13),e.bIt("click",function(){e.eBV(i);const t=e.sdS(12);return e.Njj(t.click())}),e.nrm(10,"ion-icon",14),e.k0s(),e.j41(11,"input",15,1),e.bIt("change",function(t){e.eBV(i);const o=e.XpG();return e.Njj(o.onFileSelected(t))}),e.k0s()()(),e.j41(13,"div",16)(14,"ion-item")(15,"ion-label",17),e.EFF(16,"Name"),e.k0s(),e.j41(17,"ion-input",18),e.mxI("ngModelChange",function(t){e.eBV(i);const o=e.XpG();return e.DH7(o.profile.name,t)||(o.profile.name=t),e.Njj(t)}),e.k0s()(),e.j41(18,"ion-item")(19,"ion-label",17),e.EFF(20,"Email"),e.k0s(),e.j41(21,"ion-input",19),e.mxI("ngModelChange",function(t){e.eBV(i);const o=e.XpG();return e.DH7(o.profile.email,t)||(o.profile.email=t),e.Njj(t)}),e.k0s()(),e.j41(22,"ion-item")(23,"ion-label",17),e.EFF(24,"Phone"),e.k0s(),e.j41(25,"ion-input",20),e.mxI("ngModelChange",function(t){e.eBV(i);const o=e.XpG();return e.DH7(o.profile.phone,t)||(o.profile.phone=t),e.Njj(t)}),e.k0s()(),e.j41(26,"ion-item")(27,"ion-label",17),e.EFF(28,"Role"),e.k0s(),e.j41(29,"ion-input",21),e.mxI("ngModelChange",function(t){e.eBV(i);const o=e.XpG();return e.DH7(o.profile.role,t)||(o.profile.role=t),e.Njj(t)}),e.k0s()(),e.j41(30,"ion-item")(31,"ion-label",17),e.EFF(32,"Joined Date"),e.k0s(),e.j41(33,"ion-input",21),e.mxI("ngModelChange",function(t){e.eBV(i);const o=e.XpG();return e.DH7(o.profile.joinedDate,t)||(o.profile.joinedDate=t),e.Njj(t)}),e.k0s()(),e.j41(34,"ion-button",22),e.bIt("click",function(){e.eBV(i);const t=e.XpG();return e.Njj(t.updateProfile())}),e.EFF(35," Update Profile "),e.k0s()()()(),e.j41(36,"ion-card")(37,"ion-card-header")(38,"ion-card-title"),e.nrm(39,"ion-icon",23),e.EFF(40," Change Password "),e.k0s()(),e.j41(41,"ion-card-content")(42,"div",24)(43,"ion-item")(44,"ion-label",17),e.EFF(45,"Current Password"),e.k0s(),e.j41(46,"ion-input",25),e.mxI("ngModelChange",function(t){e.eBV(i);const o=e.XpG();return e.DH7(o.passwordForm.current,t)||(o.passwordForm.current=t),e.Njj(t)}),e.k0s()(),e.j41(47,"ion-item")(48,"ion-label",17),e.EFF(49,"New Password"),e.k0s(),e.j41(50,"ion-input",25),e.mxI("ngModelChange",function(t){e.eBV(i);const o=e.XpG();return e.DH7(o.passwordForm.new,t)||(o.passwordForm.new=t),e.Njj(t)}),e.k0s()(),e.j41(51,"ion-item")(52,"ion-label",17),e.EFF(53,"Confirm New Password"),e.k0s(),e.j41(54,"ion-input",25),e.mxI("ngModelChange",function(t){e.eBV(i);const o=e.XpG();return e.DH7(o.passwordForm.confirm,t)||(o.passwordForm.confirm=t),e.Njj(t)}),e.k0s()(),e.j41(55,"ion-button",22),e.bIt("click",function(){e.eBV(i);const t=e.XpG();return e.Njj(t.changePassword())}),e.EFF(56," Change Password "),e.k0s()()()(),e.j41(57,"ion-button",26),e.bIt("click",function(){e.eBV(i);const t=e.XpG();return e.Njj(t.logout())}),e.nrm(58,"ion-icon",27),e.EFF(59," Logout "),e.k0s()()}if(2&r){const i=e.sdS(8),n=e.XpG();e.R7$(6),e.Y8G("ngIf",n.profilePicture)("ngIfElse",i),e.R7$(11),e.R50("ngModel",n.profile.name),e.R7$(4),e.R50("ngModel",n.profile.email),e.R7$(4),e.R50("ngModel",n.profile.phone),e.R7$(4),e.R50("ngModel",n.profile.role),e.R7$(4),e.R50("ngModel",n.profile.joinedDate),e.R7$(13),e.R50("ngModel",n.passwordForm.current),e.R7$(4),e.R50("ngModel",n.passwordForm.new),e.R7$(4),e.R50("ngModel",n.passwordForm.confirm)}}function x(r,c){1&r&&(e.j41(0,"span",46),e.EFF(1," (Must equal 100%) "),e.k0s())}function b(r,c){if(1&r){const i=e.RV6();e.j41(0,"div",42)(1,"ion-item")(2,"ion-label",17),e.EFF(3,"Correct Score (%)"),e.k0s(),e.j41(4,"ion-input",43),e.mxI("ngModelChange",function(t){e.eBV(i);const o=e.XpG(2);return e.DH7(o.groupSettings.customPoints.correctScore,t)||(o.groupSettings.customPoints.correctScore=t),e.Njj(t)}),e.bIt("ionChange",function(){e.eBV(i);const t=e.XpG(2);return e.Njj(t.validatePointsTotal())}),e.k0s()(),e.j41(5,"ion-item")(6,"ion-label",17),e.EFF(7,"Correct Result (%)"),e.k0s(),e.j41(8,"ion-input",43),e.mxI("ngModelChange",function(t){e.eBV(i);const o=e.XpG(2);return e.DH7(o.groupSettings.customPoints.correctResult,t)||(o.groupSettings.customPoints.correctResult=t),e.Njj(t)}),e.bIt("ionChange",function(){e.eBV(i);const t=e.XpG(2);return e.Njj(t.validatePointsTotal())}),e.k0s()(),e.j41(9,"ion-item")(10,"ion-label",17),e.EFF(11,"Participation (%)"),e.k0s(),e.j41(12,"ion-input",43),e.mxI("ngModelChange",function(t){e.eBV(i);const o=e.XpG(2);return e.DH7(o.groupSettings.customPoints.participation,t)||(o.groupSettings.customPoints.participation=t),e.Njj(t)}),e.bIt("ionChange",function(){e.eBV(i);const t=e.XpG(2);return e.Njj(t.validatePointsTotal())}),e.k0s()(),e.j41(13,"div",44),e.EFF(14),e.DNE(15,x,2,0,"span",45),e.k0s()()}if(2&r){const i=e.XpG(2);e.R7$(4),e.R50("ngModel",i.groupSettings.customPoints.correctScore),e.R7$(4),e.R50("ngModel",i.groupSettings.customPoints.correctResult),e.R7$(4),e.R50("ngModel",i.groupSettings.customPoints.participation),e.R7$(2),e.SpI(" Total: ",i.calculatePointsTotal(),"% "),e.R7$(),e.Y8G("ngIf",100!==i.calculatePointsTotal())}}function F(r,c){if(1&r){const i=e.RV6();e.j41(0,"div")(1,"ion-card")(2,"ion-card-header")(3,"ion-card-title"),e.nrm(4,"ion-icon",30),e.EFF(5," Group Settings "),e.k0s()(),e.j41(6,"ion-card-content")(7,"ion-item")(8,"ion-label"),e.EFF(9,"Group Visibility"),e.k0s(),e.j41(10,"ion-select",31),e.mxI("ngModelChange",function(t){e.eBV(i);const o=e.XpG();return e.DH7(o.groupSettings.visibility,t)||(o.groupSettings.visibility=t),e.Njj(t)}),e.j41(11,"ion-select-option",32),e.EFF(12,"Public (Searchable)"),e.k0s(),e.j41(13,"ion-select-option",33),e.EFF(14,"Private (Code Only)"),e.k0s()()(),e.j41(15,"ion-item")(16,"ion-label"),e.EFF(17,"Show Leaderboard"),e.k0s(),e.j41(18,"ion-toggle",31),e.mxI("ngModelChange",function(t){e.eBV(i);const o=e.XpG();return e.DH7(o.groupSettings.showLeaderboard,t)||(o.groupSettings.showLeaderboard=t),e.Njj(t)}),e.k0s()(),e.j41(19,"ion-item")(20,"ion-label"),e.EFF(21,"Enable Group Chat"),e.k0s(),e.j41(22,"ion-toggle",31),e.mxI("ngModelChange",function(t){e.eBV(i);const o=e.XpG();return e.DH7(o.groupSettings.enableGroupChat,t)||(o.groupSettings.enableGroupChat=t),e.Njj(t)}),e.k0s()()()(),e.j41(23,"ion-card")(24,"ion-card-header")(25,"ion-card-title"),e.nrm(26,"ion-icon",34),e.EFF(27," Prediction Settings "),e.k0s()(),e.j41(28,"ion-card-content")(29,"ion-item")(30,"ion-label"),e.EFF(31,"Points Distribution"),e.k0s(),e.j41(32,"ion-select",35),e.mxI("ngModelChange",function(t){e.eBV(i);const o=e.XpG();return e.DH7(o.groupSettings.pointsSystem,t)||(o.groupSettings.pointsSystem=t),e.Njj(t)}),e.bIt("ionChange",function(){e.eBV(i);const t=e.XpG();return e.Njj(t.onPointsSystemChange())}),e.j41(33,"ion-select-option",36),e.EFF(34,"Standard (60-30-10)"),e.k0s(),e.j41(35,"ion-select-option",37),e.EFF(36,"Custom Split"),e.k0s()()(),e.DNE(37,b,16,5,"div",38),e.j41(38,"ion-item")(39,"ion-label"),e.EFF(40,"Joker Usage"),e.k0s(),e.j41(41,"ion-select",31),e.mxI("ngModelChange",function(t){e.eBV(i);const o=e.XpG();return e.DH7(o.groupSettings.jokerRules,t)||(o.groupSettings.jokerRules=t),e.Njj(t)}),e.j41(42,"ion-select-option",39),e.EFF(43,"Once per season"),e.k0s(),e.j41(44,"ion-select-option",40),e.EFF(45,"Twice per season"),e.k0s()()()()(),e.j41(46,"ion-card")(47,"ion-card-header")(48,"ion-card-title"),e.nrm(49,"ion-icon",41),e.EFF(50," Notification Preferences "),e.k0s()(),e.j41(51,"ion-card-content")(52,"ion-item")(53,"ion-label"),e.EFF(54,"Email Notifications"),e.k0s(),e.j41(55,"ion-toggle",31),e.mxI("ngModelChange",function(t){e.eBV(i);const o=e.XpG();return e.DH7(o.groupSettings.notificationPreferences.emailNotifications,t)||(o.groupSettings.notificationPreferences.emailNotifications=t),e.Njj(t)}),e.k0s()(),e.j41(56,"ion-item")(57,"ion-label"),e.EFF(58,"Prediction Reminders"),e.k0s(),e.j41(59,"ion-toggle",31),e.mxI("ngModelChange",function(t){e.eBV(i);const o=e.XpG();return e.DH7(o.groupSettings.notificationPreferences.predictionReminders,t)||(o.groupSettings.notificationPreferences.predictionReminders=t),e.Njj(t)}),e.k0s()(),e.j41(60,"ion-item")(61,"ion-label"),e.EFF(62,"Result Notifications"),e.k0s(),e.j41(63,"ion-toggle",31),e.mxI("ngModelChange",function(t){e.eBV(i);const o=e.XpG();return e.DH7(o.groupSettings.notificationPreferences.resultNotifications,t)||(o.groupSettings.notificationPreferences.resultNotifications=t),e.Njj(t)}),e.k0s()(),e.j41(64,"ion-item")(65,"ion-label"),e.EFF(66,"Member Updates"),e.k0s(),e.j41(67,"ion-toggle",31),e.mxI("ngModelChange",function(t){e.eBV(i);const o=e.XpG();return e.DH7(o.groupSettings.notificationPreferences.memberUpdates,t)||(o.groupSettings.notificationPreferences.memberUpdates=t),e.Njj(t)}),e.k0s()()()(),e.j41(68,"ion-button",22),e.bIt("click",function(){e.eBV(i);const t=e.XpG();return e.Njj(t.saveSettings())}),e.EFF(69," Save Settings "),e.k0s()()}if(2&r){const i=e.XpG();e.R7$(10),e.R50("ngModel",i.groupSettings.visibility),e.R7$(8),e.R50("ngModel",i.groupSettings.showLeaderboard),e.R7$(4),e.R50("ngModel",i.groupSettings.enableGroupChat),e.R7$(10),e.R50("ngModel",i.groupSettings.pointsSystem),e.R7$(5),e.Y8G("ngIf","custom"===i.groupSettings.pointsSystem),e.R7$(4),e.R50("ngModel",i.groupSettings.jokerRules),e.R7$(14),e.R50("ngModel",i.groupSettings.notificationPreferences.emailNotifications),e.R7$(4),e.R50("ngModel",i.groupSettings.notificationPreferences.predictionReminders),e.R7$(4),e.R50("ngModel",i.groupSettings.notificationPreferences.resultNotifications),e.R7$(4),e.R50("ngModel",i.groupSettings.notificationPreferences.memberUpdates)}}let k=(()=>{var r;class c{constructor(n,t,o){this.router=n,this.toastService=t,this.authService=o,this.activeTab="profile",this.profilePicture=null,this.profile={name:"John Smith",email:"john.smith@groupadmin.com",phone:"+44 7123 456789",role:"Group Admin",joinedDate:"2024-01-01"},this.passwordForm={current:"",new:"",confirm:""},this.groupSettings={visibility:"private",showLeaderboard:!0,enableGroupChat:!0,pointsSystem:"standard",jokerRules:"once",customPoints:{correctScore:60,correctResult:30,participation:10},notificationPreferences:{emailNotifications:!0,predictionReminders:!0,resultNotifications:!0,memberUpdates:!0}},(0,h.a)({personCircleOutline:l.kki,keyOutline:l.uNo,notificationsOutline:l.rqk,globeOutline:l.OQB,mailOutline:l.SM1,phonePortraitOutline:l.g_S,logOutOutline:l.z_V,settingsOutline:l.s8q,peopleOutline:l.wx_,footballOutline:l.gMr,cameraOutline:l.GOB})}onFileSelected(n){var t=this;return(0,_.A)(function*(){var o;const g=null===(o=n.target.files)||void 0===o?void 0:o[0];if(g)if(g.type.startsWith("image/"))if(g.size>5242880)yield t.toastService.showToast("Image must be less than 5MB","error");else try{const d=new FileReader;d.onload=E=>{var p;t.profilePicture=null===(p=E.target)||void 0===p?void 0:p.result},d.readAsDataURL(g),yield t.simulateUpload(),yield t.toastService.showToast("Profile picture updated successfully","success")}catch{yield t.toastService.showToast("Error uploading profile picture","error"),t.profilePicture=null}else yield t.toastService.showToast("Please select an image file","error")})()}simulateUpload(){return(0,_.A)(function*(){yield new Promise(n=>setTimeout(n,1e3))})()}updateProfile(){var n=this;return(0,_.A)(function*(){try{yield n.toastService.showToast("Profile updated successfully","success")}catch{yield n.toastService.showToast("Error updating profile","error")}})()}changePassword(){var n=this;return(0,_.A)(function*(){if(n.passwordForm.current)if(n.passwordForm.new===n.passwordForm.confirm)try{yield n.toastService.showToast("Password changed successfully","success"),n.passwordForm={current:"",new:"",confirm:""}}catch{yield n.toastService.showToast("Error changing password","error")}else yield n.toastService.showToast("New passwords do not match","error");else yield n.toastService.showToast("Current password is required","error")})()}onPointsSystemChange(){"standard"===this.groupSettings.pointsSystem&&(this.groupSettings.customPoints={correctScore:60,correctResult:30,participation:10})}calculatePointsTotal(){const{correctScore:n,correctResult:t,participation:o}=this.groupSettings.customPoints;return n+t+o}validatePointsTotal(){100!==this.calculatePointsTotal()&&this.toastService.showToast("Points total must equal 100%","warning")}saveSettings(){var n=this;return(0,_.A)(function*(){if("custom"!==n.groupSettings.pointsSystem||100===n.calculatePointsTotal())try{yield n.toastService.showToast("Settings saved successfully","success")}catch{yield n.toastService.showToast("Error saving settings","error")}else yield n.toastService.showToast("Points total must equal 100% before saving","error")})()}logout(){var n=this;return(0,_.A)(function*(){try{n.authService.markFirstLoginComplete(),n.authService.logout(),yield n.toastService.showToast("Logged out successfully","success"),n.router.navigate(["/auth/login"],{replaceUrl:!0,queryParams:{}})}catch(t){console.error("Logout error:",t),yield n.toastService.showToast("Error during logout","error")}})()}}return(r=c).\u0275fac=function(n){return new(n||r)(e.rXU(P.Ix),e.rXU(S.f),e.rXU(j.u))},r.\u0275cmp=e.VBU({type:r,selectors:[["app-settings"]],standalone:!0,features:[e.aNF],decls:16,vars:3,consts:[["defaultProfileIcon",""],["fileInput",""],[1,"ion-padding"],[1,"ion-margin-bottom",3,"ngModelChange","ngModel"],["value","profile"],["name","person-circle-outline"],["value","settings"],["name","settings-outline"],[4,"ngIf"],[1,"profile-picture-section"],[1,"profile-picture-container"],[1,"profile-picture"],[4,"ngIf","ngIfElse"],[1,"camera-icon",3,"click"],["name","camera-outline"],["type","file","accept","image/*",2,"display","none",3,"change"],[1,"profile-info-section"],["position","stacked"],["placeholder","Your name",3,"ngModelChange","ngModel"],["type","email","readonly","",3,"ngModelChange","ngModel"],["type","tel","placeholder","Your phone number",3,"ngModelChange","ngModel"],["readonly","",3,"ngModelChange","ngModel"],["expand","block",1,"ion-margin-top",3,"click"],["name","key-outline"],[1,"form-section"],["type","password",3,"ngModelChange","ngModel"],["expand","block","color","danger",1,"ion-margin-top",3,"click"],["name","log-out-outline","slot","start"],["alt","Profile Picture",3,"src"],["name","person-outline",1,"default-profile-icon"],["name","people-outline"],[3,"ngModelChange","ngModel"],["value","public"],["value","private"],["name","football-outline"],[3,"ngModelChange","ionChange","ngModel"],["value","standard"],["value","custom"],["class","custom-points",4,"ngIf"],["value","once"],["value","twice"],["name","notifications-outline"],[1,"custom-points"],["type","number","min","0","max","100",3,"ngModelChange","ionChange","ngModel"],[1,"points-total"],["class","error-text",4,"ngIf"],[1,"error-text"]],template:function(n,t){1&n&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Settings"),e.k0s()()(),e.j41(4,"ion-content",2)(5,"ion-segment",3),e.mxI("ngModelChange",function(g){return e.DH7(t.activeTab,g)||(t.activeTab=g),g}),e.j41(6,"ion-segment-button",4),e.nrm(7,"ion-icon",5),e.j41(8,"ion-label"),e.EFF(9,"Profile"),e.k0s()(),e.j41(10,"ion-segment-button",6),e.nrm(11,"ion-icon",7),e.j41(12,"ion-label"),e.EFF(13,"Settings"),e.k0s()()(),e.DNE(14,v,60,10,"div",8)(15,F,70,10,"div",8),e.k0s()),2&n&&(e.R7$(5),e.R50("ngModel",t.activeTab),e.R7$(9),e.Y8G("ngIf","profile"===t.activeTab),e.R7$(),e.Y8G("ngIf","settings"===t.activeTab))},dependencies:[s.eU,s.ai,s.BC,s.W9,s.b_,s.ME,s.tN,s.I9,s.uz,s.he,s.$w,s.Jm,s.iq,s.BY,s.Nm,s.Ip,s.Gp,s.eP,f.bT,u.YN,u.BC,u.vS],styles:[".profile-picture-section[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:24px}.profile-picture-container[_ngcontent-%COMP%]{position:relative;width:120px;height:120px}.profile-picture[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:50%;background:var(--ion-color-light);display:flex;align-items:center;justify-content:center;overflow:hidden;border:1px solid var(--ion-color-medium-shade)}.profile-picture[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.default-profile-icon[_ngcontent-%COMP%]{font-size:48px;color:var(--ion-color-medium)}.camera-icon[_ngcontent-%COMP%]{position:absolute;bottom:0;right:0;background:#fff;border:1px solid var(--ion-color-medium-shade);border-radius:50%;width:32px;height:32px;display:flex;align-items:center;justify-content:center;cursor:pointer;box-shadow:0 2px 4px #0000001a}.camera-icon[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px;color:var(--ion-color-dark)}.profile-info-section[_ngcontent-%COMP%], .form-section[_ngcontent-%COMP%]{max-width:100%}ion-item[_ngcontent-%COMP%]{--padding-start: 0;--inner-padding-end: 0;--background: transparent;margin-bottom:16px}ion-card[_ngcontent-%COMP%]{margin:0 0 16px;border-radius:8px;box-shadow:none;border:1px solid var(--ion-color-light-shade)}ion-card-header[_ngcontent-%COMP%]{padding:16px;border-bottom:1px solid var(--ion-color-light-shade)}ion-card-title[_ngcontent-%COMP%]{font-size:18px;font-weight:600;display:flex;align-items:center;gap:8px}ion-card-title[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px;color:var(--ion-color-primary)}ion-button[_ngcontent-%COMP%]{margin:8px 0}@media (max-width: 576px){ion-card-header[_ngcontent-%COMP%]{padding:12px}ion-card-content[_ngcontent-%COMP%]{padding:12px}}.custom-points[_ngcontent-%COMP%]{margin-top:16px;padding:16px;background:var(--ion-color-light);border-radius:8px}.points-total[_ngcontent-%COMP%]{margin-top:12px;font-weight:500;color:var(--ion-color-dark)}.error-text[_ngcontent-%COMP%]{color:var(--ion-color-danger);font-size:14px}"]}),c})()}}]);