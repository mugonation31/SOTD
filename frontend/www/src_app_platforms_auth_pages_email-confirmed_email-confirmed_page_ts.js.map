{"version":3,"file":"src_app_platforms_auth_pages_email-confirmed_email-confirmed_page_ts.js","mappings":"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","sources":["./src/app/platforms/auth/pages/email-confirmed/email-confirmed.page.ts","./src/app/platforms/auth/pages/email-confirmed/email-confirmed.page.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { \n  IonContent, \n  IonHeader, \n  IonTitle, \n  IonToolbar, \n  IonCard, \n  IonCardContent, \n  IonButton, \n  IonIcon,\n  IonText\n} from '@ionic/angular/standalone';\nimport { addIcons } from 'ionicons';\nimport { checkmarkCircle, mail, arrowBack, footballOutline, home } from 'ionicons/icons';\nimport { SupabaseService } from '../../../../services/supabase.service';\n\n@Component({\n  selector: 'app-email-confirmed',\n  templateUrl: './email-confirmed.page.html',\n  styleUrls: ['./email-confirmed.page.scss'],\n  standalone: true,\n  imports: [\n    IonContent, \n    IonHeader, \n    IonTitle, \n    IonToolbar, \n    IonCard, \n    IonCardContent, \n    IonButton, \n    IonIcon,\n    IonText,\n    CommonModule, \n    FormsModule\n  ]\n})\nexport class EmailConfirmedPage implements OnInit {\n\n  constructor(\n    private router: Router,\n    private supabaseService: SupabaseService\n  ) {\n    addIcons({footballOutline,checkmarkCircle,arrowBack,home,mail});\n  }\n\n  ngOnInit() {\n    this.handleEmailConfirmation();\n  }\n\n  async handleEmailConfirmation() {\n    try {\n      console.log('üìß Handling email confirmation...');\n      \n      // Check if we have tokens in the URL fragment\n      const url = new URL(window.location.href);\n      const hashParams = new URLSearchParams(url.hash.slice(1));\n      const accessToken = hashParams.get('access_token');\n      const refreshToken = hashParams.get('refresh_token');\n      \n      if (accessToken && refreshToken) {\n        console.log('üîó Found auth tokens in URL, processing session...');\n        \n        // Set the session using the tokens from the email confirmation\n        const success = await this.supabaseService.handleDeepLinkSession(window.location.href);\n        \n        if (success) {\n          console.log('‚úÖ Email confirmation successful, session established');\n          // The app will automatically navigate based on the user's role and first login status\n          // through the routing guards and session restoration flow\n        } else {\n          console.error('‚ùå Failed to establish session from email confirmation');\n        }\n      } else {\n        console.log('‚ÑπÔ∏è No auth tokens found in URL - user may need to login manually');\n      }\n    } catch (error) {\n      console.error('‚ùå Error handling email confirmation:', error);\n    }\n  }\n\n  goToLogin() {\n    this.router.navigate(['/auth/login']);\n  }\n\n  goToWelcome() {\n    this.router.navigate(['/welcome']);\n  }\n}\n","<ion-header>\n  <ion-toolbar>\n    <div class=\"logo-container\" (click)=\"goToWelcome()\">\n      <ion-icon name=\"football-outline\" class=\"football-icon\"></ion-icon>\n      <div class=\"logo-text\">\n        <span class=\"logo-sotd\">SOTD</span>\n        <span class=\"logo-subtitle\">Predict 3</span>\n      </div>\n    </div>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content class=\"ion-padding\">\n  <div class=\"confirmation-container\">\n    <ion-card class=\"success-card\">\n      <ion-card-content>\n        <div class=\"success-content\">\n          <ion-icon name=\"checkmark-circle\" class=\"success-icon\"></ion-icon>\n          <h1>Email Confirmed!</h1>\n          <p>Thank you for verifying your email address.</p>\n          <p>You can now return to the login page to sign in to your account.</p>\n        </div>\n      </ion-card-content>\n    </ion-card>\n\n    <div class=\"action-buttons\">\n      <ion-button expand=\"block\" fill=\"solid\" (click)=\"goToLogin()\">\n        <ion-icon name=\"arrow-back\" slot=\"start\"></ion-icon>\n        Return to Login\n      </ion-button>\n      \n      <ion-button expand=\"block\" fill=\"outline\" (click)=\"goToWelcome()\">\n        <ion-icon name=\"home\" slot=\"start\"></ion-icon>\n        Go to Home\n      </ion-button>\n    </div>\n  </div>\n</ion-content>"],"names":["CommonModule","FormsModule","IonContent","IonHeader","IonToolbar","IonCard","IonCardContent","IonButton","IonIcon","addIcons","checkmarkCircle","mail","arrowBack","footballOutline","home","EmailConfirmedPage","constructor","router","supabaseService","ngOnInit","handleEmailConfirmation","_this","_asyncToGenerator","console","log","url","URL","window","location","href","hashParams","URLSearchParams","hash","slice","accessToken","get","refreshToken","success","handleDeepLinkSession","error","goToLogin","navigate","goToWelcome","i0","…µ…µdirectiveInject","i1","Router","i2","SupabaseService","selectors","standalone","features","…µ…µStandaloneFeature","decls","vars","consts","template","EmailConfirmedPage_Template","rf","ctx","…µ…µelementStart","…µ…µlistener","EmailConfirmedPage_Template_div_click_2_listener","…µ…µelement","…µ…µtext","…µ…µelementEnd","EmailConfirmedPage_Template_ion_button_click_22_listener","EmailConfirmedPage_Template_ion_button_click_25_listener","styles"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}