"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[358],{3358:(y,_,m)=>{m.r(_),m.d(_,{MembersPage:()=>F});var g=m(467),a=m(5050),d=m(177),b=m(5079),l=m(5873),u=m(4341),e=m(4438),p=m(9699),h=m(8010);function M(r,c){1&r&&(e.j41(0,"ion-item",18)(1,"ion-avatar",19),e.nrm(2,"ion-skeleton-text",20),e.k0s(),e.j41(3,"ion-label")(4,"h2"),e.nrm(5,"ion-skeleton-text",21),e.k0s(),e.j41(6,"p"),e.nrm(7,"ion-skeleton-text",22),e.k0s()()()),2&r&&(e.R7$(2),e.Y8G("animated",!0),e.R7$(3),e.Y8G("animated",!0),e.R7$(2),e.Y8G("animated",!0))}function f(r,c){if(1&r){const i=e.RV6();e.j41(0,"ion-button",33),e.bIt("click",function(){e.eBV(i);const n=e.XpG().$implicit,o=e.XpG();return e.Njj(o.makeAdmin(n))}),e.nrm(1,"ion-icon",34),e.EFF(2," Make Admin "),e.k0s()}}function v(r,c){if(1&r){const i=e.RV6();e.j41(0,"ion-button",35),e.bIt("click",function(){e.eBV(i);const n=e.XpG().$implicit,o=e.XpG();return e.Njj(o.revokeAdminStatus(n))}),e.nrm(1,"ion-icon",36),e.EFF(2," Revoke Admin "),e.k0s()}}function P(r,c){if(1&r){const i=e.RV6();e.j41(0,"ion-button",37),e.bIt("click",function(){e.eBV(i);const n=e.XpG().$implicit,o=e.XpG();return e.Njj(o.removeMember(n))}),e.nrm(1,"ion-icon",38),e.EFF(2," Remove "),e.k0s()}}function O(r,c){if(1&r){const i=e.RV6();e.j41(0,"ion-button",39),e.bIt("click",function(){e.eBV(i);const n=e.XpG().$implicit,o=e.XpG();return e.Njj(o.readmitMember(n))}),e.nrm(1,"ion-icon",40),e.EFF(2," Readmit "),e.k0s()}}function C(r,c){if(1&r&&(e.j41(0,"ion-item",23)(1,"ion-avatar",19),e.nrm(2,"ion-icon",24),e.k0s(),e.j41(3,"ion-label")(4,"h2"),e.EFF(5),e.k0s(),e.j41(6,"p"),e.EFF(7),e.k0s(),e.j41(8,"p",25)(9,"span",26),e.EFF(10),e.nI1(11,"date"),e.k0s(),e.j41(12,"ion-badge",27),e.EFF(13),e.nI1(14,"titlecase"),e.k0s()()(),e.j41(15,"div",28),e.DNE(16,f,3,0,"ion-button",29)(17,v,3,0,"ion-button",30)(18,P,3,0,"ion-button",31)(19,O,3,0,"ion-button",32),e.k0s()()),2&r){const i=c.$implicit,t=e.XpG();e.R7$(),e.AVh("admin-avatar","admin"===i.role),e.R7$(),e.Y8G("name","admin"===i.role?"shield-outline":"person-outline")("color","admin"===i.role?"dark":"medium"),e.R7$(3),e.JRh(i.name),e.R7$(2),e.JRh(i.email),e.R7$(3),e.SpI("Joined: ",e.i5U(11,13,i.joinedAt,"medium"),""),e.R7$(2),e.Y8G("color","active"===i.status?"success":"danger"),e.R7$(),e.SpI(" ",e.bMT(14,16,i.status)," "),e.R7$(3),e.Y8G("ngIf",("all"===t.selectedFilter||"players"===t.selectedFilter)&&"admin"!==i.role&&"active"===i.status),e.R7$(),e.Y8G("ngIf",("all"===t.selectedFilter||"admins"===t.selectedFilter)&&"admin"===i.role&&i.id!==t.currentAdminId&&"active"===i.status),e.R7$(),e.Y8G("ngIf","removed"!==t.selectedFilter&&i.id!==t.currentAdminId&&"active"===i.status),e.R7$(),e.Y8G("ngIf","removed"===t.selectedFilter)}}function k(r,c){1&r&&(e.j41(0,"ion-item",41)(1,"ion-label",42),e.nrm(2,"ion-icon",43),e.j41(3,"h2"),e.EFF(4,"No members found"),e.k0s(),e.j41(5,"p"),e.EFF(6,"Try adjusting your search or filters"),e.k0s()()())}let F=(()=>{var r;class c{constructor(t,n){this.groupService=t,this.authService=n,this.selectedFilter="all",this.searchTerm="",this.currentAdminId="1",this.isLoading=!1,this.members=[],this.filteredMembers=[],(0,b.a)({personOutline:l.wAZ,peopleOutline:l.wx_,personAddOutline:l.zsU,filterOutline:l.PyO,searchOutline:l.jBE,checkmarkCircleOutline:l.gz2,closeCircleOutline:l.p9N,warningOutline:l.bO5,createOutline:l.hmR,trashOutline:l.P1A,trophyOutline:l.NhD,shieldOutline:l.uLY,shieldCheckmarkOutline:l.fb0,personRemoveOutline:l.oYk,banOutline:l.Av6})}ngOnInit(){console.log("\u{1f680} Members page: Initializing...");const t=this.authService.getCurrentUser();t&&(this.currentAdminId=t.id),this.loadMembersFromGroups(),this.applyFilters(),this.subscribeToGroupUpdates()}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}loadMembersFromGroups(){const t=this.groupService.getAdminGroups(),n=[];console.log("\u{1f504} Members page: Loading members from admin groups:",t.length),t.forEach(o=>{console.log(`\u{1f4cb} Group "${o.name}": ${o.members.length} members`,o.members.map(s=>({name:s.name,role:s.role,email:s.email}))),o.members.forEach(s=>{n.push({id:s.id,name:s.name,email:s.email,joinedAt:s.joinedAt,groupName:o.name,role:s.role,predictions:0,status:"inactive"===s.status?"removed":s.status})})}),this.members=n,console.log("\u2705 Members page: Total members loaded:",n.length),console.log("\u{1f4ca} Members breakdown:",{total:n.length,admins:n.filter(o=>"admin"===o.role).length,players:n.filter(o=>"player"===o.role).length,active:n.filter(o=>"active"===o.status).length})}getMemberCount(t){switch(t){case"all":return this.members.length;case"admins":return this.members.filter(n=>"admin"===n.role&&"active"===n.status).length;case"players":return this.members.filter(n=>"player"===n.role&&"active"===n.status).length;case"removed":return this.members.filter(n=>"removed"===n.status).length;default:return 0}}filterMembers(t){this.selectedFilter=t.detail.value,this.applyFilters()}searchMembers(t){var n;this.searchTerm=(null===(n=t.detail.value)||void 0===n?void 0:n.toLowerCase())||"",this.applyFilters()}applyFilters(){this.isLoading=!0,setTimeout(()=>{let t=[...this.members];switch(this.selectedFilter){case"admins":t=t.filter(n=>"admin"===n.role&&"active"===n.status);break;case"players":t=t.filter(n=>"player"===n.role&&"active"===n.status);break;case"removed":t=t.filter(n=>"removed"===n.status);break;default:t=t.filter(n=>"active"===n.status)}this.searchTerm&&(t=t.filter(n=>n.name.toLowerCase().includes(this.searchTerm)||n.email.toLowerCase().includes(this.searchTerm))),this.filteredMembers=t,this.isLoading=!1},300)}makeAdmin(t){var n=this;return(0,g.A)(function*(){try{n.isLoading=!0,yield new Promise(o=>setTimeout(o,500)),t.role="admin",n.applyFilters(),console.log("Member promoted to admin successfully")}catch(o){console.error("Error making member admin:",o)}finally{n.isLoading=!1}})()}revokeAdminStatus(t){var n=this;return(0,g.A)(function*(){try{n.isLoading=!0,yield new Promise(o=>setTimeout(o,500)),t.role="player",n.applyFilters(),console.log("Admin status revoked successfully")}catch(o){console.error("Error revoking admin status:",o)}finally{n.isLoading=!1}})()}removeMember(t){var n=this;return(0,g.A)(function*(){try{n.isLoading=!0,yield new Promise(o=>setTimeout(o,500)),t.status="removed",t.removedAt=new Date,n.applyFilters(),console.log("Member removed successfully")}catch(o){console.error("Error removing member:",o)}finally{n.isLoading=!1}})()}readmitMember(t){var n=this;return(0,g.A)(function*(){try{n.isLoading=!0,yield new Promise(o=>setTimeout(o,500)),t.status="active",t.removedAt=void 0,n.applyFilters(),console.log("Member readmitted successfully")}catch(o){console.error("Error readmitting member:",o)}finally{n.isLoading=!1}})()}subscribeToGroupUpdates(){this.subscription=this.groupService.groups$.subscribe(()=>{console.log("\u{1f504} Members page: Received group update, reloading members..."),this.loadMembersFromGroups(),this.applyFilters()})}}return(r=c).\u0275fac=function(t){return new(t||r)(e.rXU(p.B),e.rXU(h.u))},r.\u0275cmp=e.VBU({type:r,selectors:[["app-members"]],standalone:!0,features:[e.aNF],decls:45,vars:11,consts:[["size","12"],[1,"member-segments"],["mode","ios",3,"ngModelChange","ionChange","ngModel"],["value","all","title","View all members"],[1,"segment-label"],["name","people-outline"],[1,"member-count"],["value","admins","title","View admin members"],["name","shield-outline"],["value","players","title","View player members"],["name","person-outline"],["value","removed","title","View removed members"],["name","ban-outline"],["placeholder","Search members",1,"member-searchbar",3,"ionInput","debounce"],[1,"member-list"],["lines","none",4,"ngIf"],["lines","none","class","member-item",4,"ngFor","ngForOf"],["lines","none","class","empty-state",4,"ngIf"],["lines","none"],["slot","start"],[3,"animated"],[2,"width","50%",3,"animated"],[2,"width","70%",3,"animated"],["lines","none",1,"member-item"],["size","large",3,"name","color"],[1,"member-meta"],[1,"join-date"],[1,"status-badge",3,"color"],["slot","end",1,"member-actions"],["fill","clear","size","small","class","action-button make-admin-btn",3,"click",4,"ngIf"],["fill","clear","size","small","class","action-button revoke-btn",3,"click",4,"ngIf"],["fill","clear","size","small","color","danger","class","action-button remove-btn",3,"click",4,"ngIf"],["fill","clear","size","small","color","success","class","action-button readmit-btn",3,"click",4,"ngIf"],["fill","clear","size","small",1,"action-button","make-admin-btn",3,"click"],["name","shield-outline","slot","start"],["fill","clear","size","small",1,"action-button","revoke-btn",3,"click"],["name","person-remove-outline","slot","start"],["fill","clear","size","small","color","danger",1,"action-button","remove-btn",3,"click"],["name","trash-outline","slot","start"],["fill","clear","size","small","color","success",1,"action-button","readmit-btn",3,"click"],["name","checkmark-circle-outline","slot","start"],["lines","none",1,"empty-state"],[1,"ion-text-center"],["name","people-outline","size","large"]],template:function(t,n){1&t&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Members Management"),e.k0s()()(),e.j41(4,"ion-content")(5,"ion-grid")(6,"ion-row")(7,"ion-col",0)(8,"div",1)(9,"ion-segment",2),e.mxI("ngModelChange",function(s){return e.DH7(n.selectedFilter,s)||(n.selectedFilter=s),s}),e.bIt("ionChange",function(s){return n.filterMembers(s)}),e.j41(10,"ion-segment-button",3)(11,"div",4),e.nrm(12,"ion-icon",5),e.j41(13,"span"),e.EFF(14,"All Members"),e.k0s(),e.j41(15,"span",6),e.EFF(16),e.k0s()()(),e.j41(17,"ion-segment-button",7)(18,"div",4),e.nrm(19,"ion-icon",8),e.j41(20,"span"),e.EFF(21,"Admins"),e.k0s(),e.j41(22,"span",6),e.EFF(23),e.k0s()()(),e.j41(24,"ion-segment-button",9)(25,"div",4),e.nrm(26,"ion-icon",10),e.j41(27,"span"),e.EFF(28,"Players"),e.k0s(),e.j41(29,"span",6),e.EFF(30),e.k0s()()(),e.j41(31,"ion-segment-button",11)(32,"div",4),e.nrm(33,"ion-icon",12),e.j41(34,"span"),e.EFF(35,"Removed"),e.k0s(),e.j41(36,"span",6),e.EFF(37),e.k0s()()()()(),e.j41(38,"ion-searchbar",13),e.bIt("ionInput",function(s){return n.searchMembers(s)}),e.k0s()()(),e.j41(39,"ion-row")(40,"ion-col",0)(41,"ion-list",14),e.DNE(42,M,8,3,"ion-item",15)(43,C,20,18,"ion-item",16)(44,k,7,0,"ion-item",17),e.k0s()()()()()),2&t&&(e.R7$(9),e.R50("ngModel",n.selectedFilter),e.R7$(7),e.JRh(n.getMemberCount("all")),e.R7$(7),e.JRh(n.getMemberCount("admins")),e.R7$(7),e.JRh(n.getMemberCount("players")),e.R7$(7),e.JRh(n.getMemberCount("removed")),e.R7$(),e.Y8G("debounce",300),e.R7$(3),e.AVh("loading",n.isLoading),e.R7$(),e.Y8G("ngIf",n.isLoading),e.R7$(),e.Y8G("ngForOf",n.filteredMembers),e.R7$(),e.Y8G("ngIf",0===n.filteredMembers.length&&!n.isLoading))},dependencies:[a.eU,a.ai,a.BC,a.W9,a.iq,a.In,a.Jm,a.lO,a.ln,a.hU,a.nf,a.uz,a.he,a.S1,a.Gp,a.eP,a.mC,a.ds,d.pM,d.bT,d.vh,d.PV,u.YN,u.BC,u.vS],styles:['ion-grid[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:1rem}.member-segments[_ngcontent-%COMP%]{padding:8px 16px;background:var(--ion-color-light);border-radius:12px;margin-bottom:16px}.member-segments[_ngcontent-%COMP%]   ion-segment[_ngcontent-%COMP%]{--background: transparent}.member-segments[_ngcontent-%COMP%]   ion-segment[_ngcontent-%COMP%]   ion-segment-button[_ngcontent-%COMP%]{--background: transparent;--background-checked: transparent;--color: var(--ion-color-medium);--color-checked: var(--ion-color-dark);--indicator-color: transparent;min-height:40px;font-size:14px;font-weight:500;text-transform:none;transition:all .3s ease;position:relative}.member-segments[_ngcontent-%COMP%]   ion-segment[_ngcontent-%COMP%]   ion-segment-button[_ngcontent-%COMP%]::part(indicator){display:none}.member-segments[_ngcontent-%COMP%]   ion-segment[_ngcontent-%COMP%]   ion-segment-button.segment-button-checked[_ngcontent-%COMP%]{--background: transparent;--color: var(--ion-color-dark);font-weight:600}.member-segments[_ngcontent-%COMP%]   ion-segment[_ngcontent-%COMP%]   ion-segment-button.segment-button-checked[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:25%;width:50%;height:3px;background:var(--ion-color-dark);border-radius:2px}.member-segments[_ngcontent-%COMP%]   ion-segment[_ngcontent-%COMP%]   ion-segment-button.segment-button-checked[_ngcontent-%COMP%]   .member-count[_ngcontent-%COMP%]{background:var(--ion-color-dark);color:var(--ion-color-light)}.member-segments[_ngcontent-%COMP%]   ion-segment[_ngcontent-%COMP%]   ion-segment-button.segment-button-checked[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-dark)}.segment-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:4px 8px}.segment-label[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px;color:var(--ion-color-medium);transition:color .3s ease}.member-count[_ngcontent-%COMP%]{background:var(--ion-color-light-shade);padding:2px 8px;border-radius:12px;font-size:12px;transition:all .3s ease}.member-searchbar[_ngcontent-%COMP%]{margin:1rem 0;--border-radius: 8px;--box-shadow: none;--background: var(--ion-color-light)}.member-list[_ngcontent-%COMP%]{background:transparent}.member-list.loading[_ngcontent-%COMP%]{opacity:.7}.member-item[_ngcontent-%COMP%]{--padding-start: 1rem;--padding-end: 1rem;--padding-top: 1rem;--padding-bottom: 1rem;--background: var(--ion-color-light);margin-bottom:.5rem;border-radius:8px;transition:transform .2s ease}.member-item[_ngcontent-%COMP%]:hover{transform:translate(4px)}ion-avatar[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background:var(--ion-color-light-shade);width:48px;height:48px;margin-right:1rem;transition:background .3s ease}ion-avatar.admin-avatar[_ngcontent-%COMP%]{background:var(--ion-color-light-shade)}ion-avatar[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px}ion-label[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;margin-bottom:4px;color:var(--ion-color-dark)}ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem;color:var(--ion-color-medium);margin:2px 0}.member-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-top:8px}.member-meta[_ngcontent-%COMP%]   .join-date[_ngcontent-%COMP%]{font-size:.8rem}.member-meta[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{font-size:.7rem;font-weight:500;padding:4px 8px}.member-actions[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.action-button[_ngcontent-%COMP%]{--padding-start: 8px;--padding-end: 8px;height:32px;font-size:.9rem}.action-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px;margin-right:4px}.action-button[_ngcontent-%COMP%]:hover{opacity:.8}.empty-state[_ngcontent-%COMP%]{--background: transparent;margin-top:2rem}.empty-state[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{text-align:center}.empty-state[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:48px;color:var(--ion-color-medium);margin-bottom:1rem}.empty-state[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.2rem;color:var(--ion-color-dark);margin-bottom:.5rem}.empty-state[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem;color:var(--ion-color-medium)}@media (max-width: 768px){.member-segments[_ngcontent-%COMP%]{padding:4px 8px}.segment-label[_ngcontent-%COMP%]{flex-direction:column;gap:4px}.segment-label[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px}.member-actions[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-end}}']}),c})()}}]);