"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[0],{5423:(R,g,a)=>{a.d(g,{f:()=>v});var k=a(467),o=a(4438),c=a(4738);let v=(()=>{var u;class h{constructor(p){this.toastController=p}showToast(p){var w=this;return(0,k.A)(function*(y,f="success",E=3e3){const F="error"===f?"danger":f;yield(yield w.toastController.create({message:y,color:F,duration:E,position:"bottom"})).present()}).apply(this,arguments)}}return(u=h).\u0275fac=function(p){return new(p||u)(o.KVO(c.K_))},u.\u0275prov=o.jDH({token:u,factory:u.\u0275fac,providedIn:"root"}),h})()},4e3:(R,g,a)=>{a.r(g),a.d(g,{GroupAdminRegisterPage:()=>P});var k=a(467),o=a(4341),c=a(4738),v=a(177),u=a(5079),h=a(5873),e=a(4438),p=a(7570),w=a(5423);let y=(()=>{var i;class m{constructor(){this.TOKEN_LENGTH=32,this.EXPIRATION_DAYS=7}generateInvitationToken(t){const r=Date.now().toString(36),s=this.generateRandomBytes(16),l=this.hashString(t);return btoa(`${r}.${s}.${l}`).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}validateToken(t){try{const r=t.replace(/-/g,"+").replace(/_/g,"/"),s=atob(r),[l]=s.split("."),T=parseInt(l,36)+24*this.EXPIRATION_DAYS*60*60*1e3;return Date.now()<T}catch{return!1}}generateRandomBytes(t){const r=new Uint8Array(t);return crypto.getRandomValues(r),Array.from(r).map(s=>s.toString(16).padStart(2,"0")).join("")}hashString(t){let r=0;for(let s=0;s<t.length;s++)r=(r<<5)-r+t.charCodeAt(s),r|=0;return Math.abs(r).toString(36)}}return(i=m).\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"}),m})();function f(i,m){if(1&i&&(e.j41(0,"div",27)(1,"p",28),e.nrm(2,"ion-icon",29),e.EFF(3," At least 8 characters "),e.k0s(),e.j41(4,"p",28),e.nrm(5,"ion-icon",29),e.EFF(6," One uppercase letter "),e.k0s(),e.j41(7,"p",28),e.nrm(8,"ion-icon",29),e.EFF(9," One lowercase letter "),e.k0s(),e.j41(10,"p",28),e.nrm(11,"ion-icon",29),e.EFF(12," One number "),e.k0s(),e.j41(13,"p",28),e.nrm(14,"ion-icon",29),e.EFF(15," One special character "),e.k0s()()),2&i){const n=e.XpG();e.R7$(),e.AVh("met",!(null!=n.passwordErrors&&n.passwordErrors.minLength)),e.R7$(),e.Y8G("name",null!=n.passwordErrors&&n.passwordErrors.minLength?"close-circle":"checkmark-circle"),e.R7$(2),e.AVh("met",!(null!=n.passwordErrors&&n.passwordErrors.uppercase)),e.R7$(),e.Y8G("name",null!=n.passwordErrors&&n.passwordErrors.uppercase?"close-circle":"checkmark-circle"),e.R7$(2),e.AVh("met",!(null!=n.passwordErrors&&n.passwordErrors.lowercase)),e.R7$(),e.Y8G("name",null!=n.passwordErrors&&n.passwordErrors.lowercase?"close-circle":"checkmark-circle"),e.R7$(2),e.AVh("met",!(null!=n.passwordErrors&&n.passwordErrors.number)),e.R7$(),e.Y8G("name",null!=n.passwordErrors&&n.passwordErrors.number?"close-circle":"checkmark-circle"),e.R7$(2),e.AVh("met",!(null!=n.passwordErrors&&n.passwordErrors.specialChar)),e.R7$(),e.Y8G("name",null!=n.passwordErrors&&n.passwordErrors.specialChar?"close-circle":"checkmark-circle")}}function E(i,m){1&i&&e.nrm(0,"ion-spinner")}function F(i,m){1&i&&(e.j41(0,"span"),e.EFF(1,"Complete Registration"),e.k0s())}let P=(()=>{var i;class m{constructor(t,r,s,l,d){this.fb=t,this.route=r,this.router=s,this.toastService=l,this.tokenService=d,this.isLoading=!1,this.token=null,(0,u.a)({checkmarkCircle:h.AUS,closeCircle:h.P0k}),this.registrationForm=this.fb.group({username:[""],firstName:["",[o.k0.required,o.k0.minLength(2)]],lastName:["",[o.k0.required,o.k0.minLength(2)]],email:["",[o.k0.required,o.k0.email]],phone:["",[o.k0.required,o.k0.pattern("^[0-9+\\s-]+$")]],password:["",[o.k0.required,this.passwordValidator()]],confirmPassword:["",[o.k0.required]],securityQuestion1:["",o.k0.required],securityAnswer1:["",o.k0.required],securityQuestion2:["",o.k0.required],securityAnswer2:["",o.k0.required],favoriteTeam:["",o.k0.required]},{validators:this.passwordMatchValidator})}ngOnInit(){if(this.token=this.route.snapshot.queryParamMap.get("token"),console.log("Token from URL:",this.token),!this.token)return console.log("Using mock data for development"),void this.registrationForm.patchValue({email:"test@example.com"});const t=this.tokenService.validateToken(this.token);if(console.log("Token validation result:",t),!t)return console.log("Token validation failed, using mock data"),void this.registrationForm.patchValue({email:"test@example.com"});const r=this.getEmailFromToken(this.token);console.log("Email from token:",r),r&&this.registrationForm.patchValue({email:r})}passwordMatchValidator(t){var r,s;return(null===(r=t.get("password"))||void 0===r?void 0:r.value)===(null===(s=t.get("confirmPassword"))||void 0===s?void 0:s.value)?null:{passwordMismatch:!0}}getEmailFromToken(t){return""}onSubmit(){var t=this;return(0,k.A)(function*(){if(t.registrationForm.valid){t.isLoading=!0;try{yield new Promise(r=>setTimeout(r,1e3)),yield t.toastService.showToast("Registration successful! Please log in.","success"),t.router.navigate(["/auth/login"])}catch{yield t.toastService.showToast("Error during registration. Please try again.","error")}finally{t.isLoading=!1}}})()}get password(){return this.registrationForm.get("password")}get passwordErrors(){if(!this.password)return null;const t=this.password.value;return t?{minLength:t.length<8,uppercase:!/[A-Z]/.test(t),lowercase:!/[a-z]/.test(t),number:!/[0-9]/.test(t),specialChar:!/[!@#$%^&*(),.?":{}|<>]/.test(t)}:null}passwordValidator(){return t=>{const r=t.value;if(!r)return null;const s={};let l=!1;return r.length<8&&(s.minLength=!0,l=!0),/[A-Z]/.test(r)||(s.uppercase=!0,l=!0),/[a-z]/.test(r)||(s.lowercase=!0,l=!0),/[0-9]/.test(r)||(s.number=!0,l=!0),/[!@#$%^&*(),.?":{}|<>]/.test(r)||(s.specialChar=!0,l=!0),l?{passwordRequirements:s}:null}}}return(i=m).\u0275fac=function(t){return new(t||i)(e.rXU(o.ok),e.rXU(p.nX),e.rXU(p.Ix),e.rXU(w.f),e.rXU(y))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-group-admin-register"]],standalone:!0,features:[e.aNF],decls:58,vars:13,consts:[[1,"ion-padding"],[1,"flex-center"],[1,"auth-card"],[3,"ngSubmit","formGroup"],[1,"form-section"],["type","text","formControlName","username","placeholder","Username (optional)",3,"clearInput"],["type","text","formControlName","firstName","placeholder","First Name",3,"clearInput"],["type","text","formControlName","lastName","placeholder","Surname",3,"clearInput"],["type","email","formControlName","email","placeholder","Email Address",3,"readonly"],["type","tel","formControlName","phone","placeholder","Phone Number",3,"clearInput"],["type","password","formControlName","password","placeholder","Password"],["class","password-requirements",4,"ngIf"],["type","password","formControlName","confirmPassword","placeholder","Confirm Password"],["formControlName","securityQuestion1","placeholder","Select Security Question 1"],["value","birthCity"],["value","firstPet"],["value","motherMaiden"],["type","text","formControlName","securityAnswer1","placeholder","Answer to Security Question 1",3,"clearInput"],["formControlName","securityQuestion2","placeholder","Select Security Question 2"],["value","schoolName"],["value","favoriteTeam"],["value","childhoodHero"],["type","text","formControlName","securityAnswer2","placeholder","Answer to Security Question 2",3,"clearInput"],["type","text","formControlName","favoriteTeam","placeholder","Favorite Team",3,"clearInput"],[1,"ion-margin-top"],["expand","block","type","submit",3,"disabled"],[4,"ngIf"],[1,"password-requirements"],[1,"requirement"],[3,"name"]],template:function(t,r){1&t&&(e.j41(0,"ion-content",0)(1,"div",1)(2,"ion-card",2)(3,"ion-card-header")(4,"ion-card-title"),e.EFF(5,"Group Admin Registration"),e.k0s()(),e.j41(6,"ion-card-content")(7,"form",3),e.bIt("ngSubmit",function(){return r.onSubmit()}),e.j41(8,"div",4)(9,"h3"),e.EFF(10,"Personal Information"),e.k0s(),e.j41(11,"ion-item"),e.nrm(12,"ion-input",5),e.k0s(),e.j41(13,"ion-item"),e.nrm(14,"ion-input",6),e.k0s(),e.j41(15,"ion-item"),e.nrm(16,"ion-input",7),e.k0s(),e.j41(17,"ion-item"),e.nrm(18,"ion-input",8),e.k0s(),e.j41(19,"ion-item"),e.nrm(20,"ion-input",9),e.k0s()(),e.j41(21,"div",4)(22,"h3"),e.EFF(23,"Security Information"),e.k0s(),e.j41(24,"ion-item"),e.nrm(25,"ion-input",10),e.k0s(),e.DNE(26,f,16,15,"div",11),e.j41(27,"ion-item"),e.nrm(28,"ion-input",12),e.k0s(),e.j41(29,"ion-item")(30,"ion-select",13)(31,"ion-select-option",14),e.EFF(32," What city were you born in? "),e.k0s(),e.j41(33,"ion-select-option",15),e.EFF(34," What was your first pet's name? "),e.k0s(),e.j41(35,"ion-select-option",16),e.EFF(36," What is your mother's maiden name? "),e.k0s()()(),e.j41(37,"ion-item"),e.nrm(38,"ion-input",17),e.k0s(),e.j41(39,"ion-item")(40,"ion-select",18)(41,"ion-select-option",19),e.EFF(42," What was the name of your first school? "),e.k0s(),e.j41(43,"ion-select-option",20),e.EFF(44," What's your favorite football team? "),e.k0s(),e.j41(45,"ion-select-option",21),e.EFF(46," Who was your childhood hero? "),e.k0s()()(),e.j41(47,"ion-item"),e.nrm(48,"ion-input",22),e.k0s()(),e.j41(49,"div",4)(50,"h3"),e.EFF(51,"Player Preferences"),e.k0s(),e.j41(52,"ion-item"),e.nrm(53,"ion-input",23),e.k0s()(),e.j41(54,"div",24)(55,"ion-button",25),e.DNE(56,E,1,0,"ion-spinner",26)(57,F,2,0,"span",26),e.k0s()()()()()()()),2&t&&(e.R7$(7),e.Y8G("formGroup",r.registrationForm),e.R7$(5),e.Y8G("clearInput",!0),e.R7$(2),e.Y8G("clearInput",!0),e.R7$(2),e.Y8G("clearInput",!0),e.R7$(2),e.Y8G("readonly",!0),e.R7$(2),e.Y8G("clearInput",!0),e.R7$(6),e.Y8G("ngIf",null==r.password?null:r.password.touched),e.R7$(12),e.Y8G("clearInput",!0),e.R7$(10),e.Y8G("clearInput",!0),e.R7$(5),e.Y8G("clearInput",!0),e.R7$(2),e.Y8G("disabled",!r.registrationForm.valid||r.isLoading),e.R7$(),e.Y8G("ngIf",r.isLoading),e.R7$(),e.Y8G("ngIf",!r.isLoading))},dependencies:[c.W9,c.b_,c.ME,c.tN,c.I9,c.uz,c.$w,c.Jm,c.w2,c.Nm,c.Ip,c.iq,o.YN,o.qT,o.BC,o.cb,o.X1,o.j4,o.JD,v.bT],styles:[".flex-center[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100%}.auth-card[_ngcontent-%COMP%]{max-width:600px;width:100%;margin:20px}.form-section[_ngcontent-%COMP%]{margin:20px 0;padding-top:10px;border-top:1px solid var(--ion-color-light)}.form-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--ion-color-medium);font-size:1.1em;margin-bottom:15px}ion-item[_ngcontent-%COMP%]{margin-bottom:10px;--background: transparent}.password-requirements[_ngcontent-%COMP%]{padding:10px 16px;font-size:.9em}.requirement[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:var(--ion-color-danger);margin:4px 0}.requirement.met[_ngcontent-%COMP%]{color:var(--ion-color-success)}.requirement[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.1em}"]}),m})()}}]);