"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[292],{9292:(y,_,a)=>{a.r(_),a.d(_,{GroupsPage:()=>k});var g=a(467),s=a(252),u=a(177),p=a(4341),d=a(5079),l=a(5873),n=a(4438),m=a(8199),f=a(9699),P=a(5423);const v=()=>[0,.5,.8];function h(i,c){if(1&i&&(n.j41(0,"div",26),n.nrm(1,"ion-icon",37),n.j41(2,"div",28)(3,"span",29),n.EFF(4),n.k0s(),n.j41(5,"span",30),n.EFF(6,"Entry Fee"),n.k0s()()()),2&i){const t=n.XpG().$implicit;n.R7$(4),n.SpI("\xa3",t.entryFee,"")}}function b(i,c){if(1&i){const t=n.RV6();n.j41(0,"div",18),n.bIt("click",function(){const e=n.eBV(t).$implicit,r=n.XpG(2);return n.Njj(r.viewGroupDetails(e))}),n.j41(1,"div",19)(2,"div",20)(3,"h3",21),n.EFF(4),n.k0s(),n.j41(5,"p",22),n.nrm(6,"ion-icon",7),n.EFF(7),n.k0s()(),n.j41(8,"div",23)(9,"ion-badge",24),n.EFF(10),n.k0s()()(),n.j41(11,"div",25)(12,"div",26),n.nrm(13,"ion-icon",27),n.j41(14,"div",28)(15,"span",29),n.EFF(16),n.k0s(),n.j41(17,"span",30),n.EFF(18,"Members"),n.k0s()()(),n.j41(19,"div",26),n.nrm(20,"ion-icon",31),n.j41(21,"div",28)(22,"span",29),n.EFF(23),n.k0s(),n.j41(24,"span",30),n.EFF(25,"Your Rank"),n.k0s()()(),n.DNE(26,h,7,1,"div",32),n.k0s(),n.j41(27,"div",33)(28,"ion-button",34),n.bIt("click",function(e){const r=n.eBV(t).$implicit;return n.XpG(2).viewGroupMembers(r),n.Njj(e.stopPropagation())}),n.nrm(29,"ion-icon",35),n.EFF(30," Members "),n.k0s(),n.j41(31,"ion-button",34),n.bIt("click",function(e){const r=n.eBV(t).$implicit;return n.XpG(2).viewGroupDetails(r),n.Njj(e.stopPropagation())}),n.nrm(32,"ion-icon",36),n.EFF(33," Leaderboard "),n.k0s()()()}if(2&i){const t=c.$implicit,o=n.XpG(2);n.R7$(4),n.JRh(t.name),n.R7$(3),n.SpI(" Admin: ",t.adminName," "),n.R7$(2),n.Y8G("color","prize"===t.type?"warning":"primary"),n.R7$(),n.SpI(" ","prize"===t.type?"Prize Pool":"Casual"," "),n.R7$(6),n.JRh(t.memberCount),n.R7$(7),n.SpI("#",o.getUserPosition(t),""),n.R7$(3),n.Y8G("ngIf","prize"===t.type)}}function M(i,c){if(1&i&&(n.j41(0,"div",16),n.DNE(1,b,34,7,"div",17),n.k0s()),2&i){const t=n.XpG();n.R7$(),n.Y8G("ngForOf",t.myGroups)}}function G(i,c){if(1&i){const t=n.RV6();n.j41(0,"div",38)(1,"div",39),n.nrm(2,"ion-icon",11),n.k0s(),n.j41(3,"h3"),n.EFF(4,"No Groups Yet"),n.k0s(),n.j41(5,"p"),n.EFF(6,"Join a group to compete with friends and colleagues in prediction challenges"),n.k0s(),n.j41(7,"ion-button",40),n.bIt("click",function(){n.eBV(t);const e=n.XpG();return n.Njj(e.openJoinModal())}),n.nrm(8,"ion-icon",41),n.EFF(9," Join Your First Group "),n.k0s()()}}function O(i,c){if(1&i){const t=n.RV6();n.j41(0,"ion-fab",42)(1,"ion-fab-button",6),n.bIt("click",function(){n.eBV(t);const e=n.XpG();return n.Njj(e.openJoinModal())}),n.nrm(2,"ion-icon",43),n.k0s()()}}function C(i,c){1&i&&(n.j41(0,"ion-note",55),n.EFF(1," Group code must be 6 characters (letters and numbers only) "),n.k0s())}function j(i,c){1&i&&n.nrm(0,"ion-icon",56)}function x(i,c){1&i&&n.nrm(0,"ion-icon",57)}function E(i,c){if(1&i){const t=n.RV6();n.j41(0,"ion-content",44)(1,"div",45)(2,"h2"),n.EFF(3,"Join a Group"),n.k0s(),n.j41(4,"ion-button",46),n.bIt("click",function(){n.eBV(t);const e=n.XpG();return n.Njj(e.closeJoinModal())}),n.nrm(5,"ion-icon",47),n.k0s()(),n.j41(6,"div",48)(7,"p",49),n.EFF(8," Enter the 6-character group code provided by the group admin "),n.k0s(),n.j41(9,"ion-input",50),n.mxI("ngModelChange",function(e){n.eBV(t);const r=n.XpG();return n.DH7(r.joinCode,e)||(r.joinCode=e),n.Njj(e)}),n.bIt("ionInput",function(e){n.eBV(t);const r=n.XpG();return n.Njj(r.onJoinCodeInput(e))}),n.k0s(),n.DNE(10,C,2,0,"ion-note",51),n.j41(11,"ion-button",52),n.bIt("click",function(){n.eBV(t);const e=n.XpG();return n.Njj(e.joinGroup())}),n.DNE(12,j,1,0,"ion-icon",53)(13,x,1,0,"ion-icon",54),n.EFF(14),n.k0s()()()}if(2&i){const t=n.XpG();n.R7$(9),n.R50("ngModel",t.joinCode),n.Y8G("disabled",t.isJoining),n.R7$(),n.Y8G("ngIf",t.joinCode&&!t.validateGroupCode(t.joinCode)),n.R7$(),n.Y8G("disabled",!t.validateGroupCode(t.joinCode)||t.isJoining),n.R7$(),n.Y8G("ngIf",!t.isJoining),n.R7$(),n.Y8G("ngIf",t.isJoining),n.R7$(),n.SpI(" ",t.isJoining?"Joining...":"Join Group"," ")}}let k=(()=>{var i;class c{constructor(o,e,r){this.router=o,this.groupService=e,this.toastService=r,this.isJoinModalOpen=!1,this.joinCode="",this.isJoining=!1,this.myGroups=[],(0,d.a)({peopleOutline:l.wx_,trophyOutline:l.NhD,personAddOutline:l.zsU,addOutline:l.EKF,closeOutline:l.xfX,enterOutline:l.b9o,footballOutline:l.gMr,personOutline:l.wAZ,eyeOutline:l.ov$,cashOutline:l.A3w,hourglassOutline:l.pGP})}ngOnInit(){this.loadUserGroups(),this.groupsSubscription=this.groupService.groups$.subscribe(()=>{this.loadUserGroups()})}ngOnDestroy(){this.groupsSubscription&&this.groupsSubscription.unsubscribe()}loadUserGroups(){this.myGroups=this.groupService.getUserGroups()}openJoinModal(){this.isJoinModalOpen=!0,this.joinCode=""}closeJoinModal(){this.isJoinModalOpen=!1,this.joinCode=""}onJoinCodeInput(o){const e=o.target.value.toUpperCase();this.joinCode=e}validateGroupCode(o){return/^[A-Z0-9]{6}$/.test(o)}joinGroup(){var o=this;return(0,g.A)(function*(){if(o.validateGroupCode(o.joinCode)&&!o.isJoining){o.isJoining=!0;try{if(!o.groupService.findGroupByCode(o.joinCode))return void(yield o.toastService.showToast("Group not found with that code","error"));const r=o.groupService.joinGroup(o.joinCode);r&&(yield o.toastService.showToast(`Successfully joined ${r.name}!`,"success"),o.closeJoinModal())}catch(e){let r="Error joining group";e instanceof Error&&(r=e.message),yield o.toastService.showToast(r,"error")}finally{o.isJoining=!1}}})()}viewGroupDetails(o){this.router.navigate(["/player/standings"],{queryParams:{groupId:o.id}})}viewGroupMembers(o){console.log("Viewing members for group:",o.name,o.members)}getPositionSuffix(o){if(o>3&&o<21)return"th";switch(o%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}}getUserPosition(o){return Math.floor(Math.random()*o.memberCount)+1}navigateTo(o){this.router.navigate([o])}}return(i=c).\u0275fac=function(o){return new(o||i)(n.rXU(m.Ix),n.rXU(f.B),n.rXU(P.f))},i.\u0275cmp=n.VBU({type:i,selectors:[["app-groups"]],standalone:!0,features:[n.aNF],decls:24,vars:8,consts:[[1,"logo-container",3,"click"],["name","football-outline",1,"football-icon"],[1,"logo-text"],[1,"logo-sotd"],[1,"logo-subtitle"],["slot","end"],[3,"click"],["name","person-outline"],[1,"ion-padding"],[1,"groups-card"],[1,"section-title"],["name","people-outline"],["class","groups-list",4,"ngIf"],["class","empty-state",4,"ngIf"],["slot","fixed","vertical","bottom","horizontal","end",4,"ngIf"],[3,"isOpen","breakpoints","initialBreakpoint"],[1,"groups-list"],["class","group-item",3,"click",4,"ngFor","ngForOf"],[1,"group-item",3,"click"],[1,"group-header"],[1,"group-info"],[1,"group-name"],[1,"group-admin"],[1,"group-type"],[3,"color"],[1,"group-stats"],[1,"stat-item"],["name","people-outline","color","primary"],[1,"stat-info"],[1,"stat-value"],[1,"stat-label"],["name","trophy-outline","color","warning"],["class","stat-item",4,"ngIf"],[1,"group-actions"],["fill","clear","size","small",3,"click"],["name","people-outline","slot","start"],["name","eye-outline","slot","start"],["name","cash-outline","color","success"],[1,"empty-state"],[1,"empty-icon"],["expand","block",1,"join-first-group-btn",3,"click"],["name","person-add-outline","slot","start"],["slot","fixed","vertical","bottom","horizontal","end"],["name","add-outline"],[1,"modal-content"],[1,"modal-header"],["fill","clear",3,"click"],["name","close-outline","slot","icon-only"],[1,"join-form"],[1,"modal-description"],["label","Group Code","labelPlacement","stacked","placeholder","Enter 6-character code","maxlength","6",1,"join-input",3,"ngModelChange","ionInput","ngModel","disabled"],["color","danger",4,"ngIf"],["expand","block",1,"join-button",3,"click","disabled"],["name","enter-outline","slot","start",4,"ngIf"],["name","hourglass-outline","slot","start",4,"ngIf"],["color","danger"],["name","enter-outline","slot","start"],["name","hourglass-outline","slot","start"]],template:function(o,e){1&o&&(n.j41(0,"ion-header")(1,"ion-toolbar")(2,"div",0),n.bIt("click",function(){return e.navigateTo("/player/dashboard")}),n.nrm(3,"ion-icon",1),n.j41(4,"div",2)(5,"span",3),n.EFF(6,"SOTD"),n.k0s(),n.j41(7,"span",4),n.EFF(8,"Predict 3"),n.k0s()()(),n.j41(9,"ion-buttons",5)(10,"ion-button",6),n.bIt("click",function(){return e.navigateTo("/player/settings")}),n.nrm(11,"ion-icon",7),n.k0s()()()(),n.j41(12,"ion-content",8)(13,"ion-card",9)(14,"ion-card-header")(15,"ion-card-title",10),n.nrm(16,"ion-icon",11),n.EFF(17),n.k0s()(),n.j41(18,"ion-card-content"),n.DNE(19,M,2,1,"div",12)(20,G,10,0,"div",13),n.k0s()(),n.DNE(21,O,3,0,"ion-fab",14),n.j41(22,"ion-modal",15),n.DNE(23,E,15,7,"ng-template"),n.k0s()()),2&o&&(n.R7$(17),n.SpI(" Your Groups (",e.myGroups.length,") "),n.R7$(2),n.Y8G("ngIf",e.myGroups.length>0),n.R7$(),n.Y8G("ngIf",0===e.myGroups.length),n.R7$(),n.Y8G("ngIf",e.myGroups.length>0),n.R7$(),n.Y8G("isOpen",e.isJoinModalOpen)("breakpoints",n.lJ4(7,v))("initialBreakpoint",.5))},dependencies:[s.eU,s.ai,s.W9,s.b_,s.ME,s.tN,s.I9,s.In,s.iq,s.Jm,s.Q8,s.YW,s.Sb,s.$w,s.JI,s.QW,u.pM,u.bT,p.YN,p.BC,p.tU,p.vS],styles:["ion-card-header[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:1.1rem}ion-card-header[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.2rem}.group-container[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;gap:12px;padding:8px 0}.group-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1rem;font-weight:500;color:var(--ion-color-dark)}.group-info[_ngcontent-%COMP%]   .admin[_ngcontent-%COMP%]{margin:4px 0 0;font-size:.85rem;color:var(--ion-color-medium)}.group-stats[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.group-stats[_ngcontent-%COMP%]   .members[_ngcontent-%COMP%], .group-stats[_ngcontent-%COMP%]   .position[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:.9rem;color:var(--ion-color-medium)}.group-stats[_ngcontent-%COMP%]   .members[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .group-stats[_ngcontent-%COMP%]   .position[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.empty-state[_ngcontent-%COMP%]{padding:32px 16px;text-align:center;color:var(--ion-color-medium)}.empty-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:48px;margin-bottom:16px}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.1rem;font-weight:500}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px 0 0;font-size:.9rem}.modal-content[_ngcontent-%COMP%]{padding:20px 20px 32px}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.2rem;font-weight:600}.join-form[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 16px;font-size:.9rem;color:var(--ion-color-medium)}.join-form[_ngcontent-%COMP%]   .join-input[_ngcontent-%COMP%]{margin-bottom:24px;--background: var(--ion-color-light);--border-radius: 8px;--padding-start: 16px;--padding-end: 16px}.join-form[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin-top:8px;margin-bottom:16px}ion-item[_ngcontent-%COMP%]{--padding-start: 16px;--padding-end: 16px;--inner-padding-end: 16px}ion-item[_ngcontent-%COMP%]:not(:last-child){--border-width: 0 0 1px 0;--border-color: var(--ion-color-light)}ion-content[_ngcontent-%COMP%]{--padding-bottom: 120px}ion-card[_ngcontent-%COMP%]{margin:0 0 16px}ion-fab[_ngcontent-%COMP%]{bottom:56px;margin-bottom:env(safe-area-inset-bottom)}"]}),c})()}}]);