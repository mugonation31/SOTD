{"version":3,"file":"src_app_platforms_group-admin_pages_leaderboard_leaderboard_page_ts.js","mappings":"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","sources":["./src/app/platforms/group-admin/pages/leaderboard/leaderboard.page.ts","./src/app/platforms/group-admin/pages/leaderboard/leaderboard.page.html"],"sourcesContent":["import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { Router } from '@angular/router';\nimport {\n  IonHeader,\n  IonToolbar,\n  IonTitle,\n  IonContent,\n  IonCard,\n  IonCardContent,\n  IonList,\n  IonItem,\n  IonBadge,\n  IonIcon,\n  IonButtons,\n  IonButton,\n} from '@ionic/angular/standalone';\nimport { NgFor, NgIf } from '@angular/common';\nimport { addIcons } from 'ionicons';\nimport {\n  peopleOutline,\n  footballOutline,\n  personOutline,\n  chevronForwardOutline,\n  addOutline,\n} from 'ionicons/icons';\nimport { GroupService, Standing } from '@core/services/group.service';\nimport { AuthService } from '@core/services/auth.service';\nimport { Subscription } from 'rxjs';\n\ninterface GroupStanding {\n  group: {\n    id: string;\n    name: string;\n    code: string;\n    memberCount: number;\n    type: 'casual' | 'prize';\n  };\n  leaderboard: Standing[];\n  adminPosition: number | null;\n}\n\n@Component({\n  selector: 'app-leaderboard',\n  templateUrl: './leaderboard.page.html',\n  styleUrls: ['./leaderboard.page.scss'],\n  standalone: true,\n  imports: [\n    IonHeader,\n    IonToolbar,\n    IonTitle,\n    IonContent,\n    IonCard,\n    IonCardContent,\n    IonList,\n    IonItem,\n    IonBadge,\n    IonIcon,\n    IonButtons,\n    IonButton,\n    NgFor,\n    NgIf,\n  ],\n})\nexport class LeaderboardPage implements OnInit, OnDestroy {\n  currentUserId: string | null = null;\n  groupStandings: GroupStanding[] = [];\n  private groupsSubscription?: Subscription;\n\n  constructor(\n    private router: Router,\n    private groupService: GroupService,\n    private authService: AuthService\n  ) {\n    addIcons({\n      footballOutline,\n      personOutline,\n      peopleOutline,\n      chevronForwardOutline,\n      addOutline,\n    });\n  }\n\n  ngOnInit() {\n\n    this.currentUserId = this.authService.getCurrentUser()?.id || null;\n    this.loadGroupStandings();\n    \n    // Subscribe to group updates for real-time member count and standings updates\n    this.groupsSubscription = this.groupService.groups$.subscribe(() => {\n\n      this.loadGroupStandings();\n    });\n  }\n\n  ngOnDestroy() {\n    if (this.groupsSubscription) {\n      this.groupsSubscription.unsubscribe();\n    }\n  }\n\n  private loadGroupStandings() {\n\n    const groupsWithLeaderboards = this.groupService.getAdminGroupsWithLeaderboards();\n    \n    this.groupStandings = groupsWithLeaderboards.map(item => {\n      // Use the centralized conversion function from the service\n      const convertedLeaderboard = this.groupService.convertToStandings(item.leaderboard);\n      \n      // Ensure member count is synced with actual members\n      const actualMemberCount = item.group.members.length;\n      \n\n      \n      return {\n        group: {\n          id: item.group.id,\n          name: item.group.name,\n          code: item.group.code,\n          memberCount: actualMemberCount, // Use actual member count\n          type: item.group.type\n        },\n        leaderboard: convertedLeaderboard,\n        adminPosition: item.adminPosition\n      };\n    });\n  }\n\n  // Track by function for better performance when rendering groups\n  trackByGroupId(index: number, item: GroupStanding): string {\n    return item.group.id;\n  }\n\n  viewGroupLeaderboard(groupId: string) {\n    this.router.navigate(['/group-admin/groups', groupId, 'leaderboard']);\n  }\n\n  navigateTo(path: string) {\n    this.router.navigate([path]);\n  }\n\n  createNewGroup() {\n    this.router.navigate(['/group-admin/groups']);\n  }\n}\n","<ion-header>\n  <ion-toolbar>\n    <div class=\"logo-container\" (click)=\"navigateTo('/group-admin/dashboard')\">\n      <ion-icon name=\"football-outline\" class=\"football-icon\"></ion-icon>\n      <div class=\"logo-text\">\n        <span class=\"logo-sotd\">SOTD</span>\n        <span class=\"logo-subtitle\">Predict 3</span>\n      </div>\n    </div>\n    <ion-buttons slot=\"end\">\n      <ion-button (click)=\"navigateTo('/group-admin/settings')\">\n        <ion-icon name=\"person-outline\"></ion-icon>\n      </ion-button>\n    </ion-buttons>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content class=\"ion-padding\">\n  <!-- Page Title -->\n  <div class=\"page-header\">\n    <h1>My Groups</h1>\n    <p *ngIf=\"groupStandings.length > 0\">{{ groupStandings.length }} group{{ groupStandings.length === 1 ? '' : 's' }} managed</p>\n  </div>\n\n  <!-- No Groups Message -->\n  <ion-card *ngIf=\"groupStandings.length === 0\" class=\"empty-state\">\n    <ion-card-content>\n      <ion-icon name=\"people-outline\" size=\"large\" color=\"medium\"></ion-icon>\n      <h3>No Groups Created</h3>\n      <p>Create your first group to see leaderboards!</p>\n      <ion-button (click)=\"createNewGroup()\" fill=\"outline\">\n        <ion-icon name=\"add-outline\" slot=\"start\"></ion-icon>\n        Create Group\n      </ion-button>\n    </ion-card-content>\n  </ion-card>\n\n  <!-- Groups List -->\n  <ion-list *ngIf=\"groupStandings.length > 0\">\n    <ion-item \n      *ngFor=\"let groupStanding of groupStandings; trackBy: trackByGroupId\" \n      button \n      (click)=\"viewGroupLeaderboard(groupStanding.group.id)\"\n      class=\"group-item\">\n      \n      <div class=\"group-content\">\n        <div class=\"group-main\">\n          <h3 class=\"group-name\">{{ groupStanding.group.name }}</h3>\n          <div class=\"group-details\">\n            <span class=\"member-count\">{{ groupStanding.group.memberCount }} members</span>\n            <span class=\"group-type\" [class.prize]=\"groupStanding.group.type === 'prize'\">\n              {{ groupStanding.group.type === 'prize' ? 'Prize Pool' : 'Casual' }}\n            </span>\n          </div>\n          <p class=\"group-code\">Code: {{ groupStanding.group.code }}</p>\n        </div>\n        \n        <div class=\"admin-info\">\n          <div class=\"admin-label\">Admin</div>\n          <div class=\"member-stats\">{{ groupStanding.group.memberCount }} {{ groupStanding.group.memberCount === 1 ? 'player' : 'players' }}</div>\n        </div>\n      </div>\n      \n      <ion-icon name=\"chevron-forward-outline\" slot=\"end\" color=\"medium\"></ion-icon>\n    </ion-item>\n  </ion-list>\n</ion-content> "],"names":["IonHeader","IonToolbar","IonContent","IonCard","IonCardContent","IonList","IonItem","IonIcon","IonButtons","IonButton","NgFor","NgIf","addIcons","peopleOutline","footballOutline","personOutline","chevronForwardOutline","addOutline","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate2","ctx_r0","groupStandings","length","ɵɵelement","ɵɵlistener","LeaderboardPage_ion_card_17_Template_ion_button_click_7_listener","ɵɵrestoreView","_r2","ɵɵnextContext","ɵɵresetView","createNewGroup","LeaderboardPage_ion_list_18_ion_item_1_Template_ion_item_click_0_listener","groupStanding_r4","_r3","$implicit","viewGroupLeaderboard","group","id","ɵɵtextInterpolate","name","ɵɵtextInterpolate1","memberCount","ɵɵclassProp","type","code","ɵɵtemplate","LeaderboardPage_ion_list_18_ion_item_1_Template","ɵɵproperty","trackByGroupId","LeaderboardPage","constructor","router","groupService","authService","currentUserId","ngOnInit","_this$authService$get","getCurrentUser","loadGroupStandings","groupsSubscription","groups$","subscribe","ngOnDestroy","unsubscribe","groupsWithLeaderboards","getAdminGroupsWithLeaderboards","map","item","convertedLeaderboard","convertToStandings","leaderboard","actualMemberCount","members","adminPosition","index","groupId","navigate","navigateTo","path","ɵɵdirectiveInject","i1","Router","i2","GroupService","i3","AuthService","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","LeaderboardPage_Template","rf","ctx","LeaderboardPage_Template_div_click_2_listener","LeaderboardPage_Template_ion_button_click_10_listener","LeaderboardPage_p_16_Template","LeaderboardPage_ion_card_17_Template","LeaderboardPage_ion_list_18_Template","styles"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}